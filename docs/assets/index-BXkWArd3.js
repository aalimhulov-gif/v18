function BI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const zI="modulepreload",$I=function(t,e){return new URL(t,e).href},Qy={},WI=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=$I(c,r),c in Qy)return;Qy[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const I=o[E];if(I.href===c&&(!h||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":zI,h||(y.as="script"),y.crossOrigin="",y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((E,I)=>{y.addEventListener("load",E),y.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function HI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},wc={},Q_={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),qI=Symbol.for("react.portal"),KI=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),QI=Symbol.for("react.profiler"),YI=Symbol.for("react.provider"),XI=Symbol.for("react.context"),JI=Symbol.for("react.forward_ref"),ZI=Symbol.for("react.suspense"),eA=Symbol.for("react.memo"),tA=Symbol.for("react.lazy"),Yy=Symbol.iterator;function nA(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X_=Object.assign,J_={};function qs(t,e,n){this.props=t,this.context=e,this.refs=J_,this.updater=n||Y_}qs.prototype.isReactComponent={};qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z_(){}Z_.prototype=qs.prototype;function Ep(t,e,n){this.props=t,this.context=e,this.refs=J_,this.updater=n||Y_}var Tp=Ep.prototype=new Z_;Tp.constructor=Ep;X_(Tp,qs.prototype);Tp.isPureReactComponent=!0;var Xy=Array.isArray,ew=Object.prototype.hasOwnProperty,bp={current:null},tw={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ew.call(e,r)&&!tw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:za,type:t,key:s,ref:o,props:i,_owner:bp.current}}function rA(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function iA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jy=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iA(""+t.key):e.toString(36)}function tu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case qI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Od(o,0):r,Xy(i)?(n="",t!=null&&(n=t.replace(Jy,"$&/")+"/"),tu(i,e,n,"",function(c){return c})):i!=null&&(Sp(i)&&(i=rA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Xy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Od(s,a);o+=tu(s,e,n,l,i)}else if(l=nA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Od(s,a++),o+=tu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(t,e,n){if(t==null)return t;var r=[],i=0;return tu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},nu={transition:null},oA={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:nu,ReactCurrentOwner:bp};function rw(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!Sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=qs;ie.Fragment=KI;ie.Profiler=QI;ie.PureComponent=Ep;ie.StrictMode=GI;ie.Suspense=ZI;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oA;ie.act=rw;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=X_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ew.call(e,l)&&!tw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:za,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:XI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YI,_context:t},t.Consumer=t};ie.createElement=nw;ie.createFactory=function(t){var e=nw.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:JI,render:t}};ie.isValidElement=Sp;ie.lazy=function(t){return{$$typeof:tA,_payload:{_status:-1,_result:t},_init:sA}};ie.memo=function(t,e){return{$$typeof:eA,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};ie.unstable_act=rw;ie.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ie.useContext=function(t){return Tt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ie.useId=function(){return Tt.current.useId()};ie.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ie.useRef=function(t){return Tt.current.useRef(t)};ie.useState=function(t){return Tt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Tt.current.useTransition()};ie.version="18.3.1";Q_.exports=ie;var R=Q_.exports;const Ip=HI(R),aA=BI({__proto__:null,default:Ip},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA=R,uA=Symbol.for("react.element"),cA=Symbol.for("react.fragment"),dA=Object.prototype.hasOwnProperty,hA=lA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fA={key:!0,ref:!0,__self:!0,__source:!0};function iw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dA.call(e,r)&&!fA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uA,type:t,key:s,ref:o,props:i,_owner:hA.current}}wc.Fragment=cA;wc.jsx=iw;wc.jsxs=iw;G_.exports=wc;var d=G_.exports,sw={exports:{}},Ut={},ow={exports:{}},aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,G){var X=B.length;B.push(G);e:for(;0<X;){var ye=X-1>>>1,de=B[ye];if(0<i(de,G))B[ye]=G,B[X]=de,X=ye;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var G=B[0],X=B.pop();if(X!==G){B[0]=X;e:for(var ye=0,de=B.length,be=de>>>1;ye<be;){var Yt=2*(ye+1)-1,Xt=B[Yt],vt=Yt+1,Jt=B[vt];if(0>i(Xt,X))vt<de&&0>i(Jt,Xt)?(B[ye]=Jt,B[vt]=X,ye=vt):(B[ye]=Xt,B[Yt]=X,ye=Yt);else if(vt<de&&0>i(Jt,X))B[ye]=Jt,B[vt]=X,ye=vt;else break e}}return G}function i(B,G){var X=B.sortIndex-G.sortIndex;return X!==0?X:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,p=null,m=3,y=!1,E=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=B)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function A(B){if(I=!1,b(B),!E)if(n(l)!==null)E=!0,Ue(j);else{var G=n(c);G!==null&&ne(A,G.startTime-B)}}function j(B,G){E=!1,I&&(I=!1,_(v),v=-1),y=!0;var X=m;try{for(b(G),p=n(l);p!==null&&(!(p.expirationTime>G)||B&&!N());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,m=p.priorityLevel;var de=ye(p.expirationTime<=G);G=t.unstable_now(),typeof de=="function"?p.callback=de:p===n(l)&&r(l),b(G)}else r(l);p=n(l)}if(p!==null)var be=!0;else{var Yt=n(c);Yt!==null&&ne(A,Yt.startTime-G),be=!1}return be}finally{p=null,m=X,y=!1}}var D=!1,T=null,v=-1,S=5,P=-1;function N(){return!(t.unstable_now()-P<S)}function V(){if(T!==null){var B=t.unstable_now();P=B;var G=!0;try{G=T(!0,B)}finally{G?k():(D=!1,T=null)}}else D=!1}var k;if(typeof x=="function")k=function(){x(V)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=V,k=function(){pe.postMessage(null)}}else k=function(){C(V,0)};function Ue(B){T=B,D||(D=!0,k())}function ne(B,G){v=C(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,Ue(j))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var X=m;m=G;try{return B()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=m;m=B;try{return G()}finally{m=X}},t.unstable_scheduleCallback=function(B,G,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=X+de,B={id:h++,callback:G,priorityLevel:B,startTime:X,expirationTime:de,sortIndex:-1},X>ye?(B.sortIndex=X,e(c,B),n(l)===null&&B===n(c)&&(I?(_(v),v=-1):I=!0,ne(A,X-ye))):(B.sortIndex=de,e(l,B),E||y||(E=!0,Ue(j))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var G=m;return function(){var X=m;m=G;try{return B.apply(this,arguments)}finally{m=X}}}})(aw);ow.exports=aw;var pA=ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=R,Mt=pA;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lw=new Set,oa={};function ji(t,e){As(t,e),As(t+"Capture",e)}function As(t,e){for(oa[t]=e,t=0;t<e.length;t++)lw.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lh=Object.prototype.hasOwnProperty,gA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zy={},ev={};function yA(t){return Lh.call(ev,t)?!0:Lh.call(Zy,t)?!1:gA.test(t)?ev[t]=!0:(Zy[t]=!0,!1)}function vA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xA(t,e,n,r){if(e===null||typeof e>"u"||vA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ap=/[\-:]([a-z])/g;function Cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ap,Cp);nt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ap,Cp);nt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ap,Cp);nt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pp(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xA(e,n,i,r)&&(n=null),r||i===null?yA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rr=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),kp=Symbol.for("react.strict_mode"),Oh=Symbol.for("react.profiler"),uw=Symbol.for("react.provider"),cw=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),Mh=Symbol.for("react.suspense"),Fh=Symbol.for("react.suspense_list"),Rp=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),dw=Symbol.for("react.offscreen"),tv=Symbol.iterator;function vo(t){return t===null||typeof t!="object"?null:(t=tv&&t[tv]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Md;function Co(t){if(Md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Md=e&&e[1]||""}return`
`+Md+t}var Fd=!1;function Ud(t,e){if(!t||Fd)return"";Fd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Co(t):""}function _A(t){switch(t.tag){case 5:return Co(t.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function Uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Yi:return"Portal";case Oh:return"Profiler";case kp:return"StrictMode";case Mh:return"Suspense";case Fh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cw:return(t.displayName||"Context")+".Consumer";case uw:return(t._context.displayName||"Context")+".Provider";case Np:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rp:return e=t.displayName||null,e!==null?e:Uh(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Uh(t(e))}catch{}}return null}function wA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uh(e);case 8:return e===kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EA(t){var e=hw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pl(t){t._valueTracker||(t._valueTracker=EA(t))}function fw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bh(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pw(t,e){e=e.checked,e!=null&&Pp(t,"checked",e,!1)}function zh(t,e){pw(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$h(t,e.type,n):e.hasOwnProperty("defaultValue")&&$h(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $h(t,e,n){(e!=="number"||Iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function ms(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Po(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function mw(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,yw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){TA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function vw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function xw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bA=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qh(t,e){if(e){if(bA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gh=null;function jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qh=null,gs=null,ys=null;function ov(t){if(t=Ha(t)){if(typeof Qh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ic(e),Qh(t.stateNode,t.type,e))}}function _w(t){gs?ys?ys.push(t):ys=[t]:gs=t}function ww(){if(gs){var t=gs,e=ys;if(ys=gs=null,ov(t),e)for(t=0;t<e.length;t++)ov(e[t])}}function Ew(t,e){return t(e)}function Tw(){}var Bd=!1;function bw(t,e,n){if(Bd)return t(e,n);Bd=!0;try{return Ew(t,e,n)}finally{Bd=!1,(gs!==null||ys!==null)&&(Tw(),ww())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Yh=!1;if(Gn)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Yh=!1}function SA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var $o=!1,Au=null,Cu=!1,Xh=null,IA={onError:function(t){$o=!0,Au=t}};function AA(t,e,n,r,i,s,o,a,l){$o=!1,Au=null,SA.apply(IA,arguments)}function CA(t,e,n,r,i,s,o,a,l){if(AA.apply(this,arguments),$o){if($o){var c=Au;$o=!1,Au=null}else throw Error(U(198));Cu||(Cu=!0,Xh=c)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function av(t){if(Di(t)!==t)throw Error(U(188))}function PA(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return av(i),t;if(s===r)return av(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Iw(t){return t=PA(t),t!==null?Aw(t):null}function Aw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Aw(t);if(e!==null)return e;t=t.sibling}return null}var Cw=Mt.unstable_scheduleCallback,lv=Mt.unstable_cancelCallback,kA=Mt.unstable_shouldYield,NA=Mt.unstable_requestPaint,Le=Mt.unstable_now,RA=Mt.unstable_getCurrentPriorityLevel,Dp=Mt.unstable_ImmediatePriority,Pw=Mt.unstable_UserBlockingPriority,Pu=Mt.unstable_NormalPriority,jA=Mt.unstable_LowPriority,kw=Mt.unstable_IdlePriority,Ec=null,wn=null;function DA(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:OA,VA=Math.log,LA=Math.LN2;function OA(t){return t>>>=0,t===0?32:31-(VA(t)/LA|0)|0}var Nl=64,Rl=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ko(a):(s&=o,s!==0&&(r=ko(s)))}else o=n&~i,o!==0?r=ko(o):s!==0&&(r=ko(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),i=1<<n,r|=t[n],e&=~i;return r}function MA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-un(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=MA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nw(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function zd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function UA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-un(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function Rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jw,Lp,Dw,Vw,Lw,Zh=!1,jl=[],Ir=null,Ar=null,Cr=null,ua=new Map,ca=new Map,gr=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function _o(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ha(e),e!==null&&Lp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zA(t,e,n,r,i){switch(e){case"focusin":return Ir=_o(Ir,t,e,n,r,i),!0;case"dragenter":return Ar=_o(Ar,t,e,n,r,i),!0;case"mouseover":return Cr=_o(Cr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ua.set(s,_o(ua.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ca.set(s,_o(ca.get(s)||null,t,e,n,r,i)),!0}return!1}function Ow(t){var e=hi(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=Sw(n),e!==null){t.blockedOn=e,Lw(t.priority,function(){Dw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gh=r,n.target.dispatchEvent(r),Gh=null}else return e=Ha(n),e!==null&&Lp(e),t.blockedOn=n,!1;e.shift()}return!0}function cv(t,e,n){ru(t)&&n.delete(e)}function $A(){Zh=!1,Ir!==null&&ru(Ir)&&(Ir=null),Ar!==null&&ru(Ar)&&(Ar=null),Cr!==null&&ru(Cr)&&(Cr=null),ua.forEach(cv),ca.forEach(cv)}function wo(t,e){t.blockedOn===e&&(t.blockedOn=null,Zh||(Zh=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,$A)))}function da(t){function e(i){return wo(i,t)}if(0<jl.length){wo(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&wo(Ir,t),Ar!==null&&wo(Ar,t),Cr!==null&&wo(Cr,t),ua.forEach(e),ca.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)Ow(n),n.blockedOn===null&&gr.shift()}var vs=rr.ReactCurrentBatchConfig,Nu=!0;function WA(t,e,n,r){var i=he,s=vs.transition;vs.transition=null;try{he=1,Op(t,e,n,r)}finally{he=i,vs.transition=s}}function HA(t,e,n,r){var i=he,s=vs.transition;vs.transition=null;try{he=4,Op(t,e,n,r)}finally{he=i,vs.transition=s}}function Op(t,e,n,r){if(Nu){var i=ef(t,e,n,r);if(i===null)Jd(t,e,r,Ru,n),uv(t,r);else if(zA(i,t,e,n,r))r.stopPropagation();else if(uv(t,r),e&4&&-1<BA.indexOf(t)){for(;i!==null;){var s=Ha(i);if(s!==null&&jw(s),s=ef(t,e,n,r),s===null&&Jd(t,e,r,Ru,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Jd(t,e,r,null,n)}}var Ru=null;function ef(t,e,n,r){if(Ru=null,t=jp(r),t=hi(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ru=t,null}function Mw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RA()){case Dp:return 1;case Pw:return 4;case Pu:case jA:return 16;case kw:return 536870912;default:return 16}default:return 16}}var Er=null,Mp=null,iu=null;function Fw(){if(iu)return iu;var t,e=Mp,n=e.length,r,i="value"in Er?Er.value:Er.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return iu=i.slice(t,1<r?1-r:void 0)}function su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function dv(){return!1}function Bt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dl:dv,this.isPropagationStopped=dv,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fp=Bt(Ks),Wa=Pe({},Ks,{view:0,detail:0}),qA=Bt(Wa),$d,Wd,Eo,Tc=Pe({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?($d=t.screenX-Eo.screenX,Wd=t.screenY-Eo.screenY):Wd=$d=0,Eo=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:Wd}}),hv=Bt(Tc),KA=Pe({},Tc,{dataTransfer:0}),GA=Bt(KA),QA=Pe({},Wa,{relatedTarget:0}),Hd=Bt(QA),YA=Pe({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),XA=Bt(YA),JA=Pe({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZA=Bt(JA),eC=Pe({},Ks,{data:0}),fv=Bt(eC),tC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rC[t])?!!e[t]:!1}function Up(){return iC}var sC=Pe({},Wa,{key:function(t){if(t.key){var e=tC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Up,charCode:function(t){return t.type==="keypress"?su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oC=Bt(sC),aC=Pe({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pv=Bt(aC),lC=Pe({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Up}),uC=Bt(lC),cC=Pe({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=Bt(cC),hC=Pe({},Tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fC=Bt(hC),pC=[9,13,27,32],Bp=Gn&&"CompositionEvent"in window,Wo=null;Gn&&"documentMode"in document&&(Wo=document.documentMode);var mC=Gn&&"TextEvent"in window&&!Wo,Uw=Gn&&(!Bp||Wo&&8<Wo&&11>=Wo),mv=" ",gv=!1;function Bw(t,e){switch(t){case"keyup":return pC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function gC(t,e){switch(t){case"compositionend":return zw(e);case"keypress":return e.which!==32?null:(gv=!0,mv);case"textInput":return t=e.data,t===mv&&gv?null:t;default:return null}}function yC(t,e){if(Ji)return t==="compositionend"||!Bp&&Bw(t,e)?(t=Fw(),iu=Mp=Er=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uw&&e.locale!=="ko"?null:e.data;default:return null}}var vC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vC[t.type]:e==="textarea"}function $w(t,e,n,r){_w(r),e=ju(e,"onChange"),0<e.length&&(n=new Fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ho=null,ha=null;function xC(t){eE(t,0)}function bc(t){var e=ts(t);if(fw(e))return t}function _C(t,e){if(t==="change")return e}var Ww=!1;if(Gn){var qd;if(Gn){var Kd="oninput"in document;if(!Kd){var vv=document.createElement("div");vv.setAttribute("oninput","return;"),Kd=typeof vv.oninput=="function"}qd=Kd}else qd=!1;Ww=qd&&(!document.documentMode||9<document.documentMode)}function xv(){Ho&&(Ho.detachEvent("onpropertychange",Hw),ha=Ho=null)}function Hw(t){if(t.propertyName==="value"&&bc(ha)){var e=[];$w(e,ha,t,jp(t)),bw(xC,e)}}function wC(t,e,n){t==="focusin"?(xv(),Ho=e,ha=n,Ho.attachEvent("onpropertychange",Hw)):t==="focusout"&&xv()}function EC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(ha)}function TC(t,e){if(t==="click")return bc(e)}function bC(t,e){if(t==="input"||t==="change")return bc(e)}function SC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:SC;function fa(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lh.call(e,i)||!hn(t[i],e[i]))return!1}return!0}function _v(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wv(t,e){var n=_v(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_v(n)}}function qw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kw(){for(var t=window,e=Iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Iu(t.document)}return e}function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IC(t){var e=Kw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qw(n.ownerDocument.documentElement,n)){if(r!==null&&zp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=wv(n,s);var o=wv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AC=Gn&&"documentMode"in document&&11>=document.documentMode,Zi=null,tf=null,qo=null,nf=!1;function Ev(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||Zi==null||Zi!==Iu(r)||(r=Zi,"selectionStart"in r&&zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&fa(qo,r)||(qo=r,r=ju(tf,"onSelect"),0<r.length&&(e=new Fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zi)))}function Vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},Gd={},Gw={};Gn&&(Gw=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function Sc(t){if(Gd[t])return Gd[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gw)return Gd[t]=e[n];return t}var Qw=Sc("animationend"),Yw=Sc("animationiteration"),Xw=Sc("animationstart"),Jw=Sc("transitionend"),Zw=new Map,Tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){Zw.set(t,e),ji(e,[t])}for(var Qd=0;Qd<Tv.length;Qd++){var Yd=Tv[Qd],CC=Yd.toLowerCase(),PC=Yd[0].toUpperCase()+Yd.slice(1);Kr(CC,"on"+PC)}Kr(Qw,"onAnimationEnd");Kr(Yw,"onAnimationIteration");Kr(Xw,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(Jw,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kC=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function bv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CA(r,e,void 0,t),t.currentTarget=null}function eE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bv(i,a,c),s=l}}}if(Cu)throw t=Xh,Cu=!1,Xh=null,t}function xe(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(tE(e,t,2,!1),n.add(r))}function Xd(t,e,n){var r=0;e&&(r|=4),tE(n,t,r,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[Ll]){t[Ll]=!0,lw.forEach(function(n){n!=="selectionchange"&&(kC.has(n)||Xd(n,!1,t),Xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,Xd("selectionchange",!1,e))}}function tE(t,e,n,r){switch(Mw(e)){case 1:var i=WA;break;case 4:i=HA;break;default:i=Op}n=i.bind(null,e,n,t),i=void 0,!Yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Jd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}bw(function(){var c=s,h=jp(n),p=[];e:{var m=Zw.get(t);if(m!==void 0){var y=Fp,E=t;switch(t){case"keypress":if(su(n)===0)break e;case"keydown":case"keyup":y=oC;break;case"focusin":E="focus",y=Hd;break;case"focusout":E="blur",y=Hd;break;case"beforeblur":case"afterblur":y=Hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=hv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=GA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=uC;break;case Qw:case Yw:case Xw:y=XA;break;case Jw:y=dC;break;case"scroll":y=qA;break;case"wheel":y=fC;break;case"copy":case"cut":case"paste":y=ZA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=pv}var I=(e&4)!==0,C=!I&&t==="scroll",_=I?m!==null?m+"Capture":null:m;I=[];for(var x=c,b;x!==null;){b=x;var A=b.stateNode;if(b.tag===5&&A!==null&&(b=A,_!==null&&(A=la(x,_),A!=null&&I.push(ma(x,A,b)))),C)break;x=x.return}0<I.length&&(m=new y(m,E,null,n,h),p.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Gh&&(E=n.relatedTarget||n.fromElement)&&(hi(E)||E[Qn]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?hi(E):null,E!==null&&(C=Di(E),E!==C||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(I=hv,A="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(I=pv,A="onPointerLeave",_="onPointerEnter",x="pointer"),C=y==null?m:ts(y),b=E==null?m:ts(E),m=new I(A,x+"leave",y,n,h),m.target=C,m.relatedTarget=b,A=null,hi(h)===c&&(I=new I(_,x+"enter",E,n,h),I.target=b,I.relatedTarget=C,A=I),C=A,y&&E)t:{for(I=y,_=E,x=0,b=I;b;b=qi(b))x++;for(b=0,A=_;A;A=qi(A))b++;for(;0<x-b;)I=qi(I),x--;for(;0<b-x;)_=qi(_),b--;for(;x--;){if(I===_||_!==null&&I===_.alternate)break t;I=qi(I),_=qi(_)}I=null}else I=null;y!==null&&Sv(p,m,y,I,!1),E!==null&&C!==null&&Sv(p,C,E,I,!0)}}e:{if(m=c?ts(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=_C;else if(yv(m))if(Ww)j=bC;else{j=EC;var D=wC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=TC);if(j&&(j=j(t,c))){$w(p,j,n,h);break e}D&&D(t,m,c),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&$h(m,"number",m.value)}switch(D=c?ts(c):window,t){case"focusin":(yv(D)||D.contentEditable==="true")&&(Zi=D,tf=c,qo=null);break;case"focusout":qo=tf=Zi=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Ev(p,n,h);break;case"selectionchange":if(AC)break;case"keydown":case"keyup":Ev(p,n,h)}var T;if(Bp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ji?Bw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Uw&&n.locale!=="ko"&&(Ji||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ji&&(T=Fw()):(Er=h,Mp="value"in Er?Er.value:Er.textContent,Ji=!0)),D=ju(c,v),0<D.length&&(v=new fv(v,t,null,n,h),p.push({event:v,listeners:D}),T?v.data=T:(T=zw(n),T!==null&&(v.data=T)))),(T=mC?gC(t,n):yC(t,n))&&(c=ju(c,"onBeforeInput"),0<c.length&&(h=new fv("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=T))}eE(p,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ju(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=la(t,n),s!=null&&r.unshift(ma(t,s,i)),s=la(t,e),s!=null&&r.push(ma(t,s,i))),t=t.return}return r}function qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=la(n,s),l!=null&&o.unshift(ma(n,l,a))):i||(l=la(n,s),l!=null&&o.push(ma(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var NC=/\r\n?/g,RC=/\u0000|\uFFFD/g;function Iv(t){return(typeof t=="string"?t:""+t).replace(NC,`
`).replace(RC,"")}function Ol(t,e,n){if(e=Iv(e),Iv(t)!==e&&n)throw Error(U(425))}function Du(){}var rf=null,sf=null;function of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,jC=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(t){return Av.resolve(null).then(t).catch(VC)}:af;function VC(t){setTimeout(function(){throw t})}function Zd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);da(e)}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),xn="__reactFiber$"+Gs,ga="__reactProps$"+Gs,Qn="__reactContainer$"+Gs,lf="__reactEvents$"+Gs,LC="__reactListeners$"+Gs,OC="__reactHandles$"+Gs;function hi(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cv(t);t!==null;){if(n=t[xn])return n;t=Cv(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[xn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ic(t){return t[ga]||null}var uf=[],ns=-1;function Gr(t){return{current:t}}function we(t){0>ns||(t.current=uf[ns],uf[ns]=null,ns--)}function ge(t,e){ns++,uf[ns]=t.current,t.current=e}var Ur={},gt=Gr(Ur),Ct=Gr(!1),Ei=Ur;function Cs(t,e){var n=t.type.contextTypes;if(!n)return Ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pt(t){return t=t.childContextTypes,t!=null}function Vu(){we(Ct),we(gt)}function Pv(t,e,n){if(gt.current!==Ur)throw Error(U(168));ge(gt,e),ge(Ct,n)}function nE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,wA(t)||"Unknown",i));return Pe({},n,r)}function Lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,Ei=gt.current,ge(gt,t),ge(Ct,Ct.current),!0}function kv(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=nE(t,e,Ei),r.__reactInternalMemoizedMergedChildContext=t,we(Ct),we(gt),ge(gt,t)):we(Ct),ge(Ct,n)}var On=null,Ac=!1,eh=!1;function rE(t){On===null?On=[t]:On.push(t)}function MC(t){Ac=!0,rE(t)}function Qr(){if(!eh&&On!==null){eh=!0;var t=0,e=he;try{var n=On;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Ac=!1}catch(i){throw On!==null&&(On=On.slice(t+1)),Cw(Dp,Qr),i}finally{he=e,eh=!1}}return null}var rs=[],is=0,Ou=null,Mu=0,Wt=[],Ht=0,Ti=null,Mn=1,Fn="";function ai(t,e){rs[is++]=Mu,rs[is++]=Ou,Ou=t,Mu=e}function iE(t,e,n){Wt[Ht++]=Mn,Wt[Ht++]=Fn,Wt[Ht++]=Ti,Ti=t;var r=Mn;t=Fn;var i=32-un(r)-1;r&=~(1<<i),n+=1;var s=32-un(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Mn=1<<32-un(e)+i|n<<i|r,Fn=s+t}else Mn=1<<s|n<<i|r,Fn=t}function $p(t){t.return!==null&&(ai(t,1),iE(t,1,0))}function Wp(t){for(;t===Ou;)Ou=rs[--is],rs[is]=null,Mu=rs[--is],rs[is]=null;for(;t===Ti;)Ti=Wt[--Ht],Wt[Ht]=null,Fn=Wt[--Ht],Wt[Ht]=null,Mn=Wt[--Ht],Wt[Ht]=null}var Vt=null,jt=null,Te=!1,ln=null;function sE(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,jt=Pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ti!==null?{id:Mn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,jt=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function df(t){if(Te){var e=jt;if(e){var n=e;if(!Nv(t,e)){if(cf(t))throw Error(U(418));e=Pr(n.nextSibling);var r=Vt;e&&Nv(t,e)?sE(r,n):(t.flags=t.flags&-4097|2,Te=!1,Vt=t)}}else{if(cf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Te=!1,Vt=t}}}function Rv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function Ml(t){if(t!==Vt)return!1;if(!Te)return Rv(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!of(t.type,t.memoizedProps)),e&&(e=jt)){if(cf(t))throw oE(),Error(U(418));for(;e;)sE(t,e),e=Pr(e.nextSibling)}if(Rv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Vt?Pr(t.stateNode.nextSibling):null;return!0}function oE(){for(var t=jt;t;)t=Pr(t.nextSibling)}function Ps(){jt=Vt=null,Te=!1}function Hp(t){ln===null?ln=[t]:ln.push(t)}var FC=rr.ReactCurrentBatchConfig;function To(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jv(t){var e=t._init;return e(t._payload)}function aE(t){function e(_,x){if(t){var b=_.deletions;b===null?(_.deletions=[x],_.flags|=16):b.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=jr(_,x),_.index=0,_.sibling=null,_}function s(_,x,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<x?(_.flags|=2,x):b):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,b,A){return x===null||x.tag!==6?(x=ah(b,_.mode,A),x.return=_,x):(x=i(x,b),x.return=_,x)}function l(_,x,b,A){var j=b.type;return j===Xi?h(_,x,b.props.children,A,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===pr&&jv(j)===x.type)?(A=i(x,b.props),A.ref=To(_,x,b),A.return=_,A):(A=hu(b.type,b.key,b.props,null,_.mode,A),A.ref=To(_,x,b),A.return=_,A)}function c(_,x,b,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=lh(b,_.mode,A),x.return=_,x):(x=i(x,b.children||[]),x.return=_,x)}function h(_,x,b,A,j){return x===null||x.tag!==7?(x=xi(b,_.mode,A,j),x.return=_,x):(x=i(x,b),x.return=_,x)}function p(_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ah(""+x,_.mode,b),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Cl:return b=hu(x.type,x.key,x.props,null,_.mode,b),b.ref=To(_,null,x),b.return=_,b;case Yi:return x=lh(x,_.mode,b),x.return=_,x;case pr:var A=x._init;return p(_,A(x._payload),b)}if(Po(x)||vo(x))return x=xi(x,_.mode,b,null),x.return=_,x;Fl(_,x)}return null}function m(_,x,b,A){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:a(_,x,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cl:return b.key===j?l(_,x,b,A):null;case Yi:return b.key===j?c(_,x,b,A):null;case pr:return j=b._init,m(_,x,j(b._payload),A)}if(Po(b)||vo(b))return j!==null?null:h(_,x,b,A,null);Fl(_,b)}return null}function y(_,x,b,A,j){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(b)||null,a(x,_,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Cl:return _=_.get(A.key===null?b:A.key)||null,l(x,_,A,j);case Yi:return _=_.get(A.key===null?b:A.key)||null,c(x,_,A,j);case pr:var D=A._init;return y(_,x,b,D(A._payload),j)}if(Po(A)||vo(A))return _=_.get(b)||null,h(x,_,A,j,null);Fl(x,A)}return null}function E(_,x,b,A){for(var j=null,D=null,T=x,v=x=0,S=null;T!==null&&v<b.length;v++){T.index>v?(S=T,T=null):S=T.sibling;var P=m(_,T,b[v],A);if(P===null){T===null&&(T=S);break}t&&T&&P.alternate===null&&e(_,T),x=s(P,x,v),D===null?j=P:D.sibling=P,D=P,T=S}if(v===b.length)return n(_,T),Te&&ai(_,v),j;if(T===null){for(;v<b.length;v++)T=p(_,b[v],A),T!==null&&(x=s(T,x,v),D===null?j=T:D.sibling=T,D=T);return Te&&ai(_,v),j}for(T=r(_,T);v<b.length;v++)S=y(T,_,v,b[v],A),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?v:S.key),x=s(S,x,v),D===null?j=S:D.sibling=S,D=S);return t&&T.forEach(function(N){return e(_,N)}),Te&&ai(_,v),j}function I(_,x,b,A){var j=vo(b);if(typeof j!="function")throw Error(U(150));if(b=j.call(b),b==null)throw Error(U(151));for(var D=j=null,T=x,v=x=0,S=null,P=b.next();T!==null&&!P.done;v++,P=b.next()){T.index>v?(S=T,T=null):S=T.sibling;var N=m(_,T,P.value,A);if(N===null){T===null&&(T=S);break}t&&T&&N.alternate===null&&e(_,T),x=s(N,x,v),D===null?j=N:D.sibling=N,D=N,T=S}if(P.done)return n(_,T),Te&&ai(_,v),j;if(T===null){for(;!P.done;v++,P=b.next())P=p(_,P.value,A),P!==null&&(x=s(P,x,v),D===null?j=P:D.sibling=P,D=P);return Te&&ai(_,v),j}for(T=r(_,T);!P.done;v++,P=b.next())P=y(T,_,v,P.value,A),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?v:P.key),x=s(P,x,v),D===null?j=P:D.sibling=P,D=P);return t&&T.forEach(function(V){return e(_,V)}),Te&&ai(_,v),j}function C(_,x,b,A){if(typeof b=="object"&&b!==null&&b.type===Xi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Cl:e:{for(var j=b.key,D=x;D!==null;){if(D.key===j){if(j=b.type,j===Xi){if(D.tag===7){n(_,D.sibling),x=i(D,b.props.children),x.return=_,_=x;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===pr&&jv(j)===D.type){n(_,D.sibling),x=i(D,b.props),x.ref=To(_,D,b),x.return=_,_=x;break e}n(_,D);break}else e(_,D);D=D.sibling}b.type===Xi?(x=xi(b.props.children,_.mode,A,b.key),x.return=_,_=x):(A=hu(b.type,b.key,b.props,null,_.mode,A),A.ref=To(_,x,b),A.return=_,_=A)}return o(_);case Yi:e:{for(D=b.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(_,x.sibling),x=i(x,b.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=lh(b,_.mode,A),x.return=_,_=x}return o(_);case pr:return D=b._init,C(_,x,D(b._payload),A)}if(Po(b))return E(_,x,b,A);if(vo(b))return I(_,x,b,A);Fl(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,b),x.return=_,_=x):(n(_,x),x=ah(b,_.mode,A),x.return=_,_=x),o(_)):n(_,x)}return C}var ks=aE(!0),lE=aE(!1),Fu=Gr(null),Uu=null,ss=null,qp=null;function Kp(){qp=ss=Uu=null}function Gp(t){var e=Fu.current;we(Fu),t._currentValue=e}function hf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xs(t,e){Uu=t,qp=ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},ss===null){if(Uu===null)throw Error(U(308));ss=t,Uu.dependencies={lanes:0,firstContext:t}}else ss=ss.next=t;return e}var fi=null;function Qp(t){fi===null?fi=[t]:fi.push(t)}function uE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yn(t,r)}function Yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yn(t,n)}return i=r.interleaved,i===null?(e.next=e,Qp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yn(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}function Dv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,r){var i=t.updateQueue;mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,I=a;switch(m=e,y=n,I.tag){case 1:if(E=I.payload,typeof E=="function"){p=E.call(y,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=I.payload,m=typeof E=="function"?E.call(y,p,m):E,m==null)break e;p=Pe({},p,m);break e;case 2:mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=p):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Si|=o,t.lanes=o,t.memoizedState=p}}function Vv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var qa={},En=Gr(qa),ya=Gr(qa),va=Gr(qa);function pi(t){if(t===qa)throw Error(U(174));return t}function Xp(t,e){switch(ge(va,e),ge(ya,t),ge(En,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hh(e,t)}we(En),ge(En,e)}function Ns(){we(En),we(ya),we(va)}function dE(t){pi(va.current);var e=pi(En.current),n=Hh(e,t.type);e!==n&&(ge(ya,t),ge(En,n))}function Jp(t){ya.current===t&&(we(En),we(ya))}var Se=Gr(0);function zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var th=[];function Zp(){for(var t=0;t<th.length;t++)th[t]._workInProgressVersionPrimary=null;th.length=0}var au=rr.ReactCurrentDispatcher,nh=rr.ReactCurrentBatchConfig,bi=0,Ae=null,ze=null,Ke=null,$u=!1,Ko=!1,xa=0,UC=0;function at(){throw Error(U(321))}function em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function tm(t,e,n,r,i,s){if(bi=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?WC:HC,t=n(r,i),Ko){s=0;do{if(Ko=!1,xa=0,25<=s)throw Error(U(301));s+=1,Ke=ze=null,e.updateQueue=null,au.current=qC,t=n(r,i)}while(Ko)}if(au.current=Wu,e=ze!==null&&ze.next!==null,bi=0,Ke=ze=Ae=null,$u=!1,e)throw Error(U(300));return t}function nm(){var t=xa!==0;return xa=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Ae.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Qt(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ke===null?Ae.memoizedState:Ke.next;if(e!==null)Ke=e,ze=t;else{if(t===null)throw Error(U(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ke===null?Ae.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function _a(t,e){return typeof e=="function"?e(t):e}function rh(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((bi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Ae.lanes|=h,Si|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,hn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,Si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ih(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hE(){}function fE(t,e){var n=Ae,r=Qt(),i=e(),s=!hn(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,rm(gE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,wa(9,mE.bind(null,n,r,i,e),void 0,null),Ge===null)throw Error(U(349));bi&30||pE(n,e,i)}return i}function pE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mE(t,e,n,r){e.value=n,e.getSnapshot=r,yE(e)&&vE(t)}function gE(t,e,n){return n(function(){yE(e)&&vE(t)})}function yE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function vE(t){var e=Yn(t,1);e!==null&&cn(e,t,1,-1)}function Lv(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=$C.bind(null,Ae,t),[e.memoizedState,t]}function wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xE(){return Qt().memoizedState}function lu(t,e,n,r){var i=vn();Ae.flags|=t,i.memoizedState=wa(1|e,n,void 0,r===void 0?null:r)}function Cc(t,e,n,r){var i=Qt();r=r===void 0?null:r;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,r!==null&&em(r,o.deps)){i.memoizedState=wa(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=wa(1|e,n,s,r)}function Ov(t,e){return lu(8390656,8,t,e)}function rm(t,e){return Cc(2048,8,t,e)}function _E(t,e){return Cc(4,2,t,e)}function wE(t,e){return Cc(4,4,t,e)}function EE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TE(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4,4,EE.bind(null,e,t),n)}function im(){}function bE(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SE(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IE(t,e,n){return bi&21?(hn(n,e)||(n=Nw(),Ae.lanes|=n,Si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function BC(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=nh.transition;nh.transition={};try{t(!1),e()}finally{he=n,nh.transition=r}}function AE(){return Qt().memoizedState}function zC(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CE(t))PE(e,n);else if(n=uE(t,e,n,r),n!==null){var i=Et();cn(n,t,r,i),kE(n,e,r)}}function $C(t,e,n){var r=Rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CE(t))PE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,hn(a,o)){var l=e.interleaved;l===null?(i.next=i,Qp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uE(t,e,i,r),n!==null&&(i=Et(),cn(n,t,r,i),kE(n,e,r))}}function CE(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function PE(t,e){Ko=$u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}var Wu={readContext:Gt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},WC={readContext:Gt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Ov,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,EE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zC.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:Lv,useDebugValue:im,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=Lv(!1),e=t[0];return t=BC.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=vn();if(Te){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ge===null)throw Error(U(349));bi&30||pE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ov(gE.bind(null,r,s,t),[t]),r.flags|=2048,wa(9,mE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vn(),e=Ge.identifierPrefix;if(Te){var n=Fn,r=Mn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HC={readContext:Gt,useCallback:bE,useContext:Gt,useEffect:rm,useImperativeHandle:TE,useInsertionEffect:_E,useLayoutEffect:wE,useMemo:SE,useReducer:rh,useRef:xE,useState:function(){return rh(_a)},useDebugValue:im,useDeferredValue:function(t){var e=Qt();return IE(e,ze.memoizedState,t)},useTransition:function(){var t=rh(_a)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:hE,useSyncExternalStore:fE,useId:AE,unstable_isNewReconciler:!1},qC={readContext:Gt,useCallback:bE,useContext:Gt,useEffect:rm,useImperativeHandle:TE,useInsertionEffect:_E,useLayoutEffect:wE,useMemo:SE,useReducer:ih,useRef:xE,useState:function(){return ih(_a)},useDebugValue:im,useDeferredValue:function(t){var e=Qt();return ze===null?e.memoizedState=t:IE(e,ze.memoizedState,t)},useTransition:function(){var t=ih(_a)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:hE,useSyncExternalStore:fE,useId:AE,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ff(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pc={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Rr(t),s=$n(r,i);s.payload=e,n!=null&&(s.callback=n),e=kr(t,s,i),e!==null&&(cn(e,t,i,r),ou(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Rr(t),s=$n(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=kr(t,s,i),e!==null&&(cn(e,t,i,r),ou(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Rr(t),i=$n(n,r);i.tag=2,e!=null&&(i.callback=e),e=kr(t,i,r),e!==null&&(cn(e,t,r,n),ou(e,t,r))}};function Mv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function NE(t,e,n){var r=!1,i=Ur,s=e.contextType;return typeof s=="object"&&s!==null?s=Gt(s):(i=Pt(e)?Ei:gt.current,r=e.contextTypes,s=(r=r!=null)?Cs(t,i):Ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Fv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pc.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gt(s):(s=Pt(e)?Ei:gt.current,i.context=Cs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ff(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pc.enqueueReplaceState(i,i.state,null),Bu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,e){try{var n="",r=e;do n+=_A(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KC=typeof WeakMap=="function"?WeakMap:Map;function RE(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qu||(qu=!0,Sf=r),mf(t,e)},n}function jE(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mf(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Uv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aP.bind(null,t,e,n),e.then(t,t))}function Bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var GC=rr.ReactCurrentOwner,At=!1;function wt(t,e,n,r){e.child=t===null?lE(e,null,n,r):ks(e,t.child,n,r)}function $v(t,e,n,r,i){n=n.render;var s=e.ref;return xs(e,i),r=tm(t,e,n,r,s,i),n=nm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xn(t,e,i)):(Te&&n&&$p(e),e.flags|=1,wt(t,e,r,i),e.child)}function Wv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DE(t,e,s,r,i)):(t=hu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return Xn(t,e,i)}return e.flags|=1,t=jr(s,r),t.ref=e.ref,t.return=e,e.child=t}function DE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fa(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Xn(t,e,i)}return gf(t,e,n,r,i)}function VE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(as,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(as,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ge(as,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ge(as,Rt),Rt|=r;return wt(t,e,i,n),e.child}function LE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,i){var s=Pt(n)?Ei:gt.current;return s=Cs(e,s),xs(e,i),n=tm(t,e,n,r,s,i),r=nm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xn(t,e,i)):(Te&&r&&$p(e),e.flags|=1,wt(t,e,n,i),e.child)}function Hv(t,e,n,r,i){if(Pt(n)){var s=!0;Lu(e)}else s=!1;if(xs(e,i),e.stateNode===null)uu(t,e),NE(e,n,r),pf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gt(c):(c=Pt(n)?Ei:gt.current,c=Cs(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Fv(e,o,r,c),mr=!1;var m=e.memoizedState;o.state=m,Bu(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Ct.current||mr?(typeof h=="function"&&(ff(e,n,h,r),l=e.memoizedState),(a=mr||Mv(e,n,a,r,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:on(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gt(l):(l=Pt(n)?Ei:gt.current,l=Cs(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Fv(e,o,r,l),mr=!1,m=e.memoizedState,o.state=m,Bu(e,r,o,i);var E=e.memoizedState;a!==p||m!==E||Ct.current||mr?(typeof y=="function"&&(ff(e,n,y,r),E=e.memoizedState),(c=mr||Mv(e,n,c,r,m,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return yf(t,e,n,r,s,i)}function yf(t,e,n,r,i,s){LE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&kv(e,n,!1),Xn(t,e,s);r=e.stateNode,GC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ks(e,t.child,null,s),e.child=ks(e,null,a,s)):wt(t,e,a,s),e.memoizedState=r.state,i&&kv(e,n,!0),e.child}function OE(t){var e=t.stateNode;e.pendingContext?Pv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pv(t,e.context,!1),Xp(t,e.containerInfo)}function qv(t,e,n,r,i){return Ps(),Hp(i),e.flags|=256,wt(t,e,n,r),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function xf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ME(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Se,i&1),t===null)return df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rc(o,r,0,null),t=xi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xf(n),e.memoizedState=vf,t):sm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=jr(a,s):(s=xi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=vf,r}return s=t.child,t=s.sibling,r=jr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sm(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Hp(r),ks(e,t.child,null,n),t=sm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sh(Error(U(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Rc({mode:"visible",children:r.children},i,0,null),s=xi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ks(e,t.child,null,o),e.child.memoizedState=xf(o),e.memoizedState=vf,s);if(!(e.mode&1))return Ul(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=sh(s,r,void 0),Ul(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=Ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yn(t,i),cn(r,t,i,-1))}return dm(),r=sh(Error(U(421))),Ul(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jt=Pr(i.nextSibling),Vt=e,Te=!0,ln=null,t!==null&&(Wt[Ht++]=Mn,Wt[Ht++]=Fn,Wt[Ht++]=Ti,Mn=t.id,Fn=t.overflow,Ti=e),e=sm(e,r.children),e.flags|=4096,e)}function Kv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hf(t.return,e,n)}function oh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kv(t,n,e);else if(t.tag===19)Kv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),oh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}oh(e,!0,n,null,s);break;case"together":oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YC(t,e,n){switch(e.tag){case 3:OE(e),Ps();break;case 5:dE(e);break;case 1:Pt(e.type)&&Lu(e);break;case 4:Xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ge(Fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?ME(t,e,n):(ge(Se,Se.current&1),t=Xn(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,VE(t,e,n)}return Xn(t,e,n)}var UE,_f,BE,zE;UE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_f=function(){};BE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pi(En.current);var s=null;switch(n){case"input":i=Bh(t,i),r=Bh(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=Wh(t,i),r=Wh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Du)}qh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(oa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(oa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zE=function(t,e,n,r){n!==r&&(e.flags|=4)};function bo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XC(t,e,n){var r=e.pendingProps;switch(Wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Pt(e.type)&&Vu(),lt(e),null;case 3:return r=e.stateNode,Ns(),we(Ct),we(gt),Zp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Cf(ln),ln=null))),_f(t,e),lt(e),null;case 5:Jp(e);var i=pi(va.current);if(n=e.type,t!==null&&e.stateNode!=null)BE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return lt(e),null}if(t=pi(En.current),Ml(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[ga]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<No.length;i++)xe(No[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":nv(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":iv(r,s),xe("invalid",r)}qh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),i=["children",""+a]):oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Pl(r),rv(r,s,!0);break;case"textarea":Pl(r),sv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Du)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[ga]=r,UE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<No.length;i++)xe(No[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":nv(t,r),i=Bh(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),xe("invalid",t);break;case"textarea":iv(t,r),i=Wh(t,r),xe("invalid",t);break;default:i=r}qh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&aa(t,l):typeof l=="number"&&aa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&Pp(t,s,l,o))}switch(n){case"input":Pl(t),rv(t,r,!1);break;case"textarea":Pl(t),sv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ms(t,!!r.multiple,s,!1):r.defaultValue!=null&&ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Du)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)zE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=pi(va.current),pi(En.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(s=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ol(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return lt(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&jt!==null&&e.mode&1&&!(e.flags&128))oE(),Ps(),e.flags|=98560,s=!1;else if(s=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[xn]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),s=!1}else ln!==null&&(Cf(ln),ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?$e===0&&($e=3):dm())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Ns(),_f(t,e),t===null&&pa(e.stateNode.containerInfo),lt(e),null;case 10:return Gp(e.type._context),lt(e),null;case 17:return Pt(e.type)&&Vu(),lt(e),null;case 19:if(we(Se),s=e.memoizedState,s===null)return lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)bo(s,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zu(t),o!==null){for(e.flags|=128,bo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>js&&(e.flags|=128,r=!0,bo(s,!1),e.lanes=4194304)}else{if(!r)if(t=zu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return lt(e),null}else 2*Le()-s.renderingStartTime>js&&n!==1073741824&&(e.flags|=128,r=!0,bo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return cm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function JC(t,e){switch(Wp(e),e.tag){case 1:return Pt(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ns(),we(Ct),we(gt),Zp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jp(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Ns(),null;case 10:return Gp(e.type._context),null;case 22:case 23:return cm(),null;case 24:return null;default:return null}}var Bl=!1,ht=!1,ZC=typeof WeakSet=="function"?WeakSet:Set,H=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function wf(t,e,n){try{n()}catch(r){je(t,e,r)}}var Gv=!1;function eP(t,e){if(rf=Nu,t=Kw(),zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},Nu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var I=E.memoizedProps,C=E.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?I:on(e.type,I),C);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){je(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return E=Gv,Gv=!1,E}function Go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wf(e,n,s)}i=i.next}while(i!==r)}}function kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $E(t){var e=t.alternate;e!==null&&(t.alternate=null,$E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[ga],delete e[lf],delete e[LC],delete e[OC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WE(t){return t.tag===5||t.tag===3||t.tag===4}function Qv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Du));else if(r!==4&&(t=t.child,t!==null))for(Tf(t,e,n),t=t.sibling;t!==null;)Tf(t,e,n),t=t.sibling}function bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}var Ye=null,an=!1;function cr(t,e,n){for(n=n.child;n!==null;)HE(t,e,n),n=n.sibling}function HE(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:ht||os(n,e);case 6:var r=Ye,i=an;Ye=null,cr(t,e,n),Ye=r,an=i,Ye!==null&&(an?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(an?(t=Ye,n=n.stateNode,t.nodeType===8?Zd(t.parentNode,n):t.nodeType===1&&Zd(t,n),da(t)):Zd(Ye,n.stateNode));break;case 4:r=Ye,i=an,Ye=n.stateNode.containerInfo,an=!0,cr(t,e,n),Ye=r,an=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wf(n,e,o),i=i.next}while(i!==r)}cr(t,e,n);break;case 1:if(!ht&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,cr(t,e,n),ht=r):cr(t,e,n);break;default:cr(t,e,n)}}function Yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZC),e.forEach(function(r){var i=uP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,an=!1;break e;case 3:Ye=a.stateNode.containerInfo,an=!0;break e;case 4:Ye=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(Ye===null)throw Error(U(160));HE(s,o,i),Ye=null,an=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qE(e,t),e=e.sibling}function qE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),yn(t),r&4){try{Go(3,t,t.return),kc(3,t)}catch(I){je(t,t.return,I)}try{Go(5,t,t.return)}catch(I){je(t,t.return,I)}}break;case 1:en(e,t),yn(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(en(e,t),yn(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var i=t.stateNode;try{aa(i,"")}catch(I){je(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pw(i,s),Kh(a,o);var c=Kh(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?xw(i,p):h==="dangerouslySetInnerHTML"?yw(i,p):h==="children"?aa(i,p):Pp(i,h,p,c)}switch(a){case"input":zh(i,s);break;case"textarea":mw(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?ms(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?ms(i,!!s.multiple,s.defaultValue,!0):ms(i,!!s.multiple,s.multiple?[]:"",!1))}i[ga]=s}catch(I){je(t,t.return,I)}}break;case 6:if(en(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){je(t,t.return,I)}}break;case 3:if(en(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(I){je(t,t.return,I)}break;case 4:en(e,t),yn(t);break;case 13:en(e,t),yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lm=Le())),r&4&&Yv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(c=ht)||h,en(e,t),ht=c):en(e,t),yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(p=H=h;H!==null;){switch(m=H,y=m.child,m.tag){case 0:case 11:case 14:case 15:Go(4,m,m.return);break;case 1:os(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(I){je(r,n,I)}}break;case 5:os(m,m.return);break;case 22:if(m.memoizedState!==null){Jv(p);continue}}y!==null?(y.return=m,H=y):Jv(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vw("display",o))}catch(I){je(t,t.return,I)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(I){je(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:en(e,t),yn(t),r&4&&Yv(t);break;case 21:break;default:en(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WE(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aa(i,""),r.flags&=-33);var s=Qv(t);bf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qv(t);Tf(t,a,o);break;default:throw Error(U(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tP(t,e,n){H=t,KE(t)}function KE(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ht;a=Bl;var c=ht;if(Bl=o,(ht=l)&&!c)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Zv(i):l!==null?(l.return=o,H=l):Zv(i);for(;s!==null;)H=s,KE(s),s=s.sibling;H=i,Bl=a,ht=c}Xv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Xv(t)}}function Xv(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||kc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&da(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ht||e.flags&512&&Ef(e)}catch(m){je(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Jv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Zv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kc(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){je(e,i,l)}}var s=e.return;try{Ef(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{Ef(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var nP=Math.ceil,Hu=rr.ReactCurrentDispatcher,om=rr.ReactCurrentOwner,Kt=rr.ReactCurrentBatchConfig,le=0,Ge=null,Me=null,et=0,Rt=0,as=Gr(0),$e=0,Ea=null,Si=0,Nc=0,am=0,Qo=null,St=null,lm=0,js=1/0,Ln=null,qu=!1,Sf=null,Nr=null,zl=!1,Tr=null,Ku=0,Yo=0,If=null,cu=-1,du=0;function Et(){return le&6?Le():cu!==-1?cu:cu=Le()}function Rr(t){return t.mode&1?le&2&&et!==0?et&-et:FC.transition!==null?(du===0&&(du=Nw()),du):(t=he,t!==0||(t=window.event,t=t===void 0?16:Mw(t.type)),t):1}function cn(t,e,n,r){if(50<Yo)throw Yo=0,If=null,Error(U(185));$a(t,n,r),(!(le&2)||t!==Ge)&&(t===Ge&&(!(le&2)&&(Nc|=n),$e===4&&yr(t,et)),kt(t,r),n===1&&le===0&&!(e.mode&1)&&(js=Le()+500,Ac&&Qr()))}function kt(t,e){var n=t.callbackNode;FA(t,e);var r=ku(t,t===Ge?et:0);if(r===0)n!==null&&lv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lv(n),e===1)t.tag===0?MC(e0.bind(null,t)):rE(e0.bind(null,t)),DC(function(){!(le&6)&&Qr()}),n=null;else{switch(Rw(r)){case 1:n=Dp;break;case 4:n=Pw;break;case 16:n=Pu;break;case 536870912:n=kw;break;default:n=Pu}n=tT(n,GE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GE(t,e){if(cu=-1,du=0,le&6)throw Error(U(327));var n=t.callbackNode;if(_s()&&t.callbackNode!==n)return null;var r=ku(t,t===Ge?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gu(t,r);else{e=r;var i=le;le|=2;var s=YE();(Ge!==t||et!==e)&&(Ln=null,js=Le()+500,vi(t,e));do try{sP();break}catch(a){QE(t,a)}while(!0);Kp(),Hu.current=s,le=i,Me!==null?e=0:(Ge=null,et=0,e=$e)}if(e!==0){if(e===2&&(i=Jh(t),i!==0&&(r=i,e=Af(t,i))),e===1)throw n=Ea,vi(t,0),yr(t,r),kt(t,Le()),n;if(e===6)yr(t,r);else{if(i=t.current.alternate,!(r&30)&&!rP(i)&&(e=Gu(t,r),e===2&&(s=Jh(t),s!==0&&(r=s,e=Af(t,s))),e===1))throw n=Ea,vi(t,0),yr(t,r),kt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:li(t,St,Ln);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=lm+500-Le(),10<e)){if(ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=af(li.bind(null,t,St,Ln),e);break}li(t,St,Ln);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-un(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nP(r/1960))-r,10<r){t.timeoutHandle=af(li.bind(null,t,St,Ln),r);break}li(t,St,Ln);break;case 5:li(t,St,Ln);break;default:throw Error(U(329))}}}return kt(t,Le()),t.callbackNode===n?GE.bind(null,t):null}function Af(t,e){var n=Qo;return t.current.memoizedState.isDehydrated&&(vi(t,e).flags|=256),t=Gu(t,e),t!==2&&(e=St,St=n,e!==null&&Cf(e)),t}function Cf(t){St===null?St=t:St.push.apply(St,t)}function rP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~am,e&=~Nc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function e0(t){if(le&6)throw Error(U(327));_s();var e=ku(t,0);if(!(e&1))return kt(t,Le()),null;var n=Gu(t,e);if(t.tag!==0&&n===2){var r=Jh(t);r!==0&&(e=r,n=Af(t,r))}if(n===1)throw n=Ea,vi(t,0),yr(t,e),kt(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,St,Ln),kt(t,Le()),null}function um(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(js=Le()+500,Ac&&Qr())}}function Ii(t){Tr!==null&&Tr.tag===0&&!(le&6)&&_s();var e=le;le|=1;var n=Kt.transition,r=he;try{if(Kt.transition=null,he=1,t)return t()}finally{he=r,Kt.transition=n,le=e,!(le&6)&&Qr()}}function cm(){Rt=as.current,we(as)}function vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jC(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:Ns(),we(Ct),we(gt),Zp();break;case 5:Jp(r);break;case 4:Ns();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Gp(r.type._context);break;case 22:case 23:cm()}n=n.return}if(Ge=t,Me=t=jr(t.current,null),et=Rt=e,$e=0,Ea=null,am=Nc=Si=0,St=Qo=null,fi!==null){for(e=0;e<fi.length;e++)if(n=fi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fi=null}return t}function QE(t,e){do{var n=Me;try{if(Kp(),au.current=Wu,$u){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$u=!1}if(bi=0,Ke=ze=Ae=null,Ko=!1,xa=0,om.current=null,n===null||n.return===null){$e=1,Ea=e,Me=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Bv(o);if(y!==null){y.flags&=-257,zv(y,o,a,s,e),y.mode&1&&Uv(s,c,e),e=y,l=c;var E=e.updateQueue;if(E===null){var I=new Set;I.add(l),e.updateQueue=I}else E.add(l);break e}else{if(!(e&1)){Uv(s,c,e),dm();break e}l=Error(U(426))}}else if(Te&&a.mode&1){var C=Bv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),zv(C,o,a,s,e),Hp(Rs(l,a));break e}}s=l=Rs(l,a),$e!==4&&($e=2),Qo===null?Qo=[s]:Qo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=RE(s,l,e);Dv(s,_);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Nr===null||!Nr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=jE(s,a,e);Dv(s,A);break e}}s=s.return}while(s!==null)}JE(n)}catch(j){e=j,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function YE(){var t=Hu.current;return Hu.current=Wu,t===null?Wu:t}function dm(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Si&268435455)&&!(Nc&268435455)||yr(Ge,et)}function Gu(t,e){var n=le;le|=2;var r=YE();(Ge!==t||et!==e)&&(Ln=null,vi(t,e));do try{iP();break}catch(i){QE(t,i)}while(!0);if(Kp(),le=n,Hu.current=r,Me!==null)throw Error(U(261));return Ge=null,et=0,$e}function iP(){for(;Me!==null;)XE(Me)}function sP(){for(;Me!==null&&!kA();)XE(Me)}function XE(t){var e=eT(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?JE(t):Me=e,om.current=null}function JE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JC(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=XC(n,e,Rt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function li(t,e,n){var r=he,i=Kt.transition;try{Kt.transition=null,he=1,oP(t,e,n,r)}finally{Kt.transition=i,he=r}return null}function oP(t,e,n,r){do _s();while(Tr!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UA(t,s),t===Ge&&(Me=Ge=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,tT(Pu,function(){return _s(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kt.transition,Kt.transition=null;var o=he;he=1;var a=le;le|=4,om.current=null,eP(t,n),qE(n,t),IC(sf),Nu=!!rf,sf=rf=null,t.current=n,tP(n),NA(),le=a,he=o,Kt.transition=s}else t.current=n;if(zl&&(zl=!1,Tr=t,Ku=i),s=t.pendingLanes,s===0&&(Nr=null),DA(n.stateNode),kt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qu)throw qu=!1,t=Sf,Sf=null,t;return Ku&1&&t.tag!==0&&_s(),s=t.pendingLanes,s&1?t===If?Yo++:(Yo=0,If=t):Yo=0,Qr(),null}function _s(){if(Tr!==null){var t=Rw(Ku),e=Kt.transition,n=he;try{if(Kt.transition=null,he=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,Ku=0,le&6)throw Error(U(331));var i=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Go(8,h,s)}var p=h.child;if(p!==null)p.return=h,H=p;else for(;H!==null;){h=H;var m=h.sibling,y=h.return;if($E(h),h===c){H=null;break}if(m!==null){m.return=y,H=m;break}H=y}}}var E=s.alternate;if(E!==null){var I=E.child;if(I!==null){E.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(I!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Go(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,H=_;break e}H=s.return}}var x=t.current;for(H=x;H!==null;){o=H;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,H=b;else e:for(o=x;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kc(9,a)}}catch(j){je(a,a.return,j)}if(a===o){H=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,H=A;break e}H=a.return}}if(le=i,Qr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Ec,t)}catch{}r=!0}return r}finally{he=n,Kt.transition=e}}return!1}function t0(t,e,n){e=Rs(n,e),e=RE(t,e,1),t=kr(t,e,1),e=Et(),t!==null&&($a(t,1,e),kt(t,e))}function je(t,e,n){if(t.tag===3)t0(t,t,n);else for(;e!==null;){if(e.tag===3){t0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=Rs(n,t),t=jE(e,t,1),e=kr(e,t,1),t=Et(),e!==null&&($a(e,1,t),kt(e,t));break}}e=e.return}}function aP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(et&n)===n&&($e===4||$e===3&&(et&130023424)===et&&500>Le()-lm?vi(t,0):am|=n),kt(t,e)}function ZE(t,e){e===0&&(t.mode&1?(e=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):e=1);var n=Et();t=Yn(t,e),t!==null&&($a(t,e,n),kt(t,n))}function lP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZE(t,n)}function uP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),ZE(t,n)}var eT;eT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,YC(t,e,n);At=!!(t.flags&131072)}else At=!1,Te&&e.flags&1048576&&iE(e,Mu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uu(t,e),t=e.pendingProps;var i=Cs(e,gt.current);xs(e,n),i=tm(null,e,r,t,i,n);var s=nm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(s=!0,Lu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yp(e),i.updater=Pc,e.stateNode=i,i._reactInternals=e,pf(e,r,t,n),e=yf(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&$p(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dP(r),t=on(r,t),i){case 0:e=gf(null,e,r,t,n);break e;case 1:e=Hv(null,e,r,t,n);break e;case 11:e=$v(null,e,r,t,n);break e;case 14:e=Wv(null,e,r,on(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),gf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Hv(t,e,r,i,n);case 3:e:{if(OE(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cE(t,e),Bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Rs(Error(U(423)),e),e=qv(t,e,r,n,i);break e}else if(r!==i){i=Rs(Error(U(424)),e),e=qv(t,e,r,n,i);break e}else for(jt=Pr(e.stateNode.containerInfo.firstChild),Vt=e,Te=!0,ln=null,n=lE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===i){e=Xn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return dE(e),t===null&&df(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,of(r,i)?o=null:s!==null&&of(r,s)&&(e.flags|=32),LE(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&df(e),null;case 13:return ME(t,e,n);case 4:return Xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ks(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),$v(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ge(Fu,r._currentValue),r._currentValue=o,s!==null)if(hn(s.value,o)){if(s.children===i.children&&!Ct.current){e=Xn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$n(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xs(e,n),i=Gt(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=on(r,e.pendingProps),i=on(r.type,i),Wv(t,e,r,i,n);case 15:return DE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),uu(t,e),e.tag=1,Pt(r)?(t=!0,Lu(e)):t=!1,xs(e,n),NE(e,r,i),pf(e,r,i,n),yf(null,e,r,!0,t,n);case 19:return FE(t,e,n);case 22:return VE(t,e,n)}throw Error(U(156,e.tag))};function tT(t,e){return Cw(t,e)}function cP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new cP(t,e,n,r)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dP(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Np)return 11;if(t===Rp)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xi:return xi(n.children,i,s,e);case kp:o=8,i|=8;break;case Oh:return t=qt(12,n,e,i|2),t.elementType=Oh,t.lanes=s,t;case Mh:return t=qt(13,n,e,i),t.elementType=Mh,t.lanes=s,t;case Fh:return t=qt(19,n,e,i),t.elementType=Fh,t.lanes=s,t;case dw:return Rc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uw:o=10;break e;case cw:o=9;break e;case Np:o=11;break e;case Rp:o=14;break e;case pr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=qt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xi(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=qt(22,t,r,e),t.elementType=dw,t.lanes=n,t.stateNode={isHidden:!1},t}function ah(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function lh(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fm(t,e,n,r,i,s,o,a,l){return t=new hP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yp(s),t}function fP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nT(t){if(!t)return Ur;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Pt(n))return nE(t,n,e)}return e}function rT(t,e,n,r,i,s,o,a,l){return t=fm(n,r,!0,t,i,s,o,a,l),t.context=nT(null),n=t.current,r=Et(),i=Rr(n),s=$n(r,i),s.callback=e??null,kr(n,s,i),t.current.lanes=i,$a(t,i,r),kt(t,r),t}function jc(t,e,n,r){var i=e.current,s=Et(),o=Rr(i);return n=nT(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(i,e,o),t!==null&&(cn(t,i,o,s),ou(t,i,o)),o}function Qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function n0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pm(t,e){n0(t,e),(t=t.alternate)&&n0(t,e)}function pP(){return null}var iT=typeof reportError=="function"?reportError:function(t){console.error(t)};function mm(t){this._internalRoot=t}Dc.prototype.render=mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));jc(t,e,null,null)};Dc.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){jc(null,t,null,null)}),e[Qn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&Ow(t)}};function gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r0(){}function mP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Qu(o);s.call(c)}}var o=rT(e,r,t,0,null,!1,!1,"",r0);return t._reactRootContainer=o,t[Qn]=o.current,pa(t.nodeType===8?t.parentNode:t),Ii(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Qu(l);a.call(c)}}var l=fm(t,0,!1,null,null,!1,!1,"",r0);return t._reactRootContainer=l,t[Qn]=l.current,pa(t.nodeType===8?t.parentNode:t),Ii(function(){jc(e,l,n,r)}),l}function Lc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qu(o);a.call(l)}}jc(e,o,t,i)}else o=mP(n,e,t,i,r);return Qu(o)}jw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(Vp(e,n|1),kt(e,Le()),!(le&6)&&(js=Le()+500,Qr()))}break;case 13:Ii(function(){var r=Yn(t,1);if(r!==null){var i=Et();cn(r,t,1,i)}}),pm(t,1)}};Lp=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var n=Et();cn(e,t,134217728,n)}pm(t,134217728)}};Dw=function(t){if(t.tag===13){var e=Rr(t),n=Yn(t,e);if(n!==null){var r=Et();cn(n,t,e,r)}pm(t,e)}};Vw=function(){return he};Lw=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Qh=function(t,e,n){switch(e){case"input":if(zh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ic(r);if(!i)throw Error(U(90));fw(r),zh(r,i)}}}break;case"textarea":mw(t,n);break;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}};Ew=um;Tw=Ii;var gP={usingClientEntryPoint:!1,Events:[Ha,ts,Ic,_w,ww,um]},So={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yP={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iw(t),t===null?null:t.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||pP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Ec=$l.inject(yP),wn=$l}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gm(e))throw Error(U(200));return fP(t,e,null,n)};Ut.createRoot=function(t,e){if(!gm(t))throw Error(U(299));var n=!1,r="",i=iT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fm(t,1,!1,null,null,n,!1,r,i),t[Qn]=e.current,pa(t.nodeType===8?t.parentNode:t),new mm(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Iw(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return Ii(t)};Ut.hydrate=function(t,e,n){if(!Vc(e))throw Error(U(200));return Lc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!gm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=iT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rT(e,null,t,1,n??null,i,!1,s,o),t[Qn]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Dc(e)};Ut.render=function(t,e,n){if(!Vc(e))throw Error(U(200));return Lc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Vc(t))throw Error(U(40));return t._reactRootContainer?(Ii(function(){Lc(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Ut.unstable_batchedUpdates=um;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Lc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function sT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sT)}catch(t){console.error(t)}}sT(),sw.exports=Ut;var oT=sw.exports,aT,i0=oT;aT=i0.createRoot,i0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const s0="popstate";function vP(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Vi(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Pf("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Yu(s))}function r(i,s){ym(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return _P(e,n,r,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ym(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xP(){return Math.random().toString(36).substr(2,8)}function o0(t,e){return{usr:t.state,key:t.key,idx:e}}function Pf(t,e,n,r){return n===void 0&&(n=null),Ta({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vi(e):e,{state:n,key:e&&e.key||r||xP()})}function Yu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _P(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=br.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ta({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=br.Pop;let C=h(),_=C==null?null:C-c;c=C,l&&l({action:a,location:I.location,delta:_})}function m(C,_){a=br.Push;let x=Pf(I.location,C,_);n&&n(x,C),c=h()+1;let b=o0(x,c),A=I.createHref(x);try{o.pushState(b,"",A)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(A)}s&&l&&l({action:a,location:I.location,delta:1})}function y(C,_){a=br.Replace;let x=Pf(I.location,C,_);n&&n(x,C),c=h();let b=o0(x,c),A=I.createHref(x);o.replaceState(b,"",A),s&&l&&l({action:a,location:I.location,delta:0})}function E(C){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof C=="string"?C:Yu(C);return x=x.replace(/ $/,"%20"),Ce(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let I={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(s0,p),l=C,()=>{i.removeEventListener(s0,p),l=null}},createHref(C){return e(i,C)},createURL:E,encodeLocation(C){let _=E(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(C){return o.go(C)}};return I}var a0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(a0||(a0={}));function wP(t,e,n){return n===void 0&&(n="/"),EP(t,e,n)}function EP(t,e,n,r){let i=typeof e=="string"?Vi(e):e,s=Ds(i.pathname||"/",n);if(s==null)return null;let o=lT(t);TP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=DP(s);a=RP(o[l],c)}return a}function lT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ce(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Dr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ce(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of uT(s.path))i(s,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function TP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bP=/^:[\w-]+$/,SP=3,IP=2,AP=1,CP=10,PP=-2,l0=t=>t==="*";function kP(t,e){let n=t.split("/"),r=n.length;return n.some(l0)&&(r+=PP),e&&(r+=IP),n.filter(i=>!l0(i)).reduce((i,s)=>i+(bP.test(s)?SP:s===""?AP:CP),r)}function NP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function RP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=kf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Dr([s,p.pathname]),pathnameBase:MP(Dr([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Dr([s,p.pathnameBase]))}return o}function kf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let I=a[p]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const E=a[p];return y&&!E?c[m]=void 0:c[m]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function jP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ym(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ym(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ds(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function VP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Vi(t):t;return{pathname:n?n.startsWith("/")?n:LP(n,e):e,search:FP(r),hash:UP(i)}}function LP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function uh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vm(t,e){let n=OP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xm(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Vi(t):(i=Ta({},t),Ce(!i.pathname||!i.pathname.includes("?"),uh("?","pathname","search",i)),Ce(!i.pathname||!i.pathname.includes("#"),uh("#","pathname","hash",i)),Ce(!i.search||!i.search.includes("#"),uh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=VP(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Dr=t=>t.join("/").replace(/\/\/+/g,"/"),MP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cT=["post","put","patch","delete"];new Set(cT);const zP=["get",...cT];new Set(zP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ba.apply(this,arguments)}const Oc=R.createContext(null),dT=R.createContext(null),ir=R.createContext(null),Mc=R.createContext(null),Yr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=R.createContext(null);function $P(t,e){let{relative:n}=e===void 0?{}:e;Qs()||Ce(!1);let{basename:r,navigator:i}=R.useContext(ir),{hash:s,pathname:o,search:a}=Fc(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Dr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Qs(){return R.useContext(Mc)!=null}function Li(){return Qs()||Ce(!1),R.useContext(Mc).location}function fT(t){R.useContext(ir).static||R.useLayoutEffect(t)}function Ka(){let{isDataRoute:t}=R.useContext(Yr);return t?n2():WP()}function WP(){Qs()||Ce(!1);let t=R.useContext(Oc),{basename:e,future:n,navigator:r}=R.useContext(ir),{matches:i}=R.useContext(Yr),{pathname:s}=Li(),o=JSON.stringify(vm(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return fT(()=>{a.current=!0}),R.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=xm(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Dr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,s,t])}function Fc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(ir),{matches:i}=R.useContext(Yr),{pathname:s}=Li(),o=JSON.stringify(vm(i,r.v7_relativeSplatPath));return R.useMemo(()=>xm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function HP(t,e){return qP(t,e)}function qP(t,e,n,r){Qs()||Ce(!1);let{navigator:i}=R.useContext(ir),{matches:s}=R.useContext(Yr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Li(),h;if(e){var p;let C=typeof e=="string"?Vi(e):e;l==="/"||(p=C.pathname)!=null&&p.startsWith(l)||Ce(!1),h=C}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let C=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=wP(t,{pathname:y}),I=XP(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Dr([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:Dr([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&I?R.createElement(Mc.Provider,{value:{location:ba({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:br.Pop}},I):I}function KP(){let t=t2(),e=BP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const GP=R.createElement(KP,null);class QP extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Yr.Provider,{value:this.props.routeContext},R.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YP(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(Oc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Yr.Provider,{value:e},r)}function XP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||Ce(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:m,errors:y}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let y,E=!1,I=null,C=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,I=p.route.errorElement||GP,l&&(c<0&&m===0?(r2("route-fallback"),E=!0,C=null):c===m&&(E=!0,C=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),x=()=>{let b;return y?b=I:E?b=C:p.route.Component?b=R.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=h,R.createElement(YP,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?R.createElement(QP,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var pT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pT||{}),mT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mT||{});function JP(t){let e=R.useContext(Oc);return e||Ce(!1),e}function ZP(t){let e=R.useContext(dT);return e||Ce(!1),e}function e2(t){let e=R.useContext(Yr);return e||Ce(!1),e}function gT(t){let e=e2(),n=e.matches[e.matches.length-1];return n.route.id||Ce(!1),n.route.id}function t2(){var t;let e=R.useContext(hT),n=ZP(),r=gT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function n2(){let{router:t}=JP(pT.UseNavigateStable),e=gT(mT.UseNavigateStable),n=R.useRef(!1);return fT(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ba({fromRouteId:e},s)))},[t,e])}const u0={};function r2(t,e,n){u0[t]||(u0[t]=!0)}function i2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function s2(t){let{to:e,replace:n,state:r,relative:i}=t;Qs()||Ce(!1);let{future:s,static:o}=R.useContext(ir),{matches:a}=R.useContext(Yr),{pathname:l}=Li(),c=Ka(),h=xm(e,vm(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(h);return R.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function nn(t){Ce(!1)}function o2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=br.Pop,navigator:s,static:o=!1,future:a}=t;Qs()&&Ce(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:s,static:o,future:ba({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Vi(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:E="default"}=r,I=R.useMemo(()=>{let C=Ds(h,l);return C==null?null:{location:{pathname:C,search:p,hash:m,state:y,key:E},navigationType:i}},[l,h,p,m,y,E,i]);return I==null?null:R.createElement(ir.Provider,{value:c},R.createElement(Mc.Provider,{children:n,value:I}))}function a2(t){let{children:e,location:n}=t;return HP(Nf(e),n)}new Promise(()=>{});function Nf(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,Nf(r.props.children,s));return}r.type!==nn&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}function yT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u2(t,e){return t.button===0&&(!e||e==="_self")&&!l2(t)}const c2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h2="6";try{window.__reactRouterVersion=h2}catch{}const f2=R.createContext({isTransitioning:!1}),p2="startTransition",c0=aA[p2];function m2(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=vP({window:i,v5Compat:!0}));let o=s.current,[a,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=R.useCallback(p=>{c&&c0?c0(()=>l(p)):l(p)},[l,c]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>i2(r),[r]),R.createElement(o2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const g2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ws=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:p}=e,m=yT(e,c2),{basename:y}=R.useContext(ir),E,I=!1;if(typeof c=="string"&&y2.test(c)&&(E=c,g2))try{let b=new URL(window.location.href),A=c.startsWith("//")?new URL(b.protocol+c):new URL(c),j=Ds(A.pathname,y);A.origin===b.origin&&j!=null?c=j+A.search+A.hash:I=!0}catch{}let C=$P(c,{relative:i}),_=x2(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:p});function x(b){r&&r(b),b.defaultPrevented||_(b)}return R.createElement("a",Xu({},m,{href:E||C,onClick:I||s?r:x,ref:n,target:l}))}),d0=R.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,p=yT(e,d2),m=Fc(l,{relative:p.relative}),y=Li(),E=R.useContext(dT),{navigator:I,basename:C}=R.useContext(ir),_=E!=null&&_2(m)&&c===!0,x=I.encodeLocation?I.encodeLocation(m).pathname:m.pathname,b=y.pathname,A=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(b=b.toLowerCase(),A=A?A.toLowerCase():null,x=x.toLowerCase()),A&&C&&(A=Ds(A,C)||A);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=b===x||!o&&b.startsWith(x)&&b.charAt(j)==="/",T=A!=null&&(A===x||!o&&A.startsWith(x)&&A.charAt(x.length)==="/"),v={isActive:D,isPending:T,isTransitioning:_},S=D?r:void 0,P;typeof s=="function"?P=s(v):P=[s,D?"active":null,T?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(v):a;return R.createElement(ws,Xu({},p,{"aria-current":S,className:P,ref:n,style:N,to:l,viewTransition:c}),typeof h=="function"?h(v):h)});var Rf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rf||(Rf={}));var h0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h0||(h0={}));function v2(t){let e=R.useContext(Oc);return e||Ce(!1),e}function x2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ka(),c=Li(),h=Fc(t,{relative:o});return R.useCallback(p=>{if(u2(p,n)){p.preventDefault();let m=r!==void 0?r:Yu(c)===Yu(h);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function _2(t,e){e===void 0&&(e={});let n=R.useContext(f2);n==null&&Ce(!1);let{basename:r}=v2(Rf.useViewTransitionState),i=Fc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ds(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ds(n.nextLocation.pathname,r)||n.nextLocation.pathname;return kf(i.pathname,o)!=null||kf(i.pathname,s)!=null}var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new E2;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const E=c<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T2=function(t){const e=vT(t);return xT.encodeByteArray(e,!0)},Ju=function(t){return T2(t).replace(/\./g,"")},_T=function(t){try{return xT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=()=>b2().__FIREBASE_DEFAULTS__,I2=()=>{if(typeof process>"u"||typeof f0>"u")return;const t=f0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_T(t[1]);return e&&JSON.parse(e)},Uc=()=>{try{return S2()||I2()||A2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wT=t=>{var e,n;return(n=(e=Uc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},C2=t=>{const e=wT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ET=()=>{var t;return(t=Uc())===null||t===void 0?void 0:t.config},TT=t=>{var e;return(e=Uc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ju(JSON.stringify(n)),Ju(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function R2(){var t;const e=(t=Uc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L2(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O2(){return!R2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M2(){try{return typeof indexedDB=="object"}catch{return!1}}function F2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=U2,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?B2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sr(i,a,r)}}function B2(t,e){return t.replace(z2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const z2=/\{\$([^}]+)}/g;function $2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(p0(s)&&p0(o)){if(!Zu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function p0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function W2(t,e){const n=new H2(t,e);return n.subscribe.bind(n)}class H2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ch),i.error===void 0&&(i.error=ch),i.complete===void 0&&(i.complete=ch);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ch(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new P2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q2(e))try{this.getOrInitializeService({instanceIdentifier:ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ui){return this.instances.has(e)}getOptions(e=ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:G2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ui){return this.component?this.component.multipleInstances?e:ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G2(t){return t===ui?void 0:t}function Q2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new K2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const X2={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},J2=oe.INFO,Z2={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},ek=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Z2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=J2,this._logHandler=ek,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const tk=(t,e)=>e.some(n=>t instanceof n);let m0,g0;function nk(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rk(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bT=new WeakMap,jf=new WeakMap,ST=new WeakMap,dh=new WeakMap,wm=new WeakMap;function ik(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bT.set(n,t)}).catch(()=>{}),wm.set(e,t),e}function sk(t){if(jf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jf.set(t,e)}let Df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ST.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ok(t){Df=t(Df)}function ak(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hh(this),e,...n);return ST.set(r,e.sort?e.sort():[e]),Vr(r)}:rk().includes(t)?function(...e){return t.apply(hh(this),e),Vr(bT.get(this))}:function(...e){return Vr(t.apply(hh(this),e))}}function lk(t){return typeof t=="function"?ak(t):(t instanceof IDBTransaction&&sk(t),tk(t,nk())?new Proxy(t,Df):t)}function Vr(t){if(t instanceof IDBRequest)return ik(t);if(dh.has(t))return dh.get(t);const e=lk(t);return e!==t&&(dh.set(t,e),wm.set(e,t)),e}const hh=t=>wm.get(t);function uk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Vr(o.result),l.oldVersion,l.newVersion,Vr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ck=["get","getKey","getAll","getAllKeys","count"],dk=["put","add","delete","clear"],fh=new Map;function y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ck.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return fh.set(e,s),s}ok(t=>({...t,get:(e,n,r)=>y0(e,n)||t.get(e,n,r),has:(e,n)=>!!y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vf="@firebase/app",v0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new _m("@firebase/app"),pk="@firebase/app-compat",mk="@firebase/analytics-compat",gk="@firebase/analytics",yk="@firebase/app-check-compat",vk="@firebase/app-check",xk="@firebase/auth",_k="@firebase/auth-compat",wk="@firebase/database",Ek="@firebase/data-connect",Tk="@firebase/database-compat",bk="@firebase/functions",Sk="@firebase/functions-compat",Ik="@firebase/installations",Ak="@firebase/installations-compat",Ck="@firebase/messaging",Pk="@firebase/messaging-compat",kk="@firebase/performance",Nk="@firebase/performance-compat",Rk="@firebase/remote-config",jk="@firebase/remote-config-compat",Dk="@firebase/storage",Vk="@firebase/storage-compat",Lk="@firebase/firestore",Ok="@firebase/vertexai-preview",Mk="@firebase/firestore-compat",Fk="firebase",Uk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="[DEFAULT]",Bk={[Vf]:"fire-core",[pk]:"fire-core-compat",[gk]:"fire-analytics",[mk]:"fire-analytics-compat",[vk]:"fire-app-check",[yk]:"fire-app-check-compat",[xk]:"fire-auth",[_k]:"fire-auth-compat",[wk]:"fire-rtdb",[Ek]:"fire-data-connect",[Tk]:"fire-rtdb-compat",[bk]:"fire-fn",[Sk]:"fire-fn-compat",[Ik]:"fire-iid",[Ak]:"fire-iid-compat",[Ck]:"fire-fcm",[Pk]:"fire-fcm-compat",[kk]:"fire-perf",[Nk]:"fire-perf-compat",[Rk]:"fire-rc",[jk]:"fire-rc-compat",[Dk]:"fire-gcs",[Vk]:"fire-gcs-compat",[Lk]:"fire-fst",[Mk]:"fire-fst-compat",[Ok]:"fire-vertex","fire-js":"fire-js",[Fk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,zk=new Map,Of=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vs(t){const e=t.name;if(Of.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of ec.values())x0(n,t);for(const n of zk.values())x0(n,t);return!0}function Em(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Ga("app","Firebase",$k);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=Uk;function IT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=ET()),!n)throw Lr.create("no-options");const s=ec.get(i);if(s){if(Zu(n,s.options)&&Zu(r,s.config))return s;throw Lr.create("duplicate-app",{appName:i})}const o=new Y2(i);for(const l of Of.values())o.addComponent(l);const a=new Wk(n,r,o);return ec.set(i,a),a}function AT(t=Lf){const e=ec.get(t);if(!e&&t===Lf&&ET())return IT();if(!e)throw Lr.create("no-app",{appName:t});return e}function Or(t,e,n){var r;let i=(r=Bk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}Vs(new Ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="firebase-heartbeat-database",qk=1,Sa="firebase-heartbeat-store";let ph=null;function CT(){return ph||(ph=uk(Hk,qk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),ph}async function Kk(t){try{const n=(await CT()).transaction(Sa),r=await n.objectStore(Sa).get(PT(t));return await n.done,r}catch(e){if(e instanceof sr)Jn.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jn.warn(n.message)}}}async function _0(t,e){try{const r=(await CT()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,PT(t)),await r.done}catch(n){if(n instanceof sr)Jn.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jn.warn(r.message)}}}function PT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=1024,Qk=30*24*60*60*1e3;class Yk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=w0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Qk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=w0(),{heartbeatsToSend:r,unsentEntries:i}=Xk(this._heartbeatsCache.heartbeats),s=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jn.warn(n),""}}}function w0(){return new Date().toISOString().substring(0,10)}function Xk(t,e=Gk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),E0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Jk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M2()?F2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E0(t){return Ju(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){Vs(new Ai("platform-logger",e=>new hk(e),"PRIVATE")),Vs(new Ai("heartbeat",e=>new Yk(e),"PRIVATE")),Or(Vf,v0,t),Or(Vf,v0,"esm2017"),Or("fire-js","")}Zk("");var eN="firebase",tN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(eN,tN,"app");function Tm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nN=kT,NT=new Ga("auth","Firebase",kT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new _m("@firebase/auth");function rN(t,...e){tc.logLevel<=oe.WARN&&tc.warn(`Auth (${Ys}): ${t}`,...e)}function fu(t,...e){tc.logLevel<=oe.ERROR&&tc.error(`Auth (${Ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw bm(t,...e)}function Tn(t,...e){return bm(t,...e)}function RT(t,e,n){const r=Object.assign(Object.assign({},nN()),{[e]:n});return new Ga("auth","Firebase",r).create(e,{appName:t.name})}function Wn(t){return RT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NT.create(t,...e)}function Y(t,e,...n){if(!t)throw bm(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fu(e),new Error(e)}function Zn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iN(){return T0()==="http:"||T0()==="https:"}function T0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iN()||D2()||"connection"in navigator)?navigator.onLine:!0}function oN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=N2()||V2()}get(){return sN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new Ya(3e4,6e4);function Xr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jr(t,e,n,r,i={}){return DT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Qa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return j2()||(c.referrerPolicy="no-referrer"),jT.fetch()(VT(t,t.config.apiHost,n,a),c)})}async function DT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aN),e);try{const i=new cN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wl(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw RT(t,h,c);fn(t,h)}}catch(i){if(i instanceof sr)throw i;fn(t,"network-request-failed",{message:String(i)})}}async function Xa(t,e,n,r,i={}){const s=await Jr(t,e,n,r,i);return"mfaPendingCredential"in s&&fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function VT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Sm(t.config,i):`${t.config.apiScheme}://${i}`}function uN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),lN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tn(t,e,r);return i.customData._tokenResponse=n,i}function b0(t){return t!==void 0&&t.enterprise!==void 0}class dN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function hN(t,e){return Jr(t,"GET","/v2/recaptchaConfig",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t,e){return Jr(t,"POST","/v1/accounts:delete",e)}async function LT(t,e){return Jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pN(t,e=!1){const n=He(t),r=await n.getIdToken(e),i=Im(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xo(mh(i.auth_time)),issuedAtTime:Xo(mh(i.iat)),expirationTime:Xo(mh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mh(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{const i=_T(n);return i?JSON.parse(i):(fu("Failed to decode base64 JWT payload"),null)}catch(i){return fu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function S0(t){const e=Im(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&mN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ia(t,LT(n,{idToken:r}));Y(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?OT(s.providerUserInfo):[],a=vN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ff(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function yN(t){const e=He(t);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function OT(t){return t.map(e=>{var{providerId:n}=e,r=Tm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){const n=await DT(t,{},async()=>{const r=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=VT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _N(t,e){return Jr(t,"POST","/v2/accounts:revokeToken",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Es;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Tm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ff(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pN(this,e)}reload(){return yN(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await Ia(this,fN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:A,isAnonymous:j,providerData:D,stsTokenManager:T}=n;Y(b&&T,e,"internal-error");const v=Es.fromJSON(this.name,T);Y(typeof b=="string",e,"internal-error"),dr(p,e.name),dr(m,e.name),Y(typeof A=="boolean",e,"internal-error"),Y(typeof j=="boolean",e,"internal-error"),dr(y,e.name),dr(E,e.name),dr(I,e.name),dr(C,e.name),dr(_,e.name),dr(x,e.name);const S=new Bn({uid:b,auth:e,email:m,emailVerified:A,displayName:p,isAnonymous:j,photoURL:E,phoneNumber:y,tenantId:I,stsTokenManager:v,createdAt:_,lastLoginAt:x});return D&&Array.isArray(D)&&(S.providerData=D.map(P=>Object.assign({},P))),C&&(S._redirectEventId=C),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Es;i.updateFromServerResponse(n);const s=new Bn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Y(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?OT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Es;a.updateFromIdToken(r);const l=new Bn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ff(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function zn(t){Zn(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MT.type="NONE";const A0=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ts{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pu(this.userKey,i.apiKey,s),this.fullPersistenceKey=pu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ts(zn(A0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||zn(A0);const o=pu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const p=Bn._fromJSON(e,h);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ts(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ts(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WT(e))return"Blackberry";if(HT(e))return"Webos";if(UT(e))return"Safari";if((e.includes("chrome/")||BT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FT(t=yt()){return/firefox\//i.test(t)}function UT(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BT(t=yt()){return/crios\//i.test(t)}function zT(t=yt()){return/iemobile/i.test(t)}function $T(t=yt()){return/android/i.test(t)}function WT(t=yt()){return/blackberry/i.test(t)}function HT(t=yt()){return/webos/i.test(t)}function Am(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wN(t=yt()){var e;return Am(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EN(){return L2()&&document.documentMode===10}function qT(t=yt()){return Am(t)||$T(t)||HT(t)||WT(t)||/windows phone/i.test(t)||zT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e=[]){let n;switch(t){case"Browser":n=C0(yt());break;case"Worker":n=`${C0(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e={}){return Jr(t,"GET","/v2/passwordPolicy",Xr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=6;class IN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new TN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ts.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LT(this,{idToken:e}),r=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Wn(this));const n=e?He(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bN(this),n=new IN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ga("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _N(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ts.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oi(t){return He(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=W2(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CN(t){Bc=t}function GT(t){return Bc.loadJS(t)}function PN(){return Bc.recaptchaEnterpriseScript}function kN(){return Bc.gapiScript}function NN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RN="recaptcha-enterprise",jN="NO_RECAPTCHA";class DN{constructor(e){this.type=RN,this.auth=Oi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{hN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new dN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;b0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(jN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&b0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PN();l.length!==0&&(l+=a),GT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function k0(t,e,n,r=!1){const i=new DN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await k0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await k0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e){const n=Em(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zu(s,e??{}))return i;fn(i,"already-initialized")}return n.initialize({options:e})}function LN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ON(t,e,n){const r=Oi(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=QT(e),{host:o,port:a}=MN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),FN()}function QT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MN(t){const e=QT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:N0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:N0(o)}}}function N0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function UN(t,e){return Jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",Xr(t,e))}async function $N(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Cm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",BN);case"emailLink":return zN(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,r,"signUpPassword",UN);case"emailLink":return $N(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="http://localhost";class Ci extends Cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Tm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ci(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bs(e,n)}buildRequest(){const e={requestUri:WN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qN(t){const e=Ro(jo(t)).link,n=e?Ro(jo(e)).deep_link_id:null,r=Ro(jo(t)).deep_link_id;return(r?Ro(jo(r)).link:null)||r||n||e||t}class Pm{constructor(e){var n,r,i,s,o,a;const l=Ro(jo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=HN((i=l.mode)!==null&&i!==void 0?i:null);Y(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qN(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.providerId=Xs.PROVIDER_ID}static credential(e,n){return Aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return Y(r,"argument-error"),Aa._fromEmailAndCode(e,r.code,r.tenantId)}}Xs.PROVIDER_ID="password";Xs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends YT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ja{constructor(){super("facebook.com")}static credential(e){return Ci._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ci._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Ja{constructor(){super("github.com")}static credential(e){return Ci._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Ci._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return Xa(t,"POST","/v1/accounts:signUp",Xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bn._fromIdTokenResponse(e,r,i),o=R0(r);return new Pi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=R0(r);return new Pi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends sr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new rc(e,n,r,i)}}function XT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,s,e,r):s})}async function GN(t,e,n=!1){const r=await Ia(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(Wn(r));const i="reauthenticate";try{const s=await Ia(t,XT(r,i,e,t),n);Y(s.idToken,r,"internal-error");const o=Im(s.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),Pi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(t,e,n=!1){if(_n(t.app))return Promise.reject(Wn(t));const r="signIn",i=await XT(t,r,e),s=await Pi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YN(t,e){return JT(Oi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t){const e=Oi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XN(t,e,n){if(_n(t.app))return Promise.reject(Wn(t));const r=Oi(t),o=await Uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ZT(t),l}),a=await Pi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function JN(t,e,n){return _n(t.app)?Promise.reject(Wn(t)):YN(He(t),Xs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZT(t),r})}function ZN(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function eR(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function tR(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function nR(t){return He(t).signOut()}const ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ic,"1"),this.storage.removeItem(ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1e3,iR=10;class tb extends eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);EN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tb.type="LOCAL";const sR=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nb.type="SESSION";const rb=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await oR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=km("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function lR(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function uR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dR(){return ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firebaseLocalStorageDb",hR=1,sc="firebaseLocalStorage",ob="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(t,e){return t.transaction([sc],e?"readwrite":"readonly").objectStore(sc)}function fR(){const t=indexedDB.deleteDatabase(sb);return new Za(t).toPromise()}function Bf(){const t=indexedDB.open(sb,hR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sc,{keyPath:ob})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sc)?e(r):(r.close(),await fR(),e(await Bf()))})})}async function j0(t,e,n){const r=$c(t,!0).put({[ob]:e,value:n});return new Za(r).toPromise()}async function pR(t,e){const n=$c(t,!1).get(e),r=await new Za(n).toPromise();return r===void 0?null:r.value}function D0(t,e){const n=$c(t,!0).delete(e);return new Za(n).toPromise()}const mR=800,gR=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zc._getInstance(dR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uR(),!this.activeServiceWorker)return;this.sender=new aR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bf();return await j0(e,ic,"1"),await D0(e,ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>j0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$c(i,!1).getAll();return new Za(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const yR=ab;new Ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e){return e?zn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xR(t){return JT(t.auth,new Nm(t),t.bypassAuthState)}function _R(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),QN(n,new Nm(t),t.bypassAuthState)}async function wR(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),GN(n,new Nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return wR;case"reauthViaPopup":case"reauthViaRedirect":return _R;default:fn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Ya(2e3,1e4);class ls extends lb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ER.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="pendingRedirect",mu=new Map;class bR extends lb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const r=await SR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SR(t,e){const n=CR(e),r=AR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function IR(t,e){mu.set(t._key(),e)}function AR(t){return zn(t._redirectPersistence)}function CR(t){return pu(TR,t.config.apiKey,t.name)}async function PR(t,e,n=!1){if(_n(t.app))return Promise.reject(Wn(t));const r=Oi(t),i=vR(r,e),o=await new bR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=10*60*1e3;class NR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ub(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kR&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}}function V0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ub({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return Jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VR=/^https?/;async function LR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jR(t);for(const n of e)try{if(OR(n))return}catch{}fn(t,"unauthorized-domain")}function OR(t){const e=Mf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VR.test(n))return!1;if(DR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Ya(3e4,6e4);function L0(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FR(t){return new Promise((e,n)=>{var r,i,s;function o(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(Tn(t,"network-request-failed"))},timeout:MR.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{const a=NN("iframefcb");return bn()[a]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},GT(`${kN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw gu=null,e})}let gu=null;function UR(t){return gu=gu||FR(t),gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Ya(5e3,15e3),zR="__/auth/iframe",$R="emulator/auth/iframe",WR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qR(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,$R):`https://${t.config.authDomain}/${zR}`,r={apiKey:e.apiKey,appName:t.name,v:Ys},i=HR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qa(r).slice(1)}`}async function KR(t){const e=await UR(t),n=bn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:qR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},BR.get());function l(){bn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QR=500,YR=600,XR="_blank",JR="http://localhost";class O0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZR(t,e,n,r=QR,i=YR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},GR),{width:r.toString(),height:i.toString(),top:s,left:o}),c=yt().toLowerCase();n&&(a=BT(c)?XR:n),FT(c)&&(e=e||JR,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(wN(c)&&a!=="_self")return ej(e||"",a),new O0(null);const p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new O0(p)}function ej(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="__/auth/handler",nj="emulator/auth/handler",rj=encodeURIComponent("fac");async function M0(t,e,n,r,i,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ys,eventId:i};if(e instanceof YT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Ja){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${rj}=${encodeURIComponent(l)}`:"";return`${ij(t)}?${Qa(a).slice(1)}${c}`}function ij({config:t}){return t.emulator?Sm(t,nj):`https://${t.authDomain}/${tj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="webStorageSupport";class sj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rb,this._completeRedirectFn=PR,this._overrideRedirectResult=IR}async _openPopup(e,n,r,i){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await M0(e,n,r,Mf(),i);return ZR(e,o,km())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await M0(e,n,r,Mf(),i);return lR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KR(e),r=new NR(e);return n.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gh,{type:gh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gh];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qT()||UT()||Am()}}const oj=sj;var F0="@firebase/auth",U0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uj(t){Vs(new Ai("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KT(t)},c=new AN(r,i,s,l);return LN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new Ai("auth-internal",e=>{const n=Oi(e.getProvider("auth").getImmediate());return(r=>new aj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(F0,U0,lj(t)),Or(F0,U0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=5*60,dj=TT("authIdTokenMaxAge")||cj;let B0=null;const hj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dj)return;const i=n==null?void 0:n.token;B0!==i&&(B0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fj(t=AT()){const e=Em(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VN(t,{popupRedirectResolver:oj,persistence:[yR,sR,rb]}),r=TT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=hj(s.toString());eR(n,o,()=>o(n.currentUser)),ZN(n,a=>o(a))}}const i=wT("auth");return i&&ON(n,`http://${i}`),n}function pj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Tn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uj("Browser");var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,cb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function S(){}S.prototype=v.prototype,T.D=v.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(P,N,V){for(var k=Array(arguments.length-2),re=2;re<arguments.length;re++)k[re-2]=arguments[re];return v.prototype[N].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,S){S||(S=0);var P=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)P[N]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(N=0;16>N;++N)P[N]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=T.g[0],S=T.g[1],N=T.g[2];var V=T.g[3],k=v+(V^S&(N^V))+P[0]+3614090360&4294967295;v=S+(k<<7&4294967295|k>>>25),k=V+(N^v&(S^N))+P[1]+3905402710&4294967295,V=v+(k<<12&4294967295|k>>>20),k=N+(S^V&(v^S))+P[2]+606105819&4294967295,N=V+(k<<17&4294967295|k>>>15),k=S+(v^N&(V^v))+P[3]+3250441966&4294967295,S=N+(k<<22&4294967295|k>>>10),k=v+(V^S&(N^V))+P[4]+4118548399&4294967295,v=S+(k<<7&4294967295|k>>>25),k=V+(N^v&(S^N))+P[5]+1200080426&4294967295,V=v+(k<<12&4294967295|k>>>20),k=N+(S^V&(v^S))+P[6]+2821735955&4294967295,N=V+(k<<17&4294967295|k>>>15),k=S+(v^N&(V^v))+P[7]+4249261313&4294967295,S=N+(k<<22&4294967295|k>>>10),k=v+(V^S&(N^V))+P[8]+1770035416&4294967295,v=S+(k<<7&4294967295|k>>>25),k=V+(N^v&(S^N))+P[9]+2336552879&4294967295,V=v+(k<<12&4294967295|k>>>20),k=N+(S^V&(v^S))+P[10]+4294925233&4294967295,N=V+(k<<17&4294967295|k>>>15),k=S+(v^N&(V^v))+P[11]+2304563134&4294967295,S=N+(k<<22&4294967295|k>>>10),k=v+(V^S&(N^V))+P[12]+1804603682&4294967295,v=S+(k<<7&4294967295|k>>>25),k=V+(N^v&(S^N))+P[13]+4254626195&4294967295,V=v+(k<<12&4294967295|k>>>20),k=N+(S^V&(v^S))+P[14]+2792965006&4294967295,N=V+(k<<17&4294967295|k>>>15),k=S+(v^N&(V^v))+P[15]+1236535329&4294967295,S=N+(k<<22&4294967295|k>>>10),k=v+(N^V&(S^N))+P[1]+4129170786&4294967295,v=S+(k<<5&4294967295|k>>>27),k=V+(S^N&(v^S))+P[6]+3225465664&4294967295,V=v+(k<<9&4294967295|k>>>23),k=N+(v^S&(V^v))+P[11]+643717713&4294967295,N=V+(k<<14&4294967295|k>>>18),k=S+(V^v&(N^V))+P[0]+3921069994&4294967295,S=N+(k<<20&4294967295|k>>>12),k=v+(N^V&(S^N))+P[5]+3593408605&4294967295,v=S+(k<<5&4294967295|k>>>27),k=V+(S^N&(v^S))+P[10]+38016083&4294967295,V=v+(k<<9&4294967295|k>>>23),k=N+(v^S&(V^v))+P[15]+3634488961&4294967295,N=V+(k<<14&4294967295|k>>>18),k=S+(V^v&(N^V))+P[4]+3889429448&4294967295,S=N+(k<<20&4294967295|k>>>12),k=v+(N^V&(S^N))+P[9]+568446438&4294967295,v=S+(k<<5&4294967295|k>>>27),k=V+(S^N&(v^S))+P[14]+3275163606&4294967295,V=v+(k<<9&4294967295|k>>>23),k=N+(v^S&(V^v))+P[3]+4107603335&4294967295,N=V+(k<<14&4294967295|k>>>18),k=S+(V^v&(N^V))+P[8]+1163531501&4294967295,S=N+(k<<20&4294967295|k>>>12),k=v+(N^V&(S^N))+P[13]+2850285829&4294967295,v=S+(k<<5&4294967295|k>>>27),k=V+(S^N&(v^S))+P[2]+4243563512&4294967295,V=v+(k<<9&4294967295|k>>>23),k=N+(v^S&(V^v))+P[7]+1735328473&4294967295,N=V+(k<<14&4294967295|k>>>18),k=S+(V^v&(N^V))+P[12]+2368359562&4294967295,S=N+(k<<20&4294967295|k>>>12),k=v+(S^N^V)+P[5]+4294588738&4294967295,v=S+(k<<4&4294967295|k>>>28),k=V+(v^S^N)+P[8]+2272392833&4294967295,V=v+(k<<11&4294967295|k>>>21),k=N+(V^v^S)+P[11]+1839030562&4294967295,N=V+(k<<16&4294967295|k>>>16),k=S+(N^V^v)+P[14]+4259657740&4294967295,S=N+(k<<23&4294967295|k>>>9),k=v+(S^N^V)+P[1]+2763975236&4294967295,v=S+(k<<4&4294967295|k>>>28),k=V+(v^S^N)+P[4]+1272893353&4294967295,V=v+(k<<11&4294967295|k>>>21),k=N+(V^v^S)+P[7]+4139469664&4294967295,N=V+(k<<16&4294967295|k>>>16),k=S+(N^V^v)+P[10]+3200236656&4294967295,S=N+(k<<23&4294967295|k>>>9),k=v+(S^N^V)+P[13]+681279174&4294967295,v=S+(k<<4&4294967295|k>>>28),k=V+(v^S^N)+P[0]+3936430074&4294967295,V=v+(k<<11&4294967295|k>>>21),k=N+(V^v^S)+P[3]+3572445317&4294967295,N=V+(k<<16&4294967295|k>>>16),k=S+(N^V^v)+P[6]+76029189&4294967295,S=N+(k<<23&4294967295|k>>>9),k=v+(S^N^V)+P[9]+3654602809&4294967295,v=S+(k<<4&4294967295|k>>>28),k=V+(v^S^N)+P[12]+3873151461&4294967295,V=v+(k<<11&4294967295|k>>>21),k=N+(V^v^S)+P[15]+530742520&4294967295,N=V+(k<<16&4294967295|k>>>16),k=S+(N^V^v)+P[2]+3299628645&4294967295,S=N+(k<<23&4294967295|k>>>9),k=v+(N^(S|~V))+P[0]+4096336452&4294967295,v=S+(k<<6&4294967295|k>>>26),k=V+(S^(v|~N))+P[7]+1126891415&4294967295,V=v+(k<<10&4294967295|k>>>22),k=N+(v^(V|~S))+P[14]+2878612391&4294967295,N=V+(k<<15&4294967295|k>>>17),k=S+(V^(N|~v))+P[5]+4237533241&4294967295,S=N+(k<<21&4294967295|k>>>11),k=v+(N^(S|~V))+P[12]+1700485571&4294967295,v=S+(k<<6&4294967295|k>>>26),k=V+(S^(v|~N))+P[3]+2399980690&4294967295,V=v+(k<<10&4294967295|k>>>22),k=N+(v^(V|~S))+P[10]+4293915773&4294967295,N=V+(k<<15&4294967295|k>>>17),k=S+(V^(N|~v))+P[1]+2240044497&4294967295,S=N+(k<<21&4294967295|k>>>11),k=v+(N^(S|~V))+P[8]+1873313359&4294967295,v=S+(k<<6&4294967295|k>>>26),k=V+(S^(v|~N))+P[15]+4264355552&4294967295,V=v+(k<<10&4294967295|k>>>22),k=N+(v^(V|~S))+P[6]+2734768916&4294967295,N=V+(k<<15&4294967295|k>>>17),k=S+(V^(N|~v))+P[13]+1309151649&4294967295,S=N+(k<<21&4294967295|k>>>11),k=v+(N^(S|~V))+P[4]+4149444226&4294967295,v=S+(k<<6&4294967295|k>>>26),k=V+(S^(v|~N))+P[11]+3174756917&4294967295,V=v+(k<<10&4294967295|k>>>22),k=N+(v^(V|~S))+P[2]+718787259&4294967295,N=V+(k<<15&4294967295|k>>>17),k=S+(V^(N|~v))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+V&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var S=v-this.blockSize,P=this.B,N=this.h,V=0;V<v;){if(N==0)for(;V<=S;)i(this,T,V),V+=this.blockSize;if(typeof T=="string"){for(;V<v;)if(P[N++]=T.charCodeAt(V++),N==this.blockSize){i(this,P),N=0;break}}else for(;V<v;)if(P[N++]=T[V++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var S=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=S&255,S/=256;for(this.u(T),T=Array(16),v=S=0;4>v;++v)for(var P=0;32>P;P+=8)T[S++]=this.g[v]>>>P&255;return T};function s(T,v){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=v(T)}function o(T,v){this.h=v;for(var S=[],P=!0,N=T.length-1;0<=N;N--){var V=T[N]|0;P&&V==v||(S[N]=V,P=!1)}this.g=S}var a={};function l(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return C(c(-T));for(var v=[],S=1,P=0;T>=S;P++)v[P]=T/S|0,S*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return C(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),P=p,N=0;N<T.length;N+=8){var V=Math.min(8,T.length-N),k=parseInt(T.substring(N,N+V),v);8>V?(V=c(Math.pow(v,V)),P=P.j(V).add(c(k))):(P=P.j(S),P=P.add(c(k)))}return P}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-C(this).m();for(var T=0,v=1,S=0;S<this.g.length;S++){var P=this.i(S);T+=(0<=P?P:4294967296+P)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(I(this))return"-"+C(this).toString(T);for(var v=c(Math.pow(T,6)),S=this,P="";;){var N=A(S,v).g;S=_(S,N.j(v));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=N,E(S))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=_(this,T),I(T)?-1:E(T)?0:1};function C(T){for(var v=T.g.length,S=[],P=0;P<v;P++)S[P]=~T.g[P];return new o(S,~T.h).add(m)}t.abs=function(){return I(this)?C(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),S=[],P=0,N=0;N<=v;N++){var V=P+(this.i(N)&65535)+(T.i(N)&65535),k=(V>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);P=k>>>16,V&=65535,k&=65535,S[N]=k<<16|V}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(T,v){return T.add(C(v))}t.j=function(T){if(E(this)||E(T))return p;if(I(this))return I(T)?C(this).j(C(T)):C(C(this).j(T));if(I(T))return C(this.j(C(T)));if(0>this.l(y)&&0>T.l(y))return c(this.m()*T.m());for(var v=this.g.length+T.g.length,S=[],P=0;P<2*v;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<T.g.length;N++){var V=this.i(P)>>>16,k=this.i(P)&65535,re=T.i(N)>>>16,pe=T.i(N)&65535;S[2*P+2*N]+=k*pe,x(S,2*P+2*N),S[2*P+2*N+1]+=V*pe,x(S,2*P+2*N+1),S[2*P+2*N+1]+=k*re,x(S,2*P+2*N+1),S[2*P+2*N+2]+=V*re,x(S,2*P+2*N+2)}for(P=0;P<v;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=v;P<2*v;P++)S[P]=0;return new o(S,0)};function x(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function b(T,v){this.g=T,this.h=v}function A(T,v){if(E(v))throw Error("division by zero");if(E(T))return new b(p,p);if(I(T))return v=A(C(T),v),new b(C(v.g),C(v.h));if(I(v))return v=A(T,C(v)),new b(C(v.g),v.h);if(30<T.g.length){if(I(T)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var S=m,P=v;0>=P.l(T);)S=j(S),P=j(P);var N=D(S,1),V=D(P,1);for(P=D(P,2),S=D(S,2);!E(P);){var k=V.add(P);0>=k.l(T)&&(N=N.add(S),V=k),P=D(P,1),S=D(S,1)}return v=_(T,N.j(v)),new b(N,v)}for(N=p;0<=T.l(v);){for(S=Math.max(1,Math.floor(T.m()/v.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=c(S),k=V.j(v);I(k)||0<k.l(T);)S-=P,V=c(S),k=V.j(v);E(V)&&(V=m),N=N.add(V),T=_(T,k)}return new b(N,T)}t.A=function(T){return A(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)&T.i(P);return new o(S,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)|T.i(P);return new o(S,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)^T.i(P);return new o(S,this.h^T.h)};function j(T){for(var v=T.g.length+1,S=[],P=0;P<v;P++)S[P]=T.i(P)<<1|T.i(P-1)>>>31;return new o(S,T.h)}function D(T,v){var S=v>>5;v%=32;for(var P=T.g.length-S,N=[],V=0;V<P;V++)N[V]=0<v?T.i(V+S)>>>v|T.i(V+S+1)<<32-v:T.i(V+S);return new o(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,_i=o}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var db,Do,hb,yu,zf,fb,pb,mb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var L=u[w];if(!(L in g))break e;g=g[L]}u=u[u.length-1],w=g[u],f=f(w),f!=w&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,w=!1,L={next:function(){if(!w&&g<u.length){var O=g++;return{value:f(O,u[O]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function p(u,f,g){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function m(u,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function E(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(w,L,O){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return f.prototype[L].apply(w,z)}}function I(u){const f=u.length;if(0<f){const g=Array(f);for(let w=0;w<f;w++)g[w]=u[w];return g}return[]}function C(u,f){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const L=u.length||0,O=w.length||0;u.length=L+O;for(let z=0;z<O;z++)u[L+z]=w[z]}else u.push(w)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function x(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(u,f,g){for(const w in u)f.call(g,u[w],w,u)}function T(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function v(u){const f={};for(const g in u)f[g]=u[g];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let g,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(g in w)u[g]=w[g];for(let O=0;O<S.length;O++)g=S[O],Object.prototype.hasOwnProperty.call(w,g)&&(u[g]=w[g])}}function N(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function V(u){a.setTimeout(()=>{throw u},0)}function k(){var u=G;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class re{constructor(){this.h=this.g=null}add(f,g){const w=pe.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var pe=new _(()=>new Ue,u=>u.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,B=!1,G=new re,X=()=>{const u=a.Promise.resolve(void 0);ne=()=>{u.then(ye)}};var ye=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(g){V(g)}var f=pe;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Xt(u,f){if(be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(j){e:{try{A(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Xt.aa.h.call(this)}}E(Xt,be);var vt={2:"touch",3:"pen",4:"mouse"};Xt.prototype.h=function(){Xt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),gd=0;function yd(u,f,g,w,L){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=L,this.key=++gd,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gn(u){this.src=u,this.g={},this.h=0}gn.prototype.add=function(u,f,g,w,L){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var z=Bi(u,f,w,L);return-1<z?(f=u[z],g||(f.fa=!1)):(f=new yd(f,this.src,O,!!w,L),f.fa=g,u.push(f)),f};function or(u,f){var g=f.type;if(g in u.g){var w=u.g[g],L=Array.prototype.indexOf.call(w,f,void 0),O;(O=0<=L)&&Array.prototype.splice.call(w,L,1),O&&(W(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Bi(u,f,g,w){for(var L=0;L<u.length;++L){var O=u[L];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==w)return L}return-1}var Nn="closure_lm_"+(1e6*Math.random()|0),Rn={};function Yg(u,f,g,w,L){if(Array.isArray(f)){for(var O=0;O<f.length;O++)Yg(u,f[O],g,w,L);return null}return g=Zg(g),u&&u[Jt]?u.K(f,g,c(w)?!!w.capture:!1,L):hI(u,f,g,!1,w,L)}function hI(u,f,g,w,L,O){if(!f)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,me=xd(u);if(me||(u[Nn]=me=new gn(u)),g=me.add(f,g,w,z,O),g.proxy)return g;if(w=fI(),g.proxy=w,w.src=u,w.listener=g,u.addEventListener)Yt||(L=z),L===void 0&&(L=!1),u.addEventListener(f.toString(),w,L);else if(u.attachEvent)u.attachEvent(Jg(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function fI(){function u(g){return f.call(u.src,u.listener,g)}const f=pI;return u}function Xg(u,f,g,w,L){if(Array.isArray(f))for(var O=0;O<f.length;O++)Xg(u,f[O],g,w,L);else w=c(w)?!!w.capture:!!w,g=Zg(g),u&&u[Jt]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],g=Bi(O,g,w,L),-1<g&&(W(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=xd(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Bi(f,g,w,L)),(g=-1<u?f[u]:null)&&vd(g))}function vd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Jt])or(f.i,u);else{var g=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(g,w,u.capture):f.detachEvent?f.detachEvent(Jg(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=xd(f))?(or(g,u),g.h==0&&(g.src=null,f[Nn]=null)):W(u)}}}function Jg(u){return u in Rn?Rn[u]:Rn[u]="on"+u}function pI(u,f){if(u.da)u=!0;else{f=new Xt(f,this);var g=u.listener,w=u.ha||u.src;u.fa&&vd(u),u=g.call(w,f)}return u}function xd(u){return u=u[Nn],u instanceof gn?u:null}var _d="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zg(u){return typeof u=="function"?u:(u[_d]||(u[_d]=function(f){return u.handleEvent(f)}),u[_d])}function it(){de.call(this),this.i=new gn(this),this.M=this,this.F=null}E(it,de),it.prototype[Jt]=!0,it.prototype.removeEventListener=function(u,f,g,w){Xg(this,u,f,g,w)};function xt(u,f){var g,w=u.F;if(w)for(g=[];w;w=w.F)g.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new be(f,u);else if(f instanceof be)f.target=f.target||u;else{var L=f;f=new be(w,u),P(f,L)}if(L=!0,g)for(var O=g.length-1;0<=O;O--){var z=f.g=g[O];L=dl(z,w,!0,f)&&L}if(z=f.g=u,L=dl(z,w,!0,f)&&L,L=dl(z,w,!1,f)&&L,g)for(O=0;O<g.length;O++)z=f.g=g[O],L=dl(z,w,!1,f)&&L}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],w=0;w<g.length;w++)W(g[w]);delete u.g[f],u.h--}}this.F=null},it.prototype.K=function(u,f,g,w){return this.i.add(String(u),f,!1,g,w)},it.prototype.L=function(u,f,g,w){return this.i.add(String(u),f,!0,g,w)};function dl(u,f,g,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,O=0;O<f.length;++O){var z=f[O];if(z&&!z.da&&z.capture==g){var me=z.listener,Qe=z.ha||z.src;z.fa&&or(u.i,z),L=me.call(Qe,w)!==!1&&L}}return L&&!w.defaultPrevented}function ey(u,f,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ty(u){u.g=ey(()=>{u.g=null,u.i&&(u.i=!1,ty(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class mI extends de{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ty(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(u){de.call(this),this.h=u,this.g={}}E(io,de);var ny=[];function ry(u){D(u.g,function(f,g){this.g.hasOwnProperty(g)&&vd(f)},u),u.g={}}io.prototype.N=function(){io.aa.N.call(this),ry(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wd=a.JSON.stringify,gI=a.JSON.parse,yI=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ed(){}Ed.prototype.h=null;function iy(u){return u.h||(u.h=u.i())}function sy(){}var so={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Td(){be.call(this,"d")}E(Td,be);function bd(){be.call(this,"c")}E(bd,be);var ni={},oy=null;function hl(){return oy=oy||new it}ni.La="serverreachability";function ay(u){be.call(this,ni.La,u)}E(ay,be);function oo(u){const f=hl();xt(f,new ay(f))}ni.STAT_EVENT="statevent";function ly(u,f){be.call(this,ni.STAT_EVENT,u),this.stat=f}E(ly,be);function _t(u){const f=hl();xt(f,new ly(f,u))}ni.Ma="timingevent";function uy(u,f){be.call(this,ni.Ma,u),this.size=f}E(uy,be);function ao(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function lo(){this.g=!0}lo.prototype.xa=function(){this.g=!1};function vI(u,f,g,w,L,O){u.info(function(){if(u.g)if(O)for(var z="",me=O.split("&"),Qe=0;Qe<me.length;Qe++){var ue=me[Qe].split("=");if(1<ue.length){var st=ue[0];ue=ue[1];var ot=st.split("_");z=2<=ot.length&&ot[1]=="type"?z+(st+"="+ue+"&"):z+(st+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+f+`
`+g+`
`+z})}function xI(u,f,g,w,L,O,z){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+f+`
`+g+`
`+O+" "+z})}function zi(u,f,g,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+wI(u,g)+(w?" "+w:"")})}function _I(u,f){u.info(function(){return"TIMEOUT: "+f})}lo.prototype.info=function(){};function wI(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var w=g[u];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return wd(g)}catch{return f}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sd;function pl(){}E(pl,Ed),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},Sd=new pl;function ar(u,f,g,w){this.j=u,this.i=f,this.l=g,this.R=w||1,this.U=new io(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dy}function dy(){this.i=null,this.g="",this.h=!1}var hy={},Id={};function Ad(u,f,g){u.L=1,u.v=vl(jn(f)),u.m=g,u.P=!0,fy(u,null)}function fy(u,f){u.F=Date.now(),ml(u),u.A=jn(u.v);var g=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Ay(g.i,"t",w),u.C=0,g=u.j.J,u.h=new dy,u.g=Hy(u.j,g?f:null,!u.m),0<u.O&&(u.M=new mI(m(u.Y,u,u.g),u.O)),f=u.U,g=u.g,w=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ny[0]=L.toString()),L=ny);for(var O=0;O<L.length;O++){var z=Yg(g,L[O],w||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),oo(),vI(u.i,u.u,u.A,u.l,u.R,u.m)}ar.prototype.ca=function(u){u=u.target;const f=this.M;f&&Dn(u)==3?f.j():this.Y(u)},ar.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Dn(this.g);var f=this.g.Ba();const Hi=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Dy(this.g)))){this.J||ot!=4||f==7||(f==8||0>=Hi?oo(3):oo(2)),Cd(this);var g=this.g.Z();this.X=g;t:if(py(this)){var w=Dy(this.g);u="";var L=w.length,O=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),uo(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(O&&f==L-1)});w.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,xI(this.i,this.u,this.A,this.l,this.R,ot,g),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Qe=this.g;if((me=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(me)){var ue=me;break t}}ue=null}if(g=ue)zi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pd(this,g);else{this.o=!1,this.s=3,_t(12),ri(this),uo(this);break e}}if(this.P){g=!0;let Zt;for(;!this.J&&this.C<z.length;)if(Zt=EI(this,z),Zt==Id){ot==4&&(this.s=4,_t(14),g=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==hy){this.s=4,_t(15),zi(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else zi(this.i,this.l,Zt,null),Pd(this,Zt);if(py(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||z.length!=0||this.h.h||(this.s=1,_t(16),g=!1),this.o=this.o&&g,!g)zi(this.i,this.l,z,"[Invalid Chunked Response]"),ri(this),uo(this);else if(0<z.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Vd(st),st.M=!0,_t(11))}}else zi(this.i,this.l,z,null),Pd(this,z);ot==4&&ri(this),this.o&&!this.J&&(ot==4?By(this.j,this):(this.o=!1,ml(this)))}else FI(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ri(this),uo(this)}}}catch{}finally{}};function py(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function EI(u,f){var g=u.C,w=f.indexOf(`
`,g);return w==-1?Id:(g=Number(f.substring(g,w)),isNaN(g)?hy:(w+=1,w+g>f.length?Id:(f=f.slice(w,w+g),u.C=w+g,f)))}ar.prototype.cancel=function(){this.J=!0,ri(this)};function ml(u){u.S=Date.now()+u.I,my(u,u.I)}function my(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ao(m(u.ba,u),f)}function Cd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ar.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(_I(this.i,this.A),this.L!=2&&(oo(),_t(17)),ri(this),this.s=2,uo(this)):my(this,this.S-u)};function uo(u){u.j.G==0||u.J||By(u.j,u)}function ri(u){Cd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,ry(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Pd(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||kd(g.h,u))){if(!u.K&&kd(g.h,u)&&g.G==3){try{var w=g.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)bl(g),El(g);else break e;Dd(g),_t(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=ao(m(g.Za,g),6e3));if(1>=vy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else si(g,11)}else if((u.K||g.g==u)&&bl(g),!x(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let ue=L[f];if(g.T=ue[0],ue=ue[1],g.G==2)if(ue[0]=="c"){g.K=ue[1],g.ia=ue[2];const st=ue[3];st!=null&&(g.la=st,g.j.info("VER="+g.la));const ot=ue[4];ot!=null&&(g.Aa=ot,g.j.info("SVER="+g.Aa));const Hi=ue[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(w=1.5*Hi,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const Zt=u.g;if(Zt){const Il=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var O=w.h;O.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Nd(O,O.h),O.h=null))}if(w.D){const Ld=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ld&&(w.ya=Ld,ve(w.I,w.D,Ld))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var z=u;if(w.qa=Wy(w,w.J?w.ia:null,w.W),z.K){xy(w.h,z);var me=z,Qe=w.L;Qe&&(me.I=Qe),me.B&&(Cd(me),ml(me)),w.g=z}else Fy(w);0<g.i.length&&Tl(g)}else ue[0]!="stop"&&ue[0]!="close"||si(g,7);else g.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?si(g,7):jd(g):ue[0]!="noop"&&g.l&&g.l.ta(ue),g.v=0)}}oo(4)}catch{}}var TI=class{constructor(u,f){this.g=u,this.map=f}};function gy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vy(u){return u.h?1:u.g?u.g.size:0}function kd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Nd(u,f){u.g?u.g.add(f):u.h=f}function xy(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}gy.prototype.cancel=function(){if(this.i=_y(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _y(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return I(u.i)}function bI(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,w=0;w<g;w++)f.push(u[w]);return f}f=[],g=0;for(w in u)f[g++]=u[w];return f}function SI(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const w in u)f[g++]=w;return f}}}function wy(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=SI(u),w=bI(u),L=w.length,O=0;O<L;O++)f.call(void 0,w[O],g&&g[O],u)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function II(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var w=u[g].indexOf("="),L=null;if(0<=w){var O=u[g].substring(0,w);L=u[g].substring(w+1)}else O=u[g];f(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ii(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ii){this.h=u.h,gl(this,u.j),this.o=u.o,this.g=u.g,yl(this,u.s),this.l=u.l;var f=u.i,g=new fo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Ty(this,g),this.m=u.m}else u&&(f=String(u).match(Ey))?(this.h=!1,gl(this,f[1]||"",!0),this.o=co(f[2]||""),this.g=co(f[3]||"",!0),yl(this,f[4]),this.l=co(f[5]||"",!0),Ty(this,f[6]||"",!0),this.m=co(f[7]||"")):(this.h=!1,this.i=new fo(null,this.h))}ii.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ho(f,by,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ho(f,by,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ho(g,g.charAt(0)=="/"?PI:CI,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ho(g,NI)),u.join("")};function jn(u){return new ii(u)}function gl(u,f,g){u.j=g?co(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function yl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ty(u,f,g){f instanceof fo?(u.i=f,RI(u.i,u.h)):(g||(f=ho(f,kI)),u.i=new fo(f,u.h))}function ve(u,f,g){u.i.set(f,g)}function vl(u){return ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function co(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ho(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,AI),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function AI(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var by=/[#\/\?@]/g,CI=/[#\?:]/g,PI=/[#\?]/g,kI=/[#\?@]/g,NI=/#/g;function fo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function lr(u){u.g||(u.g=new Map,u.h=0,u.i&&II(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fo.prototype,t.add=function(u,f){lr(this),this.i=null,u=$i(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function Sy(u,f){lr(u),f=$i(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Iy(u,f){return lr(u),f=$i(u,f),u.g.has(f)}t.forEach=function(u,f){lr(this),this.g.forEach(function(g,w){g.forEach(function(L){u.call(f,L,w,this)},this)},this)},t.na=function(){lr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let w=0;w<f.length;w++){const L=u[w];for(let O=0;O<L.length;O++)g.push(f[w])}return g},t.V=function(u){lr(this);let f=[];if(typeof u=="string")Iy(this,u)&&(f=f.concat(this.g.get($i(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return lr(this),this.i=null,u=$i(this,u),Iy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Ay(u,f,g){Sy(u,f),0<g.length&&(u.i=null,u.g.set($i(u,f),I(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var w=f[g];const O=encodeURIComponent(String(w)),z=this.V(w);for(w=0;w<z.length;w++){var L=O;z[w]!==""&&(L+="="+encodeURIComponent(String(z[w]))),u.push(L)}}return this.i=u.join("&")};function $i(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function RI(u,f){f&&!u.j&&(lr(u),u.i=null,u.g.forEach(function(g,w){var L=w.toLowerCase();w!=L&&(Sy(this,w),Ay(this,L,g))},u)),u.j=f}function jI(u,f){const g=new lo;if(a.Image){const w=new Image;w.onload=y(ur,g,"TestLoadImage: loaded",!0,f,w),w.onerror=y(ur,g,"TestLoadImage: error",!1,f,w),w.onabort=y(ur,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=y(ur,g,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function DI(u,f){const g=new lo,w=new AbortController,L=setTimeout(()=>{w.abort(),ur(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(O=>{clearTimeout(L),O.ok?ur(g,"TestPingServer: ok",!0,f):ur(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),ur(g,"TestPingServer: error",!1,f)})}function ur(u,f,g,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(g)}catch{}}function VI(){this.g=new yI}function LI(u,f,g){const w=g||"";try{wy(u,function(L,O){let z=L;c(L)&&(z=wd(L)),f.push(w+O+"="+encodeURIComponent(z))})}catch(L){throw f.push(w+"type="+encodeURIComponent("_badmap")),L}}function xl(u){this.l=u.Ub||null,this.j=u.eb||!1}E(xl,Ed),xl.prototype.g=function(){return new _l(this.l,this.j)},xl.prototype.i=function(u){return function(){return u}}({});function _l(u,f){it.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(_l,it),t=_l.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,mo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?po(this):mo(this),this.readyState==3&&Cy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,po(this))},t.Qa=function(u){this.g&&(this.response=u,po(this))},t.ga=function(){this.g&&po(this)};function po(u){u.readyState=4,u.l=null,u.j=null,u.v=null,mo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function mo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Py(u){let f="";return D(u,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function Rd(u,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Py(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):ve(u,f,g))}function Ne(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ne,it);var OI=/^https?$/i,MI=["POST","PUT"];t=Ne.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sd.g(),this.v=this.o?iy(this.o):iy(Sd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){ky(this,O);return}if(u=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)g.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const O of w.keys())g.set(O,w.get(O));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MI,f,void 0))||w||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jy(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){ky(this,O)}};function ky(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ny(u),wl(u)}function Ny(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ry(this):this.bb())},t.bb=function(){Ry(this)};function Ry(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)ey(u.Ea,0,u);else if(xt(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=z===0){var L=String(u.D).match(Ey)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),w=!OI.test(L?L.toLowerCase():"")}g=w}if(g)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var O=2<Dn(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",Ny(u)}}finally{wl(u)}}}}function wl(u,f){if(u.g){jy(u);const g=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||xt(u,"ready");try{g.onreadystatechange=w}catch{}}}function jy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),gI(f)}};function Dy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function FI(u){const f={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(x(u[w]))continue;var g=N(u[w]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[L]||[];f[L]=O,O.push(g)}T(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Vy(u){this.Aa=0,this.i=[],this.j=new lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=go("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=go("baseRetryDelayMs",5e3,u),this.cb=go("retryDelaySeedMs",1e4,u),this.Wa=go("forwardChannelMaxRetries",2,u),this.wa=go("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gy(u&&u.concurrentRequestLimit),this.Da=new VI,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vy.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,w){_t(0),this.W=u,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Wy(this,null,this.W),Tl(this)};function jd(u){if(Ly(u),u.G==3){var f=u.U++,g=jn(u.I);if(ve(g,"SID",u.K),ve(g,"RID",f),ve(g,"TYPE","terminate"),yo(u,g),f=new ar(u,u.j,f),f.L=2,f.v=vl(jn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Hy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ml(f)}$y(u)}function El(u){u.g&&(Vd(u),u.g.cancel(),u.g=null)}function Ly(u){El(u),u.u&&(a.clearTimeout(u.u),u.u=null),bl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Tl(u){if(!yy(u.h)&&!u.s){u.s=!0;var f=u.Ga;ne||X(),B||(ne(),B=!0),G.add(f,u),u.B=0}}function UI(u,f){return vy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ao(m(u.Ga,u,f),zy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new ar(this,this.j,u);let O=this.o;if(this.S&&(O?(O=v(O),P(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=My(this,L,f),g=jn(this.I),ve(g,"RID",u),ve(g,"CVER",22),this.D&&ve(g,"X-HTTP-Session-Id",this.D),yo(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(Py(O)))+"&"+f:this.m&&Rd(g,this.m,O)),Nd(this.h,L),this.Ua&&ve(g,"TYPE","init"),this.P?(ve(g,"$req",f),ve(g,"SID","null"),L.T=!0,Ad(L,g,null)):Ad(L,g,f),this.G=2}}else this.G==3&&(u?Oy(this,u):this.i.length==0||yy(this.h)||Oy(this))};function Oy(u,f){var g;f?g=f.l:g=u.U++;const w=jn(u.I);ve(w,"SID",u.K),ve(w,"RID",g),ve(w,"AID",u.T),yo(u,w),u.m&&u.o&&Rd(w,u.m,u.o),g=new ar(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=My(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Nd(u.h,g),Ad(g,w,f)}function yo(u,f){u.H&&D(u.H,function(g,w){ve(f,w,g)}),u.l&&wy({},function(g,w){ve(f,w,g)})}function My(u,f,g){g=Math.min(u.i.length,g);var w=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=L[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let me=!0;for(let Qe=0;Qe<g;Qe++){let ue=L[Qe].g;const st=L[Qe].map;if(ue-=O,0>ue)O=Math.max(0,L[Qe].g-100),me=!1;else try{LI(st,z,"req"+ue+"_")}catch{w&&w(st)}}if(me){w=z.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,w}function Fy(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ne||X(),B||(ne(),B=!0),G.add(f,u),u.v=0}}function Dd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ao(m(u.Fa,u),zy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Uy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ao(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),El(this),Uy(this))};function Vd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Uy(u){u.g=new ar(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=jn(u.qa);ve(f,"RID","rpc"),ve(f,"SID",u.K),ve(f,"AID",u.T),ve(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ve(f,"TO",u.ja),ve(f,"TYPE","xmlhttp"),yo(u,f),u.m&&u.o&&Rd(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=vl(jn(f)),g.m=null,g.P=!0,fy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,El(this),Dd(this),_t(19))};function bl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function By(u,f){var g=null;if(u.g==f){bl(u),Vd(u),u.g=null;var w=2}else if(kd(u.h,f))g=f.D,xy(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;w=hl(),xt(w,new uy(w,g)),Tl(u)}else Fy(u);else if(L=f.s,L==3||L==0&&0<f.X||!(w==1&&UI(u,f)||w==2&&Dd(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),L){case 1:si(u,5);break;case 4:si(u,10);break;case 3:si(u,6);break;default:si(u,2)}}}function zy(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function si(u,f){if(u.j.info("Error code "+f),f==2){var g=m(u.fb,u),w=u.Xa;const L=!w;w=new ii(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gl(w,"https"),vl(w),L?jI(w.toString(),g):DI(w.toString(),g)}else _t(2);u.G=0,u.l&&u.l.sa(f),$y(u),Ly(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function $y(u){if(u.G=0,u.ka=[],u.l){const f=_y(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function Wy(u,f,g){var w=g instanceof ii?jn(g):new ii(g);if(w.g!="")f&&(w.g=f+"."+w.g),yl(w,w.s);else{var L=a.location;w=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var O=new ii(null);w&&gl(O,w),f&&(O.g=f),L&&yl(O,L),g&&(O.l=g),w=O}return g=u.D,f=u.ya,g&&f&&ve(w,g,f),ve(w,"VER",u.la),yo(u,w),w}function Hy(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ne(new xl({eb:g})):new Ne(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qy(){}t=qy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(u,f){return new Nt(u,f)};function Nt(u,f){it.call(this),this.g=new Vy(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!x(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!x(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wi(this)}E(Nt,it),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){jd(this.g)},Nt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=wd(u),u=g);f.i.push(new TI(f.Ya++,u)),f.G==3&&Tl(f)},Nt.prototype.N=function(){this.g.l=null,delete this.j,jd(this.g),delete this.g,Nt.aa.N.call(this)};function Ky(u){Td.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(Ky,Td);function Gy(){bd.call(this),this.status=1}E(Gy,bd);function Wi(u){this.g=u}E(Wi,qy),Wi.prototype.ua=function(){xt(this.g,"a")},Wi.prototype.ta=function(u){xt(this.g,new Ky(u))},Wi.prototype.sa=function(u){xt(this.g,new Gy)},Wi.prototype.ra=function(){xt(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,mb=function(){return new Sl},pb=function(){return hl()},fb=ni,zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,yu=fl,cy.COMPLETE="complete",hb=cy,sy.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",it.prototype.listen=it.prototype.K,Do=sy,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,db=Ne}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new _m("@firebase/firestore");function Io(){return ki.logLevel}function q(t,...e){if(ki.logLevel<=oe.DEBUG){const n=e.map(Rm);ki.debug(`Firestore (${Js}): ${t}`,...n)}}function er(t,...e){if(ki.logLevel<=oe.ERROR){const n=e.map(Rm);ki.error(`Firestore (${Js}): ${t}`,...n)}}function Ls(t,...e){if(ki.logLevel<=oe.WARN){const n=e.map(Rm);ki.warn(`Firestore (${Js}): ${t}`,...n)}}function Rm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+t;throw er(e),new Error(e)}function fe(t,e){t||J()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class gj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yj{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new gb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new dt(e)}}class vj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new vj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _j{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new _j(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ej(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Os(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new We(0,0))}static max(){return new Z(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends Ca{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const Tj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends Ca{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return Tj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(_e.fromString(e))}static fromName(e){return new K(_e.fromString(e).popFirst(5))}static empty(){return new K(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new _e(e.slice()))}}function bj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Br(i,K.empty(),e)}function Sj(t){return new Br(t.readTime,t.key,-1)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(Z.min(),K.empty(),-1)}static max(){return new Br(Z.max(),K.empty(),-1)}}function Ij(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Aj)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Pj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jm.oe=-1;function Wc(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function kj(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Je.RED,this.left=i??Je.EMPTY,this.right=s??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Je(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new H0(this.data.getIterator())}getIteratorFrom(e){return new H0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class H0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Dt([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xb("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const Nj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=Nj.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ni(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vm(t){const e=t.mapValue.fields.__previous_value__;return Dm(e)?Vm(e):e}function Pa(t){const e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl={mapValue:{}};function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dm(t)?4:Dj(t)?9007199254740991:jj(t)?10:11:J()}function Pn(t,e){if(t===e)return!0;const n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zr(i.timestampValue),a=zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ni(i.bytesValue).isEqual(Ni(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?oc(o)===oc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(W0(o)!==W0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pn(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function Na(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function Ms(t,e){if(t===e)return 0;const n=Ri(t),r=Ri(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return q0(t.timestampValue,e.timestampValue);case 4:return q0(Pa(t),Pa(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ni(s),l=Ni(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ce(a[c],l[c]);if(h!==0)return h}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(Ve(s.latitude),Ve(o.latitude));return a!==0?a:ce(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=ce(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:K0(y,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Kl.mapValue&&o===Kl.mapValue)return 0;if(s===Kl.mapValue)return 1;if(o===Kl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=ce(l[p],h[p]);if(m!==0)return m;const y=Ms(a[l[p]],c[h[p]]);if(y!==0)return y}return ce(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=zr(t),r=zr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function K0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ms(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Fs(t){return $f(t)}function $f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$f(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$f(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function G0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wf(t){return!!t&&"integerValue"in t}function Lm(t){return!!t&&"arrayValue"in t}function Q0(t){return!!t&&"nullValue"in t}function Y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vu(t){return!!t&&"mapValue"in t}function jj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Mi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Dj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Jo(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(Jo(this.value))}}function _b(t){const e=[];return Mi(t.fields,(n,r)=>{const i=new Ze([n]);if(vu(r)){const s=_b(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,Z.min(),Z.min(),Z.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,Z.min(),Z.min(),It.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,Z.min(),Z.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.position=e,this.inclusive=n}}function X0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ms(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function J0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{}class Fe extends wb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Oj(e,n,r):n==="array-contains"?new Uj(e,r):n==="in"?new Bj(e,r):n==="not-in"?new zj(e,r):n==="array-contains-any"?new $j(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mj(e,r):new Fj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ms(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends wb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pn(e,n)}matches(e){return Eb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Eb(t){return t.op==="and"}function Tb(t){return Lj(t)&&Eb(t)}function Lj(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function Hf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(Tb(t))return t.filters.map(e=>Hf(e)).join(",");{const e=t.filters.map(n=>Hf(n)).join(",");return`${t.op}(${e})`}}function bb(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&Pn(r.value,i.value)}(t,e):t instanceof pn?function(r,i){return i instanceof pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bb(o,i.filters[a]),!0):!1}(t,e):void J()}function Sb(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(Sb).join(" ,")+"}"}(t):"Filter"}class Oj extends Fe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mj extends Fe{constructor(e,n){super(e,"in",n),this.keys=Ib("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Fj extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=Ib("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ib(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class Uj extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lm(n)&&Na(n.arrayValue,this.value)}}class Bj extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Na(this.value.arrayValue,n)}}class zj extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Na(this.value.arrayValue,n)}}class $j extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Na(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Z0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Wj(t,e,n,r,i,s,o)}function Om(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=n}return e.ue}function Mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J0(t.startAt,e.startAt)&&J0(t.endAt,e.endAt)}function qf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Hj(t,e,n,r,i,s,o,a){return new Zs(t,e,n,r,i,s,o,a)}function Hc(t){return new Zs(t)}function ex(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ab(t){return t.collectionGroup!==null}function Zo(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tt(Ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ra(s,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Ra(Ze.keyField(),r))}return e.ce}function Sn(t){const e=ee(t);return e.le||(e.le=qj(e,Zo(t))),e.le}function qj(t,e){if(t.limitType==="F")return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ra(i.field,s)});const n=t.endAt?new ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ac(t.startAt.position,t.startAt.inclusive):null;return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kf(t,e){const n=t.filters.concat([e]);return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gf(t,e,n){return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qc(t,e){return Mm(Sn(t),Sn(e))&&t.limitType===e.limitType}function Cb(t){return`${Om(Sn(t))}|lt:${t.limitType}`}function Ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sb(i)).join(", ")}]`),Wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Kc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Zo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=X0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Zo(r),i)||r.endAt&&!function(o,a,l){const c=X0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Zo(r),i))}(t,e)}function Kj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pb(t){return(e,n)=>{let r=!1;for(const i of Zo(t)){const s=Gj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Gj(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ms(l,c):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new ke(K.comparator);function tr(){return Qj}const kb=new ke(K.comparator);function Vo(...t){let e=kb;for(const n of t)e=e.insert(n.key,n);return e}function Nb(t){let e=kb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return ea()}function Rb(){return ea()}function ea(){return new eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Yj=new ke(K.comparator),Xj=new tt(K.comparator);function se(...t){let e=Xj;for(const n of t)e=e.add(n);return e}const Jj=new tt(ce);function Zj(){return Jj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function jb(t){return{integerValue:""+t}}function e5(t,e){return kj(e)?jb(e):Fm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function t5(t,e,n){return t instanceof ja?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dm(s)&&(s=Vm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Da?Vb(t,e):t instanceof Va?Lb(t,e):function(i,s){const o=Db(i,s),a=tx(o)+tx(i.Pe);return Wf(o)&&Wf(i.Pe)?jb(a):Fm(i.serializer,a)}(t,e)}function n5(t,e,n){return t instanceof Da?Vb(t,e):t instanceof Va?Lb(t,e):n}function Db(t,e){return t instanceof lc?function(r){return Wf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ja extends Gc{}class Da extends Gc{constructor(e){super(),this.elements=e}}function Vb(t,e){const n=Ob(e);for(const r of t.elements)n.some(i=>Pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Gc{constructor(e){super(),this.elements=e}}function Lb(t,e){let n=Ob(e);for(const r of t.elements)n=n.filter(i=>!Pn(i,r));return{arrayValue:{values:n}}}class lc extends Gc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function tx(t){return Ve(t.integerValue||t.doubleValue)}function Ob(t){return Lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.field=e,this.transform=n}}function i5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Da&&i instanceof Da||r instanceof Va&&i instanceof Va?Os(r.elements,i.elements,Pn):r instanceof lc&&i instanceof lc?Pn(r.Pe,i.Pe):r instanceof ja&&i instanceof ja}(t.transform,e.transform)}class s5{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qc{}function Mb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ub(t.key,dn.none()):new nl(t.key,t.data,dn.none());{const n=t.data,r=It.empty();let i=new tt(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zr(t.key,r,new Dt(i.toArray()),dn.none())}}function o5(t,e,n){t instanceof nl?function(i,s,o){const a=i.value.clone(),l=rx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(i,s,o){if(!xu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=rx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Fb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof nl?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=s.value.clone(),h=ix(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=ix(s.fieldTransforms,l,o),h=o.data;return h.setAll(Fb(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Db(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function nx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Os(r,i,(s,o)=>i5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Qc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zr extends Qc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rx(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,n5(o,a,n[i]))}return r}function ix(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,t5(s,o,e))}return r}class Ub extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l5 extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&o5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Mb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(n,r)=>nx(n,r))&&Os(this.baseMutations,e.baseMutations,(n,r)=>nx(n,r))}}class Um{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return Yj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Um(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ae;function h5(t){switch(t){default:return J();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Bb(t){if(t===void 0)return er("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return J()}}(ae=Oe||(Oe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new _i([4294967295,4294967295],0);function sx(t){const e=f5().encode(t),n=new cb;return n.update(e),new Uint8Array(n.digest())}function ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _i([n,r],0),new _i([i,s],0)]}class Bm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(r<0)throw new Lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=_i.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(_i.fromNumber(r)));return i.compare(p5)===1&&(i=new _i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sx(e),[r,i]=ox(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Bm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=sx(e),[r,i]=ox(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yc(Z.min(),i,new ke(ce),tr(),se())}}class rl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class zb{constructor(e,n){this.targetId=e,this.me=n}}class $b{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ax{constructor(){this.fe=0,this.ge=ux(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new rl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ux()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m5{constructor(e){this.Le=e,this.Be=new Map,this.ke=tr(),this.qe=lx(),this.Qe=new ke(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(qf(s))if(r===0){const o=new K(s.path);this.Ue(n,o,ft.newNoDocument(o,Z.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ni(r).toUint8Array()}catch(l){if(l instanceof xb)return Ls("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bm(o,i,s)}catch(l){return Ls(l instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qf(a.target)){const l=new K(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ft.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Yc(e,n,this.Qe,this.ke,r);return this.ke=tr(),this.qe=lx(),this.Qe=new ke(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ax,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ax),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lx(){return new ke(K.comparator)}function ux(){return new ke(K.comparator)}const g5={asc:"ASCENDING",desc:"DESCENDING"},y5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v5={and:"AND",or:"OR"};class x5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qf(t,e){return t.useProto3Json||Wc(e)?e:{value:e}}function uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _5(t,e){return uc(t,e.toTimestamp())}function In(t){return fe(!!t),Z.fromTimestamp(function(n){const r=zr(n);return new We(r.seconds,r.nanos)}(t))}function zm(t,e){return Yf(t,e).canonicalString()}function Yf(t,e){const n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hb(t){const e=_e.fromString(t);return fe(Yb(e)),e}function Xf(t,e){return zm(t.databaseId,e.path)}function yh(t,e){const n=Hb(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Kb(n))}function qb(t,e){return zm(t.databaseId,e)}function w5(t){const e=Hb(t);return e.length===4?_e.emptyPath():Kb(e)}function Jf(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kb(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cx(t,e,n){return{name:Xf(t,e),fields:n.value.mapValue.fields}}function E5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(fe(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?M.UNKNOWN:Bb(c.code);return new $(h,c.message||"")}(o);n=new $b(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yh(t,r.document.name),s=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):Z.min(),a=new It({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new _u(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yh(t,r.document),s=r.readTime?In(r.readTime):Z.min(),o=ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yh(t,r.document),s=r.removedTargetIds||[];n=new _u([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new d5(i,s),a=r.targetId;n=new zb(a,o)}}return n}function T5(t,e){let n;if(e instanceof nl)n={update:cx(t,e.key,e.value)};else if(e instanceof Ub)n={delete:Xf(t,e.key)};else if(e instanceof Zr)n={update:cx(t,e.key,e.data),updateMask:R5(e.fieldMask)};else{if(!(e instanceof l5))return J();n={verify:Xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function b5(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?In(i.updateTime):In(s);return o.isEqual(Z.min())&&(o=In(s)),new s5(o,i.transformResults||[])}(n,e))):[]}function S5(t,e){return{documents:[qb(t,e.path)]}}function I5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qb(t,i);const s=function(c){if(c.length!==0)return Qb(pn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Gi(m.field),direction:P5(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Qf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function A5(t){let e=w5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=Gb(p);return m instanceof pn&&Tb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(E){return new Ra(Qi(E.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Wc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new ac(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,y=p.values||[];return new ac(y,m)}(n.endAt)),Hj(e,i,o,s,a,"F",l,c)}function C5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qi(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qi(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qi(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qi(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Qi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>Gb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function P5(t){return g5[t]}function k5(t){return y5[t]}function N5(t){return v5[t]}function Gi(t){return{fieldPath:t.canonicalString()}}function Qi(t){return Ze.fromServerFormat(t.fieldPath)}function Qb(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Y0(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NAN"}};if(Q0(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y0(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NAN"}};if(Q0(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(n.field),op:k5(n.op),value:n.value}}}(t):t instanceof pn?function(n){const r=n.getFilters().map(i=>Qb(i));return r.length===1?r[0]:{compositeFilter:{op:N5(n.op),filters:r}}}(t):J()}function R5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.ct=e}}function D5(t){const e=A5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.un=new L5}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Br.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class L5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Us(0)}static kn(){return new Us(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.changes=new eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ta(r.mutation,i,Dt.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=tr();const o=ea(),a=function(){return ea()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Zr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ta(h.mutation,c,h.mutation.getFieldMask(),We.now())):o.set(c.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new M5(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ea();let i=new ke((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Dt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=Rb();h.forEach(m=>{if(!s.has(m)){const y=Mb(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(mi());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,se())).next(h=>({batchId:a,changes:Nb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Vo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Vo();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(p,m){return new Zs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let a=Vo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ta(h.mutation,c,Dt.empty(),We.now()),Kc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:D5(i.bundledQuery),readTime:In(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.overlays=new ke(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=mi(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=mi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=mi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c5(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Tr=new tt(qe.Er),this.dr=new tt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new _e([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new _e([])),r=new qe(n,e),i=new qe(n,e+1);let s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u5(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ce);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new qe(new K(s),0);let a=new tt(ce);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.Mr=e,this.docs=function(){return new ke(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=tr();const o=n.path,a=new K(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ij(Sj(h),r)<=0||(i.has(h.key)||Kc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new H5(this)}getSize(e){return F.resolve(this.size)}}class H5 extends O5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.persistence=e,this.Nr=new eo(n=>Om(n),Mm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $m,this.targetCount=0,this.kr=Us.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jm(0),this.Kr=!1,this.Kr=!0,this.$r=new z5,this.referenceDelegate=e(this),this.Ur=new q5(this),this.indexManager=new V5,this.remoteDocumentCache=function(i){return new W5(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new j5(n),this.Gr=new U5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new $5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new G5(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class G5 extends Cj{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Jr=new $m,this.Yr=null}static Zr(e){return new Wm(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return O2()?8:Pj(yt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Q5;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Io()<=oe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Io()<=oe.DEBUG&&q("QueryEngine","Query:",Ki(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Io()<=oe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}Yi(e,n){if(ex(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gf(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Gf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return ex(n)||i.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(Io()<=oe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(n)),this.rs(e,o,n,bj(i,-1)).next(a=>a))})}ts(e,n){let r=new tt(Pb(e));return n.forEach((i,s)=>{Kc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Io()<=oe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ki(n)),this.Ji.getDocumentsMatchingQuery(e,n,Br.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(ce),this._s=new eo(s=>Om(s),Mm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function J5(t,e,n,r){return new X5(t,e,n,r)}async function Xb(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z5(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let y=F.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(I=>{const C=c.docVersions.get(E);fe(C!==null),I.version.compareTo(C)<0&&(p.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Jb(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eD(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(I,C,_){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let l=tr(),c=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(tD(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function tD(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=tr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function nD(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rD(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zf(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!tl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function dx(t,e,n){const r=ee(t);let i=Z.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=ee(l),m=p._s.get(h);return m!==void 0?F.resolve(p.os.get(m)):p.Ur.getTargetData(c,h)}(r,o,Sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:se())).next(a=>(iD(r,Kj(e),a),{documents:a,Ts:s})))}function iD(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class hx{constructor(){this.activeTargetIds=Zj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sD{constructor(){this.so=new hx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function vh(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class uD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=vh(),l=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ls("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=aD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=vh();return new Promise((o,a)=>{const l=new db;l.setWithCredentials(!0),l.listenOnce(hb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yu.NO_ERROR:const h=l.getResponseJson();q(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case yu.TIMEOUT:q(ut,`RPC '${e}' ${s} timed out`),a(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const p=l.getStatus();if(q(ut,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const E=function(C){const _=C.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(_)>=0?_:M.UNKNOWN}(y.status);a(new $(E,y.message))}else a(new $(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(M.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{q(ut,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=vh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mb(),a=pb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");q(ut,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let m=!1,y=!1;const E=new lD({Io:C=>{y?q(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||(q(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),q(ut,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},To:()=>p.close()}),I=(C,_,x)=>{C.listen(_,b=>{try{x(b)}catch(A){setTimeout(()=>{throw A},0)}})};return I(p,Do.EventType.OPEN,()=>{y||(q(ut,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),I(p,Do.EventType.CLOSE,()=>{y||(y=!0,q(ut,`RPC '${e}' stream ${i} transport closed`),E.So())}),I(p,Do.EventType.ERROR,C=>{y||(y=!0,Ls(ut,`RPC '${e}' stream ${i} transport errored:`,C),E.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),I(p,Do.EventType.MESSAGE,C=>{var _;if(!y){const x=C.data[0];fe(!!x);const b=x,A=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(A){q(ut,`RPC '${e}' stream ${i} received error:`,A);const j=A.status;let D=function(S){const P=Oe[S];if(P!==void 0)return Bb(P)}(j),T=A.message;D===void 0&&(D=M.INTERNAL,T="Unknown error status: "+j+" with message "+A.message),y=!0,E.So(new $(D,T)),p.close()}else q(ut,`RPC '${e}' stream ${i} received:`,x),E.bo(x)}}),I(a,fb.STAT_EVENT,C=>{C.stat===zf.PROXY?q(ut,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===zf.NOPROXY&&q(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){return new x5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cD extends e1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=E5(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?In(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=qf(l)?{documents:S5(s,l)}:{query:I5(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Wb(s,o.resumeToken);const c=Qf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=uc(s,o.snapshotVersion.toTimestamp());const c=Qf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=C5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jf(this.serializer),n.removeTarget=e,this.a_(n)}}class dD extends e1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=b5(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>T5(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Yf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Yf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(er(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Fi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.L_.add(4),await il(c),c.q_.set("Unknown"),c.L_.delete(4),await Jc(c)}(this))})}),this.q_=new fD(r,i)}}async function Jc(t){if(Fi(t))for(const e of t.B_)await e(!0)}async function il(t){for(const e of t.B_)await e(!1)}function t1(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qm(n)?Gm(n):to(n).r_()&&Km(n,e))}function qm(t,e){const n=ee(t),r=to(n);n.N_.delete(e),r.r_()&&n1(n,e),n.N_.size===0&&(r.r_()?r.o_():Fi(n)&&n.q_.set("Unknown"))}function Km(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(t).A_(e)}function n1(t,e){t.Q_.xe(e),to(t).R_(e)}function Gm(t){t.Q_=new m5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),to(t).start(),t.q_.v_()}function Qm(t){return Fi(t)&&!to(t).n_()&&t.N_.size>0}function Fi(t){return ee(t).L_.size===0}function r1(t){t.Q_=void 0}async function mD(t){t.q_.set("Online")}async function gD(t){t.N_.forEach((e,n)=>{Km(t,e)})}async function yD(t,e){r1(t),Qm(t)?(t.q_.M_(e),Gm(t)):t.q_.set("Unknown")}async function vD(t,e,n){if(t.q_.set("Online"),e instanceof $b&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cc(t,r)}else if(e instanceof _u?t.Q_.Ke(e):e instanceof zb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await Jb(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),n1(s,l);const p=new Sr(h.target,l,c,h.sequenceNumber);Km(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await cc(t,r)}}async function cc(t,e,n){if(!tl(e))throw e;t.L_.add(1),await il(t),t.q_.set("Offline"),n||(n=()=>Jb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jc(t)})}function i1(t,e){return e().catch(n=>cc(t,n,e))}async function Zc(t){const e=ee(t),n=$r(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xD(e);)try{const i=await nD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,_D(e,i)}catch(i){await cc(e,i)}s1(e)&&o1(e)}function xD(t){return Fi(t)&&t.O_.length<10}function _D(t,e){t.O_.push(e);const n=$r(t);n.r_()&&n.V_&&n.m_(e.mutations)}function s1(t){return Fi(t)&&!$r(t).n_()&&t.O_.length>0}function o1(t){$r(t).start()}async function wD(t){$r(t).p_()}async function ED(t){const e=$r(t);for(const n of t.O_)e.m_(n.mutations)}async function TD(t,e,n){const r=t.O_.shift(),i=Um.from(r,e,n);await i1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Zc(t)}async function bD(t,e){e&&$r(t).V_&&await async function(r,i){if(function(o){return h5(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();$r(r).s_(),await i1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Zc(r)}}(t,e),s1(t)&&o1(t)}async function px(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Fi(n);n.L_.add(3),await il(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jc(n)}async function SD(t,e){const n=ee(t);e?(n.L_.delete(2),await Jc(n)):e||(n.L_.add(2),await il(n),n.q_.set("Unknown"))}function to(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new cD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:mD.bind(null,t),Ro:gD.bind(null,t),mo:yD.bind(null,t),d_:vD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qm(t)?Gm(t):t.q_.set("Unknown")):(await t.K_.stop(),r1(t))})),t.K_}function $r(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new dD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wD.bind(null,t),mo:bD.bind(null,t),f_:ED.bind(null,t),g_:TD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zc(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ym(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(er("AsyncQueue",`${e}: ${t}`),tl(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Vo(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new Ss(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.W_=new ke(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bs(e,n,Ss.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class AD{constructor(){this.queries=gx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=gx(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function gx(){return new eo(t=>Cb(t),qc)}async function Jm(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new ID,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Xm(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&eg(n)}async function Zm(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CD(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&eg(n)}function PD(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function eg(t){t.Y_.forEach(e=>{e.next()})}var ep,yx;(yx=ep||(ep={})).ea="default",yx.Cache="cache";class tg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class kD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=Pb(e),this.Ra=new Ss(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new mx,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),y=Kc(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?E!==I&&(r.track({type:3,doc:y}),C=!0):this.ga(m,y)||(r.track({type:2,doc:y}),C=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),C=!0):m&&!y&&(r.track({type:1,doc:m}),C=!0,(l||c)&&(a=!0)),C&&(y?(o=o.add(y),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(y,E){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return I(y)-I(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Bs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new l1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new a1(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ND{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RD{constructor(e){this.key=e,this.va=!1}}class jD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new eo(a=>Cb(a),qc),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(K.comparator),this.Na=new Map,this.La=new $m,this.Ba={},this.ka=new Map,this.qa=Us.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DD(t,e,n=!0){const r=p1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await u1(r,e,n,!0),i}async function VD(t,e){const n=p1(t);await u1(n,e,!0,!1)}async function u1(t,e,n,r){const i=await rD(t.localStore,Sn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await LD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&t1(t.remoteStore,i),a}async function LD(t,e,n,r,i){t.Ka=(p,m,y)=>async function(I,C,_,x){let b=C.view.ma(_);b.ns&&(b=await dx(I.localStore,C.query,!1).then(({documents:T})=>C.view.ma(T,b)));const A=x&&x.targetChanges.get(C.targetId),j=x&&x.targetMismatches.get(C.targetId)!=null,D=C.view.applyChanges(b,I.isPrimaryClient,A,j);return xx(I,C.targetId,D.wa),D.snapshot}(t,p,m,y);const s=await dx(t.localStore,e,!0),o=new kD(e,s.Ts),a=o.ma(s.documents),l=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);xx(t,n,c.wa);const h=new ND(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function OD(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qm(r.remoteStore,i.targetId),tp(r,i.targetId)}).catch(el)):(tp(r,i.targetId),await Zf(r.localStore,i.targetId,!0))}async function MD(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qm(n.remoteStore,r.targetId))}async function FD(t,e,n){const r=qD(t);try{const i=await function(o,a){const l=ee(o),c=We.now(),h=a.reduce((y,E)=>y.add(E.key),se());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=tr(),I=se();return l.cs.getEntries(y,h).next(C=>{E=C,E.forEach((_,x)=>{x.isValidDocument()||(I=I.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(C=>{p=C;const _=[];for(const x of a){const b=a5(x,p.get(x.key).overlayedDocument);b!=null&&_.push(new Zr(x.key,b,_b(b.value.mapValue),dn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,_,a)}).next(C=>{m=C;const _=C.applyToLocalDocumentSet(p,I);return l.documentOverlayCache.saveOverlays(y,C.batchId,_)})}).then(()=>({batchId:m.batchId,changes:Nb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ke(ce)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await sl(r,i.changes),await Zc(r.remoteStore)}catch(i){const s=Xm(i,"Failed to persist write");n.reject(s)}}async function c1(t,e){const n=ee(t);try{const r=await eD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?fe(o.va):i.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await sl(n,r,e)}catch(r){await el(r)}}function vx(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(a)&&(c=!0)}),c&&eg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UD(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke(K.comparator);o=o.insert(s,ft.newNoDocument(s,Z.min()));const a=se().add(s),l=new Yc(Z.min(),new Map,new ke(ce),o,a);await c1(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),ng(r)}else await Zf(r.localStore,e,!1).then(()=>tp(r,e,n)).catch(el)}async function BD(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await Z5(n.localStore,e);h1(n,r,null),d1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sl(n,i)}catch(i){await el(i)}}async function zD(t,e,n){const r=ee(t);try{const i=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(fe(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);h1(r,e,n),d1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sl(r,i)}catch(i){await el(i)}}function d1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function h1(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||f1(t,r)})}function f1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(qm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ng(t))}function xx(t,e,n){for(const r of n)r instanceof a1?(t.La.addReference(r.key,e),$D(t,r)):r instanceof l1?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||f1(t,r.key)):J()}function $D(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),ng(t))}function ng(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new RD(n)),t.Oa=t.Oa.insert(n,r),t1(t.remoteStore,new Sr(Sn(Hc(n.path)),r,"TargetPurposeLimboResolution",jm.oe))}}async function sl(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=Hm.Wi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(c,m=>F.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>F.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!tl(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const y=h.os.get(m),E=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,I)}}}(r.localStore,s))}async function WD(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Xb(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new $(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sl(n,r.hs)}}function HD(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function p1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UD.bind(null,e),e.Ca.d_=CD.bind(null,e.eventManager),e.Ca.$a=PD.bind(null,e.eventManager),e}function qD(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return J5(this.persistence,new Y5,e.initialUser,this.serializer)}Ga(e){return new K5(Wm.Zr,this.serializer)}Wa(e){return new sD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dc.provider={build:()=>new dc};class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WD.bind(null,this.syncEngine),await SD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AD}()}createDatastore(e){const n=Xc(e.databaseInfo.databaseId),r=function(s){return new uD(s)}(e.databaseInfo);return function(s,o,a,l){return new hD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new pD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vx(this.syncEngine,n,0),function(){return fx.D()?new fx:new oD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const p=new jD(i,s,o,a,l,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await il(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=yb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _h(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _x(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GD(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>px(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>px(e.remoteStore,i)),t._onlineComponents=e}async function GD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await _h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await _h(t,new dc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await _h(t,new dc);return t._offlineComponents}async function m1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await _x(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await _x(t,new np))),t._onlineComponents}function QD(t){return m1(t).then(e=>e.syncEngine)}async function hc(t){const e=await m1(t),n=e.eventManager;return n.onListen=DD.bind(null,e.syncEngine),n.onUnlisten=OD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MD.bind(null,e.syncEngine),n}function YD(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new rg({next:m=>{h.Za(),o.enqueueAndForget(()=>Zm(s,p));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new tg(Hc(a.path),h,{includeMetadataChanges:!0,_a:!0});return Jm(s,p)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}function XD(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new rg({next:m=>{h.Za(),o.enqueueAndForget(()=>Zm(s,p)),m.fromCache&&l.source==="server"?c.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new tg(a,h,{includeMetadataChanges:!0,_a:!0});return Jm(s,p)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JD(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ex(t){if(!K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tx(t){if(K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ed(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mj;switch(r.type){case"firstParty":return new xj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wx.get(n);r&&(q("ComponentProvider","Removing Datastore"),wx.delete(n),r.terminate())}(this),Promise.resolve()}}function ZD(t,e,n,r={}){var i;const s=(t=Lt(t,td))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=dt.MOCK_USER;else{a=k2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new dt(c)}t._authCredentials=new gj(new gb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}}class Mr extends ei{constructor(e,n,r){super(e,n,Hc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new K(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function Vn(t,e,...n){if(t=He(t),y1("collection","path",e),t instanceof td){const r=_e.fromString(e,...n);return Tx(r),new Mr(t,null,r)}{if(!(t instanceof mt||t instanceof Mr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Tx(r),new Mr(t.firestore,null,r)}}function Oo(t,e,...n){if(t=He(t),arguments.length===1&&(e=yb.newId()),y1("doc","path",e),t instanceof td){const r=_e.fromString(e,...n);return Ex(r),new mt(t,null,new K(r))}{if(!(t instanceof mt||t instanceof Mr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Ex(r),new mt(t.firestore,t instanceof Mr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zb(this,"async_queue_retry"),this.Vu=()=>{const r=xh();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ym.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Ix(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wr extends td{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Sx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sx(e),this._firestoreClient=void 0,await e}}}function eV(t,e){const n=typeof t=="object"?t:AT(),r=typeof t=="string"?t:"(default)",i=Em(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=C2("firestore");s&&ZD(i,...s)}return i}function nd(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tV(t),t._firestoreClient}function tV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new Rj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,g1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(rt.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^__.*__$/;class rV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class v1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class og{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(x1(this.Cu)&&nV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xc(e)}Qu(e,n,r,i=!1){return new og({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sd(t){const e=t._freezeSettings(),n=Xc(t._databaseId);return new iV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _1(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);lg("Data must be an object, but it was:",o,r);const a=w1(r,o);let l,c;if(s.merge)l=new Dt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=rp(e,p,n);if(!o.contains(m))throw new $(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T1(h,m)||h.push(m)}l=new Dt(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new rV(new It(a),l,c)}class od extends id{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}class ag extends id{_toFieldTransform(e){return new r5(e.path,new ja)}isEqual(e){return e instanceof ag}}function sV(t,e,n,r){const i=t.Qu(1,e,n);lg("Data must be an object, but it was:",i,r);const s=[],o=It.empty();Mi(r,(l,c)=>{const h=ug(e,l,n);c=He(c);const p=i.Nu(h);if(c instanceof od)s.push(h);else{const m=ol(c,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Dt(s);return new v1(o,a,i.fieldTransforms)}function oV(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[rp(e,r,n)],l=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(rp(e,s[m])),l.push(s[m+1]);const c=[],h=It.empty();for(let m=a.length-1;m>=0;--m)if(!T1(c,a[m])){const y=a[m];let E=l[m];E=He(E);const I=o.Nu(y);if(E instanceof od)c.push(y);else{const C=ol(E,I);C!=null&&(c.push(y),h.set(y,C))}}const p=new Dt(c);return new v1(h,p,o.fieldTransforms)}function aV(t,e,n,r=!1){return ol(n,t.Qu(r?4:3,e))}function ol(t,e){if(E1(t=He(t)))return lg("Unsupported field value:",e,t),w1(t,e);if(t instanceof id)return function(r,i){if(!x1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ol(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:uc(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uc(i.serializer,s)}}if(r instanceof ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zs)return{bytesValue:Wb(i.serializer,r._byteString)};if(r instanceof mt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Fm(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ed(r)}`)}(t,e)}function w1(t,e){const n={};return vb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(t,(r,i)=>{const s=ol(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function E1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof ig||t instanceof zs||t instanceof mt||t instanceof id||t instanceof sg)}function lg(t,e,n){if(!E1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ed(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rp(t,e,n){if((e=He(e))instanceof rd)return e._internalPath;if(typeof e=="string")return ug(t,e);throw fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const lV=new RegExp("[~\\*/\\[\\]]");function ug(t,e,n){if(e.search(lV)>=0)throw fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rd(...e.split("."))._internalPath}catch{throw fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(M.INVALID_ARGUMENT,a+t+l)}function T1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ad("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uV extends b1{data(){return super.data()}}function ad(t,e){return typeof e=="string"?ug(t,e):e instanceof rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class I1 extends cg{}function Ql(t,e,...n){let r=[];e instanceof cg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof dg).length,a=s.filter(l=>l instanceof ld).length;if(o>1||o>0&&a>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ld extends I1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ld(e,n,r)}_apply(e){const n=this._parse(e);return A1(e._query,n),new ei(e.firestore,e.converter,Kf(e._query,n))}_parse(e){const n=sd(e.firestore);return function(s,o,a,l,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cx(p,h);const y=[];for(const E of p)y.push(Ax(l,s,E));m={arrayValue:{values:y}}}else m=Ax(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cx(p,h),m=aV(a,o,p,h==="in"||h==="not-in");return Fe.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cV(t,e,n){const r=e,i=ad("where",t);return ld._create(i,r,n)}class dg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)A1(o,l),o=Kf(o,l)}(e._query,n),new ei(e.firestore,e.converter,Kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends I1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ra(s,o)}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function dV(t,e="asc"){const n=e,r=ad("orderBy",t);return hg._create(r,n)}function Ax(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!K.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return G0(t,new K(r))}if(n instanceof mt)return G0(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(n)}.`)}function Cx(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hV{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new sg(s)}convertGeoPoint(e){return new ig(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=zr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);fe(Yb(r));const i=new ka(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class P1 extends b1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ad("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wu extends P1{data(e={}){return super.data(e)}}class k1{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Mo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wu(this._firestore,this._userDataWriter,r.key,r,new Mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:fV(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){t=Lt(t,mt);const e=Lt(t.firestore,Wr);return YD(nd(e),t._key).then(n=>N1(e,t,n))}class fg extends hV{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function pV(t){t=Lt(t,ei);const e=Lt(t.firestore,Wr),n=nd(e),r=new fg(e);return S1(t._query),XD(n,t._query).then(i=>new k1(e,r,t,i))}function mV(t,e,n){t=Lt(t,mt);const r=Lt(t.firestore,Wr),i=C1(t.converter,e);return pg(r,[_1(sd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dn.none())])}function Px(t,e,n,...r){t=Lt(t,mt);const i=Lt(t.firestore,Wr),s=sd(i);let o;return o=typeof(e=He(e))=="string"||e instanceof rd?oV(s,"updateDoc",t._key,e,n,r):sV(s,"updateDoc",t._key,e),pg(i,[o.toMutation(t._key,dn.exists(!0))])}function Yl(t,e){const n=Lt(t.firestore,Wr),r=Oo(t),i=C1(t.converter,e);return pg(n,[_1(sd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function Eh(t,...e){var n,r,i;t=He(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ix(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ix(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,h;if(t instanceof mt)c=Lt(t.firestore,Wr),h=Hc(t._key.path),l={next:p=>{e[o]&&e[o](N1(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Lt(t,ei);c=Lt(p.firestore,Wr),h=p._query;const m=new fg(c);l={next:y=>{e[o]&&e[o](new k1(c,m,p,y))},error:e[o+1],complete:e[o+2]},S1(t._query)}return function(m,y,E,I){const C=new rg(I),_=new tg(y,C,E);return m.asyncQueue.enqueueAndForget(async()=>Jm(await hc(m),_)),()=>{C.Za(),m.asyncQueue.enqueueAndForget(async()=>Zm(await hc(m),_))}}(nd(c),h,a,l)}function pg(t,e){return function(r,i){const s=new Hn;return r.asyncQueue.enqueueAndForget(async()=>FD(await QD(r),i,s)),s.promise}(nd(t),e)}function N1(t,e,n){const r=n.docs.get(e._key),i=new fg(t);return new P1(t,i,e._key,r,new Mo(n.hasPendingWrites,n.fromCache),e.converter)}function tn(){return new ag("serverTimestamp")}(function(e,n=!0){(function(i){Js=i})(Ys),Vs(new Ai("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wr(new yj(r.getProvider("auth-internal")),new wj(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Or($0,"4.7.3",e),Or($0,"4.7.3","esm2017")})();const Is={apiKey:"AIzaSyChItXpa02_QJXSJV3ohKjUNNi8xdW8Unw",authDomain:"budget-6378f.firebaseapp.com",projectId:"budget-6378f",storageBucket:"budget-6378f.firebasestorage.app",messagingSenderId:"267770745885",appId:"1:267770745885:web:a15384f0d1782c4c3222f4"};console.log("🔧 Initializing Firebase...");console.log("Config check:",{hasApiKey:!!Is.apiKey,hasProjectId:!!Is.projectId,projectId:Is.projectId});if(!Is.apiKey||!Is.projectId)throw console.error("❌ Firebase configuration is incomplete. Please check your firebaseConfig."),new Error("Firebase configuration is incomplete");let Eu,us,rn;try{console.log("🚀 Creating Firebase app..."),Eu=IT(Is),console.log("🔐 Initializing Auth..."),us=fj(Eu),console.log("🗄️ Initializing Firestore..."),rn=eV(Eu),console.log("✅ Firebase initialized successfully")}catch(t){throw console.error("❌ Firebase initialization error:",t),t.code==="auth/network-request-failed"?console.error("🚫 Network error - check your internet connection"):t.code==="auth/app-not-authorized"&&console.error("🚫 App not authorized - check Firebase config"),new Error(`Failed to initialize Firebase: ${t.message}`)}const gV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Eu},get auth(){return us},get db(){return rn}},Symbol.toStringTag,{value:"Module"})),R1=R.createContext(null);function yV({children:t}){console.log("🔐 AuthProvider initializing...");const[e,n]=R.useState(null),[r,i]=R.useState(!0),[s,o]=R.useState(null);R.useEffect(()=>{console.log("🔐 Setting up auth state listener...");try{const p=tR(us,m=>{console.log("🔐 Auth state changed:",m?`User: ${m.email}`:"No user"),n(m),i(!1),o(null)},m=>{console.error("❌ Auth state change error:",m),o(m.message),i(!1)});return()=>{console.log("🔐 Cleaning up auth listener"),p()}}catch(p){console.error("❌ Auth initialization error:",p),o("Ошибка инициализации аутентификации"),i(!1)}},[]);const a=async(p,m)=>{try{return o(null),await JN(us,p,m)}catch(y){throw o(y.message),y}},l=async(p,m)=>{try{return o(null),await XN(us,p,m)}catch(y){throw o(y.message),y}},c=async()=>{try{return o(null),localStorage.clear(),await nR(us)}catch(p){throw o(p.message),p}};if(s)return d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"card p-8 max-w-md text-center space-y-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"Ошибка подключения"}),d.jsx("p",{className:"text-zinc-400",children:s}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Попробовать снова"})]})});const h={user:e,loading:r,error:s,login:a,register:l,logout:c};return d.jsx(R1.Provider,{value:h,children:t})}function kn(){return R.useContext(R1)}const j1=R.createContext(null);function vV({children:t}){const{user:e}=kn(),[n,r]=R.useState(localStorage.getItem("budgetId")||null),[i,s]=R.useState(localStorage.getItem("budgetCode")||""),[o,a]=R.useState([]),[l,c]=R.useState([]),[h,p]=R.useState([]),[m,y]=R.useState([]),[E,I]=R.useState(localStorage.getItem("currency")||"PLN"),[C,_]=R.useState({PLN:1,USD:.25,UAH:9.2}),[x,b]=R.useState(localStorage.getItem("theme")||"dark");R.useEffect(()=>{document.documentElement.classList.toggle("dark",x==="dark"),localStorage.setItem("theme",x)},[x]);const A=()=>b(S=>S==="dark"?"light":"dark");R.useEffect(()=>{localStorage.setItem("currency",E)},[E]),R.useEffect(()=>{if(!e||!n){console.log("No user or budgetId, skipping data load");return}console.log("Loading budget data...",{budgetId:n,userId:e.uid}),(async()=>{try{const P=await wh(Oo(rn,"budgets",n));if(!P.exists()){console.error("Budget not found"),r(null),localStorage.removeItem("budgetId");return}if(!P.data().members[e.uid]){console.error("No access to budget"),r(null),localStorage.removeItem("budgetId");return}const V=Eh(Ql(Vn(rn,"budgets",n,"profiles")),pe=>{const Ue=pe.docs.map(ne=>({id:ne.id,...ne.data()}));console.log("Profiles loaded:",Ue.length),a(Ue)},pe=>console.error("Error loading profiles:",pe)),k=Eh(Ql(Vn(rn,"budgets",n,"categories")),pe=>{const Ue=pe.docs.map(ne=>({id:ne.id,...ne.data()}));console.log("Categories loaded:",Ue.length),c(Ue)},pe=>console.error("Error loading categories:",pe)),re=Eh(Ql(Vn(rn,"budgets",n,"operations"),dV("date","desc")),pe=>{const Ue=pe.docs.map(ne=>({id:ne.id,...ne.data()}));y(Ue)});return()=>{V(),k(),re()}}catch(P){console.error("Error checking budget access:",P)}})()},[e,n]);function j(S=6){const P="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let N="";for(let V=0;V<S;V++)N+=P[Math.floor(Math.random()*P.length)];return N}async function D(){if(!e)throw console.error("No user found"),new Error("Необходима авторизация");try{r(null),s(""),localStorage.removeItem("budgetId"),localStorage.removeItem("budgetCode");const S=j(6),P=Oo(Vn(rn,"budgets"));if(console.log("Creating budget...",{userId:e.uid,budgetId:P.id}),await mV(P,{owner:e.uid,createdAt:tn(),currency:"PLN",code:S,members:{[e.uid]:!0}}),!(await wh(P)).exists())throw console.error("Budget creation failed"),new Error("Не удалось создать бюджет");await Yl(Vn(P,"profiles"),{name:e.email.split("@")[0],userId:e.uid,createdAt:tn(),online:!0,lastSeen:tn(),lastLogin:tn()}),console.log("Profile created, creating categories...");const V=[{name:"Зарплата",emoji:"💰",type:"income",limit:0},{name:"Фриланс",emoji:"💻",type:"income",limit:0},{name:"Подарки",emoji:"🎁",type:"income",limit:0},{name:"Еда",emoji:"🍕",type:"expense",limit:0},{name:"Транспорт",emoji:"🚗",type:"expense",limit:0},{name:"Развлечения",emoji:"🎮",type:"expense",limit:0},{name:"Покупки",emoji:"🛒",type:"expense",limit:0},{name:"Здоровье",emoji:"🏥",type:"expense",limit:0},{name:"Прочее",emoji:"📝",type:"both",limit:0}];for(const k of V)await Yl(Vn(P,"categories"),{...k,createdAt:tn()});return r(P.id),s(S),localStorage.setItem("budgetId",P.id),localStorage.setItem("budgetCode",S),console.log("Budget creation completed successfully"),P.id}catch(S){throw console.error("Error creating budget:",S),S}}async function T(S){if(!e)throw new Error("Необходима авторизация");try{const P=(S||"").trim();if(!P)throw new Error("Пустой ID/код бюджета");const N=await wh(Oo(rn,"budgets",P));if(N.exists()){const re=N.data();return await Px(Oo(rn,"budgets",N.id),{[`members.${e.uid}`]:!0}),await Yl(Vn(rn,"budgets",N.id,"profiles"),{name:e.email.split("@")[0],userId:e.uid,createdAt:tn(),online:!0,lastSeen:tn(),lastLogin:tn()}),r(N.id),s((re==null?void 0:re.code)||""),localStorage.setItem("budgetId",N.id),re!=null&&re.code&&localStorage.setItem("budgetCode",re.code),N.id}const V=Ql(Vn(rn,"budgets"),cV("code","==",P.toUpperCase())),k=await pV(V);if(!k.empty){const re=k.docs[0],pe=re.data();return await Px(re.ref,{[`members.${e.uid}`]:!0}),await Yl(Vn(re.ref,"profiles"),{name:e.email.split("@")[0],userId:e.uid,createdAt:tn(),online:!0,lastSeen:tn(),lastLogin:tn()}),r(re.id),s((pe==null?void 0:pe.code)||""),localStorage.setItem("budgetId",re.id),pe!=null&&pe.code&&localStorage.setItem("budgetCode",pe.code),re.id}throw new Error("Бюджет не найден")}catch(P){throw console.error("Error joining budget:",P),P}}function v(S){const P=C[E]||1;return Number(S)*P}return d.jsx(j1.Provider,{value:{budgetId:n,budgetCode:i,profiles:o,categories:l,goals:h,operations:m,currency:E,theme:x,rates:C,createBudget:D,joinBudget:T,convert:v,setCurrency:I,toggleTheme:A},children:t})}function mn(){return R.useContext(j1)}function xV(){var m,y,E;const{user:t,logout:e}=kn(),{budgetId:n,theme:r,toggleTheme:i}=mn(),[s,o]=R.useState(!1),a=Ka(),l=Li(),c=l.pathname==="/login"||l.pathname==="/register";R.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const h=async()=>{try{await e(),a("/login")}catch(I){console.error("Logout error:",I)}},p=[{to:"/",label:"Главная"},{to:"/categories",label:"Категории"},{to:"/limits",label:"Лимиты"},{to:"/goals",label:"Цели"},{to:"/operations",label:"Операции"},{to:"/budget",label:"Семья"},{to:"/settings",label:"Настройки"}];return d.jsxs(d.Fragment,{children:[d.jsx("header",{className:"sticky top-0 z-[100] transition-all duration-300",style:{background:`
          linear-gradient(to bottom, 
            rgba(10, 10, 15, 0.95) 0%, 
            rgba(10, 10, 15, 0.8) 100%
          )
        `,backdropFilter:"blur(20px) saturate(150%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsxs("div",{className:"container-custom flex items-center justify-between py-4",children:[d.jsxs(ws,{to:"/",className:"flex items-center gap-3 text-xl font-bold group",children:[d.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-primary flex items-center justify-center text-white shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-300",children:"💸"}),d.jsx("span",{className:"hidden sm:inline bg-gradient-primary bg-clip-text text-transparent group-hover:scale-105 transition-transform duration-300",children:"Budget Buddy"})]}),!c&&d.jsx("nav",{className:"hidden lg:flex items-center gap-2 p-2 rounded-2xl bg-white/5 backdrop-blur-lg border border-white/10",children:p.map(I=>d.jsxs(d0,{to:I.to,className:({isActive:C})=>`relative h-10 flex items-center px-4 rounded-xl font-medium transition-all duration-300 ${C?"text-white bg-gradient-to-r from-indigo-500/30 to-purple-500/30 shadow-lg shadow-indigo-500/20":"text-zinc-400 hover:text-white hover:bg-white/5"}`,children:[d.jsx("span",{className:"relative z-10",children:I.label}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]},I.to))}),d.jsxs("div",{className:"flex items-center gap-3",children:[t&&n&&!c&&d.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-2 rounded-xl text-sm",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),d.jsx("span",{className:"text-zinc-400",children:"Семья:"}),d.jsx("span",{className:"text-white font-medium",children:n.slice(-6)})]}),!c&&d.jsx("button",{onClick:i,className:"hidden md:flex h-10 w-10 items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group bg-white/5 backdrop-blur-lg border border-white/10",children:d.jsx("span",{className:"text-lg group-hover:rotate-180 transition-transform duration-500 block",children:r==="dark"?"☀️":"🌙"})}),t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"hidden md:flex items-center h-10 gap-3 px-4 rounded-xl hover:scale-105 transition-all duration-300 group cursor-pointer bg-white/5 backdrop-blur-lg border border-white/10",children:[d.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-primary flex items-center justify-center text-white text-sm font-bold shadow-lg group-hover:rotate-12 transition-transform duration-300",children:(m=t.email)==null?void 0:m.charAt(0).toUpperCase()}),d.jsx("span",{className:"text-sm text-zinc-300 max-w-32 truncate",children:t.email})]}),d.jsx("button",{onClick:h,className:"hidden md:flex h-10 w-10 items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group hover:bg-red-500/20 bg-white/5 backdrop-blur-lg border border-white/10",title:"Выйти",children:d.jsx("span",{className:"text-lg group-hover:rotate-12 transition-transform duration-300 block",children:"🚪"})})]}):!c&&d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ws,{to:"/login",className:"px-4 py-2 rounded-xl font-medium text-zinc-300 hover:text-white transition-all duration-300 hover:scale-105",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Войти"}),d.jsx(ws,{to:"/register",className:"px-4 py-2 rounded-xl font-medium text-white transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"},children:"Регистрация"})]}),!c&&d.jsx("button",{onClick:()=>o(!s),className:"lg:hidden h-10 w-10 flex items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group bg-white/5 backdrop-blur-lg border border-white/10",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsx("span",{className:"text-lg group-hover:rotate-180 transition-transform duration-300 block",children:s?"✕":"☰"})})]})]})}),s&&!c&&oT.createPortal(d.jsxs("div",{className:"lg:hidden fixed inset-0 z-[9999]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md",onClick:()=>o(!1)}),d.jsx("div",{className:"absolute top-0 right-0 w-80 h-full overflow-y-auto",style:{background:`
              linear-gradient(to bottom, 
                rgba(10, 10, 15, 0.98) 0%, 
                rgba(25, 25, 35, 0.95) 100%
              )
            `,backdropFilter:"blur(30px) saturate(150%)",borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-primary flex items-center justify-center text-white",children:"💸"}),d.jsx("h3",{className:"text-lg font-semibold bg-gradient-primary bg-clip-text text-transparent",children:"Budget Buddy"})]}),d.jsx("button",{onClick:()=>o(!1),className:"p-2 rounded-xl hover:scale-110 transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:d.jsx("span",{className:"text-lg",children:"✕"})})]}),t&&d.jsxs("div",{className:"p-4 rounded-2xl",style:{background:`
                    linear-gradient(135deg, 
                      rgba(255, 255, 255, 0.1) 0%, 
                      rgba(255, 255, 255, 0.05) 100%
                    )
                  `,backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg shadow-lg",children:(y=t.email)==null?void 0:y.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-white text-sm",children:t.email}),d.jsx("div",{className:"text-xs text-zinc-400",children:"Активный пользователь"})]})]}),n&&d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),d.jsx("span",{className:"text-zinc-400",children:"Семья:"}),d.jsx("span",{className:"text-white font-medium",children:n.slice(-6)})]})]}),d.jsxs("nav",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs uppercase tracking-wider text-zinc-500 font-medium px-2",children:"Навигация"}),p.map((I,C)=>d.jsxs(d0,{to:I.to,onClick:()=>o(!1),className:({isActive:_})=>`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 group relative overflow-hidden ${_?"text-white":"text-zinc-400 hover:text-white"}`,style:({isActive:_})=>_?{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3))",backdropFilter:"blur(15px)",border:"1px solid rgba(99, 102, 241, 0.3)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.2)"}:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsxs("span",{className:"relative z-10 text-lg",children:[I.to==="/"&&"🏠",I.to==="/categories"&&"📂",I.to==="/limits"&&"💰",I.to==="/goals"&&"🎯",I.to==="/operations"&&"💱",I.to==="/budget"&&"👨‍👩‍👧‍👦",I.to==="/settings"&&"⚙️"]}),d.jsx("span",{className:"relative z-10",children:I.label}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]},I.to))]}),t&&d.jsx("div",{className:"pt-4 border-t border-white/10",children:d.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-primary flex items-center justify-center text-white font-bold shadow-lg",children:(E=t.email)==null?void 0:E.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white font-medium",children:t.email}),d.jsx("span",{className:"text-sm text-zinc-400",children:"Онлайн"})]})]})})]})})]}),document.body)]})}function D1({text:t="Загрузка..."}){return d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),d.jsx("p",{className:"text-zinc-400",children:t})]})})}const Be=(t,e,n="sine",r=.1)=>{const i=new(window.AudioContext||window.webkitAudioContext),s=i.createOscillator(),o=i.createGain();s.connect(o),o.connect(i.destination),s.frequency.setValueAtTime(t,i.currentTime),s.type=n,o.gain.setValueAtTime(0,i.currentTime),o.gain.linearRampToValueAtTime(r,i.currentTime+.01),o.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),s.start(i.currentTime),s.stop(i.currentTime+e)},kx={success:()=>{Be(523.25,.15,"sine",.08),setTimeout(()=>Be(659.25,.15,"sine",.06),50),setTimeout(()=>Be(783.99,.2,"sine",.04),100)},add:()=>{Be(440,.1,"sine",.06),setTimeout(()=>Be(554.37,.1,"sine",.04),80)},delete:()=>{Be(554.37,.1,"square",.05),setTimeout(()=>Be(440,.15,"square",.03),80)},error:()=>{Be(220,.2,"sawtooth",.04),Be(233.08,.2,"sawtooth",.04)},click:()=>{Be(800,.05,"sine",.03)},notification:()=>{Be(523.25,.1,"sine",.04),setTimeout(()=>Be(659.25,.1,"sine",.03),100)},coin:()=>{Be(659.25,.08,"sine",.06),setTimeout(()=>Be(783.99,.08,"sine",.04),40),setTimeout(()=>Be(1046.5,.12,"sine",.03),80)},goal:()=>{Be(523.25,.1,"sine",.05),setTimeout(()=>Be(659.25,.1,"sine",.05),60),setTimeout(()=>Be(783.99,.1,"sine",.05),120),setTimeout(()=>Be(1046.5,.2,"sine",.04),180)}},ud=()=>({playSound:R.useCallback(e=>{if(localStorage.getItem("soundEnabled")!=="false")try{kx[e]&&kx[e]()}catch(r){console.warn("Не удалось воспроизвести звук:",r)}},[])});function _V(){const{profiles:t,assignProfileToUser:e,createProfileForUser:n}=mn(),{user:r}=kn(),{playSound:i}=ud(),[s,o]=R.useState(!1),[a,l]=R.useState(""),c=t.filter(m=>!m.userId),h=async m=>{try{i("click"),await e(m,r.uid),i("success")}catch(y){console.error("Error assigning profile:",y),i("error")}},p=async()=>{if(!a.trim()){i("error");return}try{i("click"),await n(a.trim()),i("success"),o(!1),l("")}catch(m){console.error("Error creating profile:",m),i("error")}};return d.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full p-8 rounded-3xl",style:{background:`
            linear-gradient(145deg, 
              rgba(255, 255, 255, 0.1) 0%, 
              rgba(255, 255, 255, 0.05) 100%
            )
          `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"text-4xl mb-4",children:"👤"}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Выберите профиль"}),d.jsx("p",{className:"text-zinc-400",children:"Привяжите свой аккаунт к профилю в семье"})]}),c.length>0&&d.jsxs("div",{className:"space-y-3 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Доступные профили:"}),c.map(m=>d.jsx("button",{onClick:()=>h(m.id),className:"w-full p-4 rounded-xl text-left transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1))",border:"1px solid rgba(59, 130, 246, 0.2)"},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:m.name.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-white font-medium",children:m.name}),m.online&&d.jsx("div",{className:"flex items-center",children:d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})})]}),d.jsx("div",{className:"text-sm text-zinc-400",children:m.lastSeen?m.online?"Онлайн":`Был(а) в сети ${new Date(m.lastSeen.toDate()).toLocaleString()}`:"Нажмите, чтобы выбрать"})]})]})},m.id)),d.jsx("div",{className:"text-center py-2",children:d.jsx("div",{className:"text-zinc-500",children:"или"})})]}),s?d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"text",value:a,onChange:m=>l(m.target.value),placeholder:"Введите имя профиля",className:"w-full p-4 rounded-xl bg-black/20 border border-white/10 text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyPress:m=>m.key==="Enter"&&p()}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:p,disabled:!a.trim(),className:"flex-1 p-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Создать"}),d.jsx("button",{onClick:()=>{o(!1),l("")},className:"flex-1 p-3 rounded-xl bg-zinc-700 hover:bg-zinc-600 text-white font-medium transition-colors",children:"Отмена"})]})]}):d.jsx("button",{onClick:()=>o(!0),className:"w-full p-4 rounded-xl transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1))",border:"1px solid rgba(34, 197, 94, 0.2)"},children:d.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[d.jsx("span",{className:"text-xl",children:"➕"}),d.jsx("span",{className:"font-medium",children:"Создать новый профиль"})]})})]})})}function wV({children:t}){const{user:e}=kn(),{profiles:n,budgetId:r,getCurrentUserProfile:i}=mn();return!e||!r?t:!n||n.length===0?d.jsx(D1,{text:"Загрузка профилей..."}):i()?t:d.jsx(_V,{})}const mg=R.createContext({});function gg(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const cd=R.createContext(null),yg=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class EV extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TV({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(yg);return R.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),d.jsx(EV,{isPresent:e,childRef:r,sizeRef:i,children:R.cloneElement(t,{ref:r})})}const bV=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=gg(SV),l=R.useId(),c=R.useCallback(p=>{a.set(p,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),h=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),c]:[n,c]);return R.useMemo(()=>{a.forEach((p,m)=>a.set(m,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(TV,{isPresent:n,children:t})),d.jsx(cd.Provider,{value:h,children:t})};function SV(){return new Map}function V1(t=!0){const e=R.useContext(cd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=R.useId();R.useEffect(()=>{t&&i(s)},[t]);const o=R.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Xl=t=>t.key||"";function Nx(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const vg=typeof window<"u",L1=vg?R.useLayoutEffect:R.useEffect,La=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=V1(o),c=R.useMemo(()=>Nx(t),[t]),h=o&&!a?[]:c.map(Xl),p=R.useRef(!0),m=R.useRef(c),y=gg(()=>new Map),[E,I]=R.useState(c),[C,_]=R.useState(c);L1(()=>{p.current=!1,m.current=c;for(let A=0;A<C.length;A++){const j=Xl(C[A]);h.includes(j)?y.delete(j):y.get(j)!==!0&&y.set(j,!1)}},[C,h.length,h.join("-")]);const x=[];if(c!==E){let A=[...c];for(let j=0;j<C.length;j++){const D=C[j],T=Xl(D);h.includes(T)||(A.splice(j,0,D),x.push(D))}s==="wait"&&x.length&&(A=x),_(Nx(A)),I(c);return}const{forceRender:b}=R.useContext(mg);return d.jsx(d.Fragment,{children:C.map(A=>{const j=Xl(A),D=o&&!a?!1:c===C||h.includes(j),T=()=>{if(y.has(j))y.set(j,!0);else return;let v=!0;y.forEach(S=>{S||(v=!1)}),v&&(b==null||b(),_(m.current),o&&(l==null||l()),r&&r())};return d.jsx(bV,{isPresent:D,initial:!p.current||n?void 0:!1,custom:D?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:D?void 0:T,children:A},j)})})},Ot=t=>t;let O1=Ot;function xg(t){let e;return()=>(e===void 0&&(e=t()),e)}const $s=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},qn=t=>t*1e3,Kn=t=>t/1e3,IV={useManualTiming:!1};function AV(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,p=!1)=>{const y=p&&r?e:n;return h&&s.add(c),y.has(c)||y.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Jl=["read","resolveKeyframes","update","preRender","render","postRender"],CV=40;function M1(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Jl.reduce((_,x)=>(_[x]=AV(s),_),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:p,postRender:m}=o,y=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,CV),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},E=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:Jl.reduce((_,x)=>{const b=o[x];return _[x]=(A,j=!1,D=!1)=>(n||E(),b.schedule(A,j,D)),_},{}),cancel:_=>{for(let x=0;x<Jl.length;x++)o[Jl[x]].cancel(_)},state:i,steps:o}}const{schedule:Ee,cancel:Hr,state:Xe,steps:Th}=M1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ot,!0),F1=R.createContext({strict:!1}),Rx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ws={};for(const t in Rx)Ws[t]={isEnabled:e=>Rx[t].some(n=>!!e[n])};function PV(t){for(const e in t)Ws[e]={...Ws[e],...t[e]}}const kV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kV.has(t)}let U1=t=>!pc(t);function NV(t){t&&(U1=e=>e.startsWith("on")?!pc(e):t(e))}try{NV(require("@emotion/is-prop-valid").default)}catch{}function RV(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(U1(i)||n===!0&&pc(i)||!e&&!pc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function jV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const dd=R.createContext({});function Oa(t){return typeof t=="string"||Array.isArray(t)}function hd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const _g=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wg=["initial",..._g];function fd(t){return hd(t.animate)||wg.some(e=>Oa(t[e]))}function B1(t){return!!(fd(t)||t.variants)}function DV(t,e){if(fd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Oa(n)?n:void 0,animate:Oa(r)?r:void 0}}return t.inherit!==!1?e:{}}function VV(t){const{initial:e,animate:n}=DV(t,R.useContext(dd));return R.useMemo(()=>({initial:e,animate:n}),[jx(e),jx(n)])}function jx(t){return Array.isArray(t)?t.join(" "):t}const LV=Symbol.for("motionComponentSymbol");function cs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function OV(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cs(n)&&(n.current=r))},[e])}const Eg=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MV="framerAppearId",z1="data-"+Eg(MV),{schedule:Tg}=M1(queueMicrotask,!1),$1=R.createContext({});function FV(t,e,n,r,i){var s,o;const{visualElement:a}=R.useContext(dd),l=R.useContext(F1),c=R.useContext(cd),h=R.useContext(yg).reducedMotion,p=R.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=p.current,y=R.useContext($1);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&UV(p.current,n,i,y);const E=R.useRef(!1);R.useInsertionEffect(()=>{m&&E.current&&m.update(n,c)});const I=n[z1],C=R.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,I)));return L1(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Tg.render(m.render),C.current&&m.animationState&&m.animationState.animateChanges())}),R.useEffect(()=>{m&&(!C.current&&m.animationState&&m.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,I)}),C.current=!1))}),m}function UV(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:W1(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&cs(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function W1(t){if(t)return t.options.allowProjection!==!1?t.projection:W1(t.parent)}function BV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&PV(t);function a(c,h){let p;const m={...R.useContext(yg),...c,layoutId:zV(c)},{isStatic:y}=m,E=VV(c),I=r(c,y);if(!y&&vg){$V();const C=WV(m);p=C.MeasureLayout,E.visualElement=FV(i,I,m,e,C.ProjectionNode)}return d.jsxs(dd.Provider,{value:E,children:[p&&E.visualElement?d.jsx(p,{visualElement:E.visualElement,...m}):null,n(i,c,OV(I,E.visualElement,h),I,y,E.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=R.forwardRef(a);return l[LV]=i,l}function zV({layoutId:t}){const e=R.useContext(mg).id;return e&&t!==void 0?e+"-"+t:t}function $V(t,e){R.useContext(F1).strict}function WV(t){const{drag:e,layout:n}=Ws;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const HV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bg(t){return typeof t!="string"||t.includes("-")?!1:!!(HV.indexOf(t)>-1||/[A-Z]/u.test(t))}function Dx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Sg(t,e,n,r){if(typeof e=="function"){const[i,s]=Dx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Dx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const ip=t=>Array.isArray(t),qV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),KV=t=>ip(t)?t[t.length-1]||0:t,pt=t=>!!(t&&t.getVelocity);function Tu(t){const e=pt(t)?t.get():t;return qV(e)?e.toValue():e}function GV({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:QV(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const H1=t=>(e,n)=>{const r=R.useContext(dd),i=R.useContext(cd),s=()=>GV(t,e,r,i);return n?s():gg(s)};function QV(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Tu(s[m]);let{initial:o,animate:a}=t;const l=fd(t),c=B1(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?a:o;if(p&&typeof p!="boolean"&&!hd(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const E=Sg(t,m[y]);if(E){const{transitionEnd:I,transition:C,..._}=E;for(const x in _){let b=_[x];if(Array.isArray(b)){const A=h?b.length-1:0;b=b[A]}b!==null&&(i[x]=b)}for(const x in I)i[x]=I[x]}}}return i}const no=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ui=new Set(no),q1=t=>e=>typeof e=="string"&&e.startsWith(t),K1=q1("--"),YV=q1("var(--"),Ig=t=>YV(t)?XV.test(t.split("/*")[0].trim()):!1,XV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,G1=(t,e)=>e&&typeof t=="number"?e.transform(t):t,nr=(t,e,n)=>n>e?e:n<t?t:n,ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ma={...ro,transform:t=>nr(0,1,t)},Zl={...ro,default:1},al=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),fr=al("deg"),An=al("%"),Q=al("px"),JV=al("vh"),ZV=al("vw"),Vx={...An,parse:t=>An.parse(t)/100,transform:t=>An.transform(t*100)},eL={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q},tL={rotate:fr,rotateX:fr,rotateY:fr,rotateZ:fr,scale:Zl,scaleX:Zl,scaleY:Zl,scaleZ:Zl,skew:fr,skewX:fr,skewY:fr,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:Ma,originX:Vx,originY:Vx,originZ:Q},Lx={...ro,transform:Math.round},Ag={...eL,...tL,zIndex:Lx,size:Q,fillOpacity:Ma,strokeOpacity:Ma,numOctaves:Lx},nL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rL=no.length;function iL(t,e,n){let r="",i=!0;for(let s=0;s<rL;s++){const o=no[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=G1(a,Ag[o]);if(!l){i=!1;const h=nL[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Cg(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ui.has(l)){o=!0;continue}else if(K1(l)){i[l]=c;continue}else{const h=G1(c,Ag[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=iL(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const sL={offset:"stroke-dashoffset",array:"stroke-dasharray"},oL={offset:"strokeDashoffset",array:"strokeDasharray"};function aL(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?sL:oL;t[s.offset]=Q.transform(-r);const o=Q.transform(e),a=Q.transform(n);t[s.array]=`${o} ${a}`}function Ox(t,e,n){return typeof t=="string"?t:Q.transform(e+n*t)}function lL(t,e,n){const r=Ox(e,t.x,t.width),i=Ox(n,t.y,t.height);return`${r} ${i}`}function Pg(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,p){if(Cg(t,c,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:E}=t;m.transform&&(E&&(y.transform=m.transform),delete m.transform),E&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=lL(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&aL(m,o,a,l,!1)}const kg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Q1=()=>({...kg(),attrs:{}}),Ng=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Y1(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const X1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function J1(t,e,n,r){Y1(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(X1.has(i)?i:Eg(i),e.attrs[i])}const mc={};function uL(t){Object.assign(mc,t)}function Z1(t,{layout:e,layoutId:n}){return Ui.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!mc[t]||t==="opacity")}function Rg(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(pt(i[o])||e.style&&pt(e.style[o])||Z1(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function eS(t,e,n){const r=Rg(t,e,n);for(const i in t)if(pt(t[i])||pt(e[i])){const s=no.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function cL(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Mx=["x","y","width","height","cx","cy","r"],dL={useVisualState:H1({scrapeMotionValuesFromProps:eS,createRenderState:Q1,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ui.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Mx.length;a++){const l=Mx[a];t[l]!==e[l]&&(o=!0)}o&&Ee.read(()=>{cL(n,r),Ee.render(()=>{Pg(r,i,Ng(n.tagName),t.transformTemplate),J1(n,r)})})}})},hL={useVisualState:H1({scrapeMotionValuesFromProps:Rg,createRenderState:kg})};function tS(t,e,n){for(const r in e)!pt(e[r])&&!Z1(r,n)&&(t[r]=e[r])}function fL({transformTemplate:t},e){return R.useMemo(()=>{const n=kg();return Cg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function pL(t,e){const n=t.style||{},r={};return tS(r,n,t),Object.assign(r,fL(t,e)),r}function mL(t,e){const n={},r=pL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function gL(t,e,n,r){const i=R.useMemo(()=>{const s=Q1();return Pg(s,e,Ng(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};tS(s,t.style,t),i.style={...s,...i.style}}return i}function yL(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(bg(n)?gL:mL)(r,s,o,n),c=RV(r,typeof n=="string",t),h=n!==R.Fragment?{...c,...l,ref:i}:{},{children:p}=r,m=R.useMemo(()=>pt(p)?p.get():p,[p]);return R.createElement(n,{...h,children:m})}}function vL(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...bg(r)?dL:hL,preloadedFeatures:t,useRender:yL(i),createVisualElement:e,Component:r};return BV(o)}}function nS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function pd(t,e,n){const r=t.getProps();return Sg(r,e,n!==void 0?n:r.custom,t)}const xL=xg(()=>window.ScrollTimeline!==void 0);class _L{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(xL()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class wL extends _L{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function jg(t,e){return t?t[e]||t.default||t:void 0}const sp=2e4;function rS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<sp;)e+=n,r=t.next(e);return e>=sp?1/0:e}function Dg(t){return typeof t=="function"}function Fx(t,e){t.timeline=e,t.onfinish=null}const Vg=t=>Array.isArray(t)&&typeof t[0]=="number",EL={linearEasing:void 0};function TL(t,e){const n=xg(t);return()=>{var r;return(r=EL[e])!==null&&r!==void 0?r:n()}}const gc=TL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),iS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t($s(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function sS(t){return!!(typeof t=="function"&&gc()||!t||typeof t=="string"&&(t in op||gc())||Vg(t)||Array.isArray(t)&&t.every(sS))}const Fo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,op={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fo([0,.65,.55,1]),circOut:Fo([.55,0,1,.45]),backIn:Fo([.31,.01,.66,-.59]),backOut:Fo([.33,1.53,.69,.99])};function oS(t,e){if(t)return typeof t=="function"&&gc()?iS(t,e):Vg(t)?Fo(t):Array.isArray(t)?t.map(n=>oS(n,e)||op.easeOut):op[t]}const sn={x:!1,y:!1};function aS(){return sn.x||sn.y}function bL(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function lS(t,e){const n=bL(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Ux(t){return e=>{e.pointerType==="touch"||aS()||t(e)}}function SL(t,e,n={}){const[r,i,s]=lS(t,n),o=Ux(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const h=Ux(p=>{c(p),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const uS=(t,e)=>e?t===e?!0:uS(t,e.parentElement):!1,Lg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,IL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function AL(t){return IL.has(t.tagName)||t.tabIndex!==-1}const Uo=new WeakSet;function Bx(t){return e=>{e.key==="Enter"&&t(e)}}function bh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CL=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Bx(()=>{if(Uo.has(n))return;bh(n,"down");const i=Bx(()=>{bh(n,"up")}),s=()=>bh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function zx(t){return Lg(t)&&!aS()}function PL(t,e,n={}){const[r,i,s]=lS(t,n),o=a=>{const l=a.currentTarget;if(!zx(a)||Uo.has(l))return;Uo.add(l);const c=e(a),h=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),!(!zx(y)||!Uo.has(l))&&(Uo.delete(l),typeof c=="function"&&c(y,{success:E}))},p=y=>{h(y,n.useGlobalTarget||uS(l,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{!AL(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>CL(c,i),i)}),s}function kL(t){return t==="x"||t==="y"?sn[t]?null:(sn[t]=!0,()=>{sn[t]=!1}):sn.x||sn.y?null:(sn.x=sn.y=!0,()=>{sn.x=sn.y=!1})}const cS=new Set(["width","height","top","left","right","bottom",...no]);let bu;function NL(){bu=void 0}const Cn={now:()=>(bu===void 0&&Cn.set(Xe.isProcessing||IV.useManualTiming?Xe.timestamp:performance.now()),bu),set:t=>{bu=t,queueMicrotask(NL)}};function Og(t,e){t.indexOf(e)===-1&&t.push(e)}function Mg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fg{constructor(){this.subscriptions=[]}add(e){return Og(this.subscriptions,e),()=>Mg(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function dS(t,e){return e?t*(1e3/e):0}const $x=30,RL=t=>!isNaN(parseFloat(t));class jL{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Cn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Cn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Fg);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ee.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$x)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$x);return dS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fa(t,e){return new jL(t,e)}function DL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Fa(n))}function VL(t,e){const n=pd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=KV(s[o]);DL(t,o,a)}}function LL(t){return!!(pt(t)&&t.add)}function ap(t,e){const n=t.getValue("willChange");if(LL(n))return n.add(e)}function hS(t){return t.props[z1]}const fS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,OL=1e-7,ML=12;function FL(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=fS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>OL&&++a<ML);return o}function ll(t,e,n,r){if(t===e&&n===r)return Ot;const i=s=>FL(s,0,1,t,n);return s=>s===0||s===1?s:fS(i(s),e,r)}const pS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mS=t=>e=>1-t(1-e),gS=ll(.33,1.53,.69,.99),Ug=mS(gS),yS=pS(Ug),vS=t=>(t*=2)<1?.5*Ug(t):.5*(2-Math.pow(2,-10*(t-1))),Bg=t=>1-Math.sin(Math.acos(t)),xS=mS(Bg),_S=pS(Bg),wS=t=>/^0[^.\s]+$/u.test(t);function UL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wS(t):!0}const na=t=>Math.round(t*1e5)/1e5,zg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function BL(t){return t==null}const zL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$g=(t,e)=>n=>!!(typeof n=="string"&&zL.test(n)&&n.startsWith(t)||e&&!BL(n)&&Object.prototype.hasOwnProperty.call(n,e)),ES=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(zg);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$L=t=>nr(0,255,t),Sh={...ro,transform:t=>Math.round($L(t))},gi={test:$g("rgb","red"),parse:ES("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Sh.transform(t)+", "+Sh.transform(e)+", "+Sh.transform(n)+", "+na(Ma.transform(r))+")"};function WL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const lp={test:$g("#"),parse:WL,transform:gi.transform},ds={test:$g("hsl","hue"),parse:ES("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+An.transform(na(e))+", "+An.transform(na(n))+", "+na(Ma.transform(r))+")"},ct={test:t=>gi.test(t)||lp.test(t)||ds.test(t),parse:t=>gi.test(t)?gi.parse(t):ds.test(t)?ds.parse(t):lp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?gi.transform(t):ds.transform(t)},HL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(zg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(HL))===null||n===void 0?void 0:n.length)||0)>0}const TS="number",bS="color",KL="var",GL="var(",Wx="${}",QL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ua(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(QL,l=>(ct.test(l)?(r.color.push(s),i.push(bS),n.push(ct.parse(l))):l.startsWith(GL)?(r.var.push(s),i.push(KL),n.push(l)):(r.number.push(s),i.push(TS),n.push(parseFloat(l))),++s,Wx)).split(Wx);return{values:n,split:a,indexes:r,types:i}}function SS(t){return Ua(t).values}function IS(t){const{split:e,types:n}=Ua(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===TS?s+=na(i[o]):a===bS?s+=ct.transform(i[o]):s+=i[o]}return s}}const YL=t=>typeof t=="number"?0:t;function XL(t){const e=SS(t);return IS(t)(e.map(YL))}const qr={test:qL,parse:SS,createTransformer:IS,getAnimatableNone:XL},JL=new Set(["brightness","contrast","saturate","opacity"]);function ZL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(zg)||[];if(!r)return t;const i=n.replace(r,"");let s=JL.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const eO=/\b([a-z-]*)\(.*?\)/gu,up={...qr,getAnimatableNone:t=>{const e=t.match(eO);return e?e.map(ZL).join(" "):t}},tO={...Ag,color:ct,backgroundColor:ct,outlineColor:ct,fill:ct,stroke:ct,borderColor:ct,borderTopColor:ct,borderRightColor:ct,borderBottomColor:ct,borderLeftColor:ct,filter:up,WebkitFilter:up},Wg=t=>tO[t];function AS(t,e){let n=Wg(t);return n!==up&&(n=qr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const nO=new Set(["auto","none","0"]);function rO(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!nO.has(s)&&Ua(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=AS(n,i)}const Hx=t=>t===ro||t===Q,qx=(t,e)=>parseFloat(t.split(", ")[e]),Kx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return qx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?qx(s[1],t):0}},iO=new Set(["x","y","z"]),sO=no.filter(t=>!iO.has(t));function oO(t){const e=[];return sO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Hs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Kx(4,13),y:Kx(5,14)};Hs.translateX=Hs.x;Hs.translateY=Hs.y;const wi=new Set;let cp=!1,dp=!1;function CS(){if(dp){const t=Array.from(wi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=oO(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dp=!1,cp=!1,wi.forEach(t=>t.complete()),wi.clear()}function PS(){wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dp=!0)})}function aO(){PS(),CS()}class Hg{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wi.add(this),cp||(cp=!0,Ee.read(PS),Ee.resolveKeyframes(CS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),lO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uO(t){const e=lO.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function NS(t,e,n=1){const[r,i]=uO(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return kS(o)?parseFloat(o):o}return Ig(i)?NS(i,e,n+1):i}const RS=t=>e=>e.test(t),cO={test:t=>t==="auto",parse:t=>t},jS=[ro,Q,An,fr,ZV,JV,cO],Gx=t=>jS.find(RS(t));class DS extends Hg{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ig(c))){const h=NS(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!cS.has(r)||e.length!==2)return;const[i,s]=e,o=Gx(i),a=Gx(s);if(o!==a)if(Hx(o)&&Hx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)UL(e[i])&&r.push(i);r.length&&rO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Hs[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Qx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qr.test(t)||t==="0")&&!t.startsWith("url("));function dO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function hO(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Qx(i,e),a=Qx(s,e);return!o||!a?!1:dO(t)||(n==="spring"||Dg(n))&&r}const fO=t=>t!==null;function md(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(fO),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const pO=40;class VS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Cn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>pO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&aO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Cn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!hO(e,r,i,s))if(o)this.options.duration=0;else{l&&l(md(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ie=(t,e,n)=>t+(e-t)*n;function Ih(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Ih(l,a,t+1/3),s=Ih(l,a,t),o=Ih(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function yc(t,e){return n=>n>0?e:t}const Ah=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},gO=[lp,gi,ds],yO=t=>gO.find(e=>e.test(t));function Yx(t){const e=yO(t);if(!e)return!1;let n=e.parse(t);return e===ds&&(n=mO(n)),n}const Xx=(t,e)=>{const n=Yx(t),r=Yx(e);if(!n||!r)return yc(t,e);const i={...n};return s=>(i.red=Ah(n.red,r.red,s),i.green=Ah(n.green,r.green,s),i.blue=Ah(n.blue,r.blue,s),i.alpha=Ie(n.alpha,r.alpha,s),gi.transform(i))},vO=(t,e)=>n=>e(t(n)),ul=(...t)=>t.reduce(vO),hp=new Set(["none","hidden"]);function xO(t,e){return hp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _O(t,e){return n=>Ie(t,e,n)}function qg(t){return typeof t=="number"?_O:typeof t=="string"?Ig(t)?yc:ct.test(t)?Xx:TO:Array.isArray(t)?LS:typeof t=="object"?ct.test(t)?Xx:wO:yc}function LS(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>qg(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function wO(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=qg(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function EO(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const TO=(t,e)=>{const n=qr.createTransformer(e),r=Ua(t),i=Ua(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?hp.has(t)&&!i.values.length||hp.has(e)&&!r.values.length?xO(t,e):ul(LS(EO(r,i),i.values),n):yc(t,e)};function OS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ie(t,e,n):qg(t)(t,e)}const bO=5;function MS(t,e,n){const r=Math.max(e-bO,0);return dS(n-t(r),e-r)}const Re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ch=.001;function SO({duration:t=Re.duration,bounce:e=Re.bounce,velocity:n=Re.velocity,mass:r=Re.mass}){let i,s,o=1-e;o=nr(Re.minDamping,Re.maxDamping,o),t=nr(Re.minDuration,Re.maxDuration,Kn(t)),o<1?(i=c=>{const h=c*o,p=h*t,m=h-n,y=fp(c,o),E=Math.exp(-p);return Ch-m/y*E},s=c=>{const p=c*o*t,m=p*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-p),I=fp(Math.pow(c,2),o);return(-i(c)+Ch>0?-1:1)*((m-y)*E)/I}):(i=c=>{const h=Math.exp(-c*t),p=(c-n)*t+1;return-Ch+h*p},s=c=>{const h=Math.exp(-c*t),p=(n-c)*(t*t);return h*p});const a=5/t,l=AO(i,s,a);if(t=qn(t),isNaN(l))return{stiffness:Re.stiffness,damping:Re.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const IO=12;function AO(t,e,n){let r=n;for(let i=1;i<IO;i++)r=r-t(r)/e(r);return r}function fp(t,e){return t*Math.sqrt(1-e*e)}const CO=["duration","bounce"],PO=["stiffness","damping","mass"];function Jx(t,e){return e.some(n=>t[n]!==void 0)}function kO(t){let e={velocity:Re.velocity,stiffness:Re.stiffness,damping:Re.damping,mass:Re.mass,isResolvedFromDuration:!1,...t};if(!Jx(t,PO)&&Jx(t,CO))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*nr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Re.mass,stiffness:i,damping:s}}else{const n=SO(t);e={...e,...n,mass:Re.mass},e.isResolvedFromDuration=!0}return e}function FS(t=Re.visualDuration,e=Re.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=kO({...n,velocity:-Kn(n.velocity||0)}),E=m||0,I=c/(2*Math.sqrt(l*h)),C=o-s,_=Kn(Math.sqrt(l/h)),x=Math.abs(C)<5;r||(r=x?Re.restSpeed.granular:Re.restSpeed.default),i||(i=x?Re.restDelta.granular:Re.restDelta.default);let b;if(I<1){const j=fp(_,I);b=D=>{const T=Math.exp(-I*_*D);return o-T*((E+I*_*C)/j*Math.sin(j*D)+C*Math.cos(j*D))}}else if(I===1)b=j=>o-Math.exp(-_*j)*(C+(E+_*C)*j);else{const j=_*Math.sqrt(I*I-1);b=D=>{const T=Math.exp(-I*_*D),v=Math.min(j*D,300);return o-T*((E+I*_*C)*Math.sinh(v)+j*C*Math.cosh(v))/j}}const A={calculatedDuration:y&&p||null,next:j=>{const D=b(j);if(y)a.done=j>=p;else{let T=0;I<1&&(T=j===0?qn(E):MS(b,j,D));const v=Math.abs(T)<=r,S=Math.abs(o-D)<=i;a.done=v&&S}return a.value=a.done?o:D,a},toString:()=>{const j=Math.min(rS(A),sp),D=iS(T=>A.next(j*T).value,j,30);return j+"ms "+D}};return A}function Zx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=v=>a!==void 0&&v<a||l!==void 0&&v>l,E=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let I=n*e;const C=p+I,_=o===void 0?C:o(C);_!==C&&(I=_-p);const x=v=>-I*Math.exp(-v/r),b=v=>_+x(v),A=v=>{const S=x(v),P=b(v);m.done=Math.abs(S)<=c,m.value=m.done?_:P};let j,D;const T=v=>{y(m.value)&&(j=v,D=FS({keyframes:[m.value,E(m.value)],velocity:MS(b,v,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return T(0),{calculatedDuration:null,next:v=>{let S=!1;return!D&&j===void 0&&(S=!0,A(v),T(v)),j!==void 0&&v>=j?D.next(v-j):(!S&&A(v),m)}}}const NO=ll(.42,0,1,1),RO=ll(0,0,.58,1),US=ll(.42,0,.58,1),jO=t=>Array.isArray(t)&&typeof t[0]!="number",DO={linear:Ot,easeIn:NO,easeInOut:US,easeOut:RO,circIn:Bg,circInOut:_S,circOut:xS,backIn:Ug,backInOut:yS,backOut:gS,anticipate:vS},e_=t=>{if(Vg(t)){O1(t.length===4);const[e,n,r,i]=t;return ll(e,n,r,i)}else if(typeof t=="string")return DO[t];return t};function VO(t,e,n){const r=[],i=n||OS,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ot:e;a=ul(l,a)}r.push(a)}return r}function LO(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(O1(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=VO(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=$s(t[p],t[p+1],h);return a[p](m)};return n?h=>c(nr(t[0],t[s-1],h)):c}function OO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=$s(0,e,r);t.push(Ie(n,1,i))}}function MO(t){const e=[0];return OO(e,t.length-1),e}function FO(t,e){return t.map(n=>n*e)}function UO(t,e){return t.map(()=>e||US).splice(0,t.length-1)}function vc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=jO(r)?r.map(e_):e_(r),s={done:!1,value:e[0]},o=FO(n&&n.length===e.length?n:MO(e),t),a=LO(o,e,{ease:Array.isArray(i)?i:UO(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const BO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ee.update(e,!0),stop:()=>Hr(e),now:()=>Xe.isProcessing?Xe.timestamp:Cn.now()}},zO={decay:Zx,inertia:Zx,tween:vc,keyframes:vc,spring:FS},$O=t=>t/100;class Kg extends VS{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Hg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Dg(n)?n:zO[n]||vc;let l,c;a!==vc&&typeof e[0]!="number"&&(l=ul($O,OS(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=rS(h));const{calculatedDuration:p}=h,m=p+i,y=m*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:v}=this.options;return{done:!0,value:v[v.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:p}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:y,repeatType:E,repeatDelay:I,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-m*(this.speed>=0?1:-1),x=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,A=s;if(y){const v=Math.min(this.currentTime,h)/p;let S=Math.floor(v),P=v%1;!P&&v>=1&&(P=1),P===1&&S--,S=Math.min(S,y+1),!!(S%2)&&(E==="reverse"?(P=1-P,I&&(P-=I/p)):E==="mirror"&&(A=o)),b=nr(0,1,P)*p}const j=x?{done:!1,value:l[0]}:A.next(b);a&&(j.value=a(j.value));let{done:D}=j;!x&&c!==null&&(D=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return T&&i!==void 0&&(j.value=md(l,this.options,i)),C&&C(j.value),T&&this.finish(),j}get duration(){const{resolved:e}=this;return e?Kn(e.calculatedDuration):0}get time(){return Kn(this.currentTime)}set time(e){e=qn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Kn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=BO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const WO=new Set(["opacity","clipPath","filter","transform"]);function HO(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=oS(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const qO=xg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xc=10,KO=2e4;function GO(t){return Dg(t.type)||t.type==="spring"||!sS(t.ease)}function QO(t,e){const n=new Kg({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<KO;)r=n.sample(s),i.push(r.value),s+=xc;return{times:void 0,keyframes:i,duration:s-xc,ease:"linear"}}const BS={anticipate:vS,backInOut:yS,circInOut:_S};function YO(t){return t in BS}class t_ extends VS{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new DS(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&gc()&&YO(s)&&(s=BS[s]),GO(this.options)){const{onComplete:p,onUpdate:m,motionValue:y,element:E,...I}=this.options,C=QO(e,I);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,s=C.ease,o="keyframes"}const h=HO(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(Fx(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;a.set(md(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Kn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Kn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=qn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ot;const{animation:r}=n;Fx(r,e)}return Ot}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:p,element:m,...y}=this.options,E=new Kg({...y,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),I=qn(this.time);c.setWithVelocity(E.sample(I-xc).value,E.sample(I).value,xc)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return qO()&&r&&WO.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const XO={type:"spring",stiffness:500,damping:25,restSpeed:10},JO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ZO={type:"keyframes",duration:.8},eM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tM=(t,{keyframes:e})=>e.length>2?ZO:Ui.has(t)?t.startsWith("scale")?JO(e[1]):XO:eM;function nM({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Gg=(t,e,n,r={},i,s)=>o=>{const a=jg(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-qn(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};nM(a)||(h={...h,...tM(t,h)}),h.duration&&(h.duration=qn(h.duration)),h.repeatDelay&&(h.repeatDelay=qn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const m=md(h.keyframes,a);if(m!==void 0)return Ee.update(()=>{h.onUpdate(m),h.onComplete()}),new wL([])}return!s&&t_.supports(h)?new t_(h):new Kg(h)};function rM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const p in l){const m=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),y=l[p];if(y===void 0||h&&rM(h,p))continue;const E={delay:n,...jg(o||{},p)};let I=!1;if(window.MotionHandoffAnimation){const _=hS(t);if(_){const x=window.MotionHandoffAnimation(_,p,Ee);x!==null&&(E.startTime=x,I=!0)}}ap(t,p),m.start(Gg(p,m,y,t.shouldReduceMotion&&cS.has(p)?{type:!1}:E,t,I));const C=m.animation;C&&c.push(C)}return a&&Promise.all(c).then(()=>{Ee.update(()=>{a&&VL(t,a)})}),c}function pp(t,e,n={}){var r;const i=pd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(zS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=s;return iM(t,e,h+c,p,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function iM(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(sM).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(pp(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function sM(t,e){return t.sortNodePosition(e)}function oM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>pp(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=pp(t,e,n);else{const i=typeof e=="function"?pd(t,e,n.custom):e;r=Promise.all(zS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const aM=wg.length;function $S(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$S(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<aM;n++){const r=wg[n],i=t.props[r];(Oa(i)||i===!1)&&(e[r]=i)}return e}const lM=[..._g].reverse(),uM=_g.length;function cM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>oM(t,n,r)))}function dM(t){let e=cM(t),n=n_(),r=!0;const i=l=>(c,h)=>{var p;const m=pd(t,h,l==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:y,transitionEnd:E,...I}=m;c={...c,...I,...E}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=$S(t.parent)||{},p=[],m=new Set;let y={},E=1/0;for(let C=0;C<uM;C++){const _=lM[C],x=n[_],b=c[_]!==void 0?c[_]:h[_],A=Oa(b),j=_===l?x.isActive:null;j===!1&&(E=C);let D=b===h[_]&&b!==c[_]&&A;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),x.protectedKeys={...y},!x.isActive&&j===null||!b&&!x.prevProp||hd(b)||typeof b=="boolean")continue;const T=hM(x.prevProp,b);let v=T||_===l&&x.isActive&&!D&&A||C>E&&A,S=!1;const P=Array.isArray(b)?b:[b];let N=P.reduce(i(_),{});j===!1&&(N={});const{prevResolvedValues:V={}}=x,k={...V,...N},re=ne=>{v=!0,m.has(ne)&&(S=!0,m.delete(ne)),x.needsAnimating[ne]=!0;const B=t.getValue(ne);B&&(B.liveStyle=!1)};for(const ne in k){const B=N[ne],G=V[ne];if(y.hasOwnProperty(ne))continue;let X=!1;ip(B)&&ip(G)?X=!nS(B,G):X=B!==G,X?B!=null?re(ne):m.add(ne):B!==void 0&&m.has(ne)?re(ne):x.protectedKeys[ne]=!0}x.prevProp=b,x.prevResolvedValues=N,x.isActive&&(y={...y,...N}),r&&t.blockInitialAnimation&&(v=!1),v&&(!(D&&T)||S)&&p.push(...P.map(ne=>({animation:ne,options:{type:_}})))}if(m.size){const C={};m.forEach(_=>{const x=t.getBaseTarget(_),b=t.getValue(_);b&&(b.liveStyle=!0),C[_]=x??null}),p.push({animation:C})}let I=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const p=o(l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=n_(),r=!0}}}function hM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nS(e,t):!1}function oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n_(){return{animate:oi(!0),whileInView:oi(),whileHover:oi(),whileTap:oi(),whileDrag:oi(),whileFocus:oi(),exit:oi()}}class ti{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fM extends ti{constructor(e){super(e),e.animationState||(e.animationState=dM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let pM=0;class mM extends ti{constructor(){super(...arguments),this.id=pM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const gM={animation:{Feature:fM},exit:{Feature:mM}};function Ba(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function cl(t){return{point:{x:t.pageX,y:t.pageY}}}const yM=t=>e=>Lg(e)&&t(e,cl(e));function ra(t,e,n,r){return Ba(t,e,yM(n),r)}const r_=(t,e)=>Math.abs(t-e);function vM(t,e){const n=r_(t.x,e.x),r=r_(t.y,e.y);return Math.sqrt(n**2+r**2)}class WS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=kh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=vM(p.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:E}=p,{timestamp:I}=Xe;this.history.push({...E,timestamp:I});const{onStart:C,onMove:_}=this.handlers;m||(C&&C(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Ph(m,this.transformPagePoint),Ee.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:E,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=kh(p.type==="pointercancel"?this.lastMoveEventInfo:Ph(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,C),E&&E(p,C)},!Lg(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=cl(e),a=Ph(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Xe;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,kh(a,this.history)),this.removeListeners=ul(ra(this.contextWindow,"pointermove",this.handlePointerMove),ra(this.contextWindow,"pointerup",this.handlePointerUp),ra(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Hr(this.updatePoint)}}function Ph(t,e){return e?{point:e(t.point)}:t}function i_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kh({point:t},e){return{point:t,delta:i_(t,HS(e)),offset:i_(t,xM(e)),velocity:_M(e,.1)}}function xM(t){return t[0]}function HS(t){return t[t.length-1]}function _M(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=HS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>qn(e)));)n--;if(!r)return{x:0,y:0};const s=Kn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const qS=1e-4,wM=1-qS,EM=1+qS,KS=.01,TM=0-KS,bM=0+KS;function Ft(t){return t.max-t.min}function SM(t,e,n){return Math.abs(t-e)<=n}function s_(t,e,n,r=.5){t.origin=r,t.originPoint=Ie(e.min,e.max,t.origin),t.scale=Ft(n)/Ft(e),t.translate=Ie(n.min,n.max,t.origin)-t.originPoint,(t.scale>=wM&&t.scale<=EM||isNaN(t.scale))&&(t.scale=1),(t.translate>=TM&&t.translate<=bM||isNaN(t.translate))&&(t.translate=0)}function ia(t,e,n,r){s_(t.x,e.x,n.x,r?r.originX:void 0),s_(t.y,e.y,n.y,r?r.originY:void 0)}function o_(t,e,n){t.min=n.min+e.min,t.max=t.min+Ft(e)}function IM(t,e,n){o_(t.x,e.x,n.x),o_(t.y,e.y,n.y)}function a_(t,e,n){t.min=e.min-n.min,t.max=t.min+Ft(e)}function sa(t,e,n){a_(t.x,e.x,n.x),a_(t.y,e.y,n.y)}function AM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ie(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ie(n,t,r.max):Math.min(t,n)),t}function l_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CM(t,{top:e,left:n,bottom:r,right:i}){return{x:l_(t.x,n,i),y:l_(t.y,e,r)}}function u_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function PM(t,e){return{x:u_(t.x,e.x),y:u_(t.y,e.y)}}function kM(t,e){let n=.5;const r=Ft(t),i=Ft(e);return i>r?n=$s(e.min,e.max-r,t.min):r>i&&(n=$s(t.min,t.max-i,e.min)),nr(0,1,n)}function NM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mp=.35;function RM(t=mp){return t===!1?t=0:t===!0&&(t=mp),{x:c_(t,"left","right"),y:c_(t,"top","bottom")}}function c_(t,e,n){return{min:d_(t,e),max:d_(t,n)}}function d_(t,e){return typeof t=="number"?t:t[e]||0}const h_=()=>({translate:0,scale:1,origin:0,originPoint:0}),hs=()=>({x:h_(),y:h_()}),f_=()=>({min:0,max:0}),De=()=>({x:f_(),y:f_()});function $t(t){return[t("x"),t("y")]}function GS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function DM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Nh(t){return t===void 0||t===1}function gp({scale:t,scaleX:e,scaleY:n}){return!Nh(t)||!Nh(e)||!Nh(n)}function ci(t){return gp(t)||QS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function QS(t){return p_(t.x)||p_(t.y)}function p_(t){return t&&t!=="0%"}function _c(t,e,n){const r=t-n,i=e*r;return n+i}function m_(t,e,n,r,i){return i!==void 0&&(t=_c(t,i,r)),_c(t,n,r)+e}function yp(t,e=0,n=1,r,i){t.min=m_(t.min,e,n,r,i),t.max=m_(t.max,e,n,r,i)}function YS(t,{x:e,y:n}){yp(t.x,e.translate,e.scale,e.originPoint),yp(t.y,n.translate,n.scale,n.originPoint)}const g_=.999999999999,y_=1.0000000000001;function VM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ps(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YS(t,o)),r&&ci(s.latestValues)&&ps(t,s.latestValues))}e.x<y_&&e.x>g_&&(e.x=1),e.y<y_&&e.y>g_&&(e.y=1)}function fs(t,e){t.min=t.min+e,t.max=t.max+e}function v_(t,e,n,r,i=.5){const s=Ie(t.min,t.max,i);yp(t,e,n,s,r)}function ps(t,e){v_(t.x,e.x,e.scaleX,e.scale,e.originX),v_(t.y,e.y,e.scaleY,e.scale,e.originY)}function XS(t,e){return GS(DM(t.getBoundingClientRect(),e))}function LM(t,e,n){const r=XS(t,n),{scroll:i}=e;return i&&(fs(r.x,i.offset.x),fs(r.y,i.offset.y)),r}const JS=({current:t})=>t?t.ownerDocument.defaultView:null,OM=new WeakMap;class MM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cl(h).point)},s=(h,p)=>{const{drag:m,dragPropagation:y,onDragStart:E}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kL(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$t(C=>{let _=this.getAxisMotionValue(C).get()||0;if(An.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[C];b&&(_=Ft(b)*(parseFloat(_)/100))}}this.originPoint[C]=_}),E&&Ee.postRender(()=>E(h,p)),ap(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(h,p)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:E,onDrag:I}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:C}=p;if(y&&this.currentDirection===null){this.currentDirection=FM(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",p.point,C),this.updateAxis("y",p.point,C),this.visualElement.render(),I&&I(h,p)},a=(h,p)=>this.stop(h,p),l=()=>$t(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new WS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:JS(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ee.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!eu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=AM(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&cs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CM(i.layoutBox,n):this.constraints=!1,this.elastic=RM(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$t(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=NM(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=LM(r,i.root,this.visualElement.getTransformPagePoint());let o=PM(i.layout.layoutBox,s);if(n){const a=n(jM(o));this.hasMutatedConstraints=!!a,a&&(o=GS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=$t(h=>{if(!eu(h,n,this.currentDirection))return;let p=l&&l[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ap(this.visualElement,e),r.start(Gg(e,r,0,n,this.visualElement,!1))}stopAnimation(){$t(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$t(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$t(n=>{const{drag:r}=this.getProps();if(!eu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ie(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$t(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=kM({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$t(o=>{if(!eu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ie(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;OM.set(this.visualElement,this);const e=this.visualElement.current,n=ra(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();cs(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ee.read(r);const o=Ba(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&($t(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=l[h].translate,p.set(p.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=mp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function eu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function FM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class UM extends ti{constructor(e){super(e),this.removeGroupControls=Ot,this.removeListeners=Ot,this.controls=new MM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const x_=t=>(e,n)=>{t&&Ee.postRender(()=>t(e,n))};class BM extends ti{constructor(){super(...arguments),this.removePointerDownListener=Ot}onPointerDown(e){this.session=new WS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:x_(e),onStart:x_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ee.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ra(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Su={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function __(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ao={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=__(t,e.target.x),r=__(t,e.target.y);return`${n}% ${r}%`}},zM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=qr.parse(t);if(i.length>5)return r;const s=qr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ie(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class $M extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;uL(WM),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Su.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ee.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Tg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZS(t){const[e,n]=V1(),r=R.useContext(mg);return d.jsx($M,{...t,layoutGroup:r,switchLayoutGroup:R.useContext($1),isPresent:e,safeToRemove:n})}const WM={borderRadius:{...Ao,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ao,borderTopRightRadius:Ao,borderBottomLeftRadius:Ao,borderBottomRightRadius:Ao,boxShadow:zM};function HM(t,e,n){const r=pt(t)?t:Fa(t);return r.start(Gg("",r,e,n)),r.animation}function qM(t){return t instanceof SVGElement&&t.tagName!=="svg"}const KM=(t,e)=>t.depth-e.depth;class GM{constructor(){this.children=[],this.isDirty=!1}add(e){Og(this.children,e),this.isDirty=!0}remove(e){Mg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KM),this.isDirty=!1,this.children.forEach(e)}}function QM(t,e){const n=Cn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Hr(r),t(s-e))};return Ee.read(r,!0),()=>Hr(r)}const eI=["TopLeft","TopRight","BottomLeft","BottomRight"],YM=eI.length,w_=t=>typeof t=="string"?parseFloat(t):t,E_=t=>typeof t=="number"||Q.test(t);function XM(t,e,n,r,i,s){i?(t.opacity=Ie(0,n.opacity!==void 0?n.opacity:1,JM(r)),t.opacityExit=Ie(e.opacity!==void 0?e.opacity:1,0,ZM(r))):s&&(t.opacity=Ie(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<YM;o++){const a=`border${eI[o]}Radius`;let l=T_(e,a),c=T_(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||E_(l)===E_(c)?(t[a]=Math.max(Ie(w_(l),w_(c),r),0),(An.test(c)||An.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ie(e.rotate||0,n.rotate||0,r))}function T_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const JM=tI(0,.5,xS),ZM=tI(.5,.95,Ot);function tI(t,e,n){return r=>r<t?0:r>e?1:n($s(t,e,r))}function b_(t,e){t.min=e.min,t.max=e.max}function zt(t,e){b_(t.x,e.x),b_(t.y,e.y)}function S_(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function I_(t,e,n,r,i){return t-=e,t=_c(t,1/n,r),i!==void 0&&(t=_c(t,1/i,r)),t}function e4(t,e=0,n=1,r=.5,i,s=t,o=t){if(An.test(e)&&(e=parseFloat(e),e=Ie(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ie(s.min,s.max,r);t===s&&(a-=e),t.min=I_(t.min,e,n,a,i),t.max=I_(t.max,e,n,a,i)}function A_(t,e,[n,r,i],s,o){e4(t,e[n],e[r],e[i],e.scale,s,o)}const t4=["x","scaleX","originX"],n4=["y","scaleY","originY"];function C_(t,e,n,r){A_(t.x,e,t4,n?n.x:void 0,r?r.x:void 0),A_(t.y,e,n4,n?n.y:void 0,r?r.y:void 0)}function P_(t){return t.translate===0&&t.scale===1}function nI(t){return P_(t.x)&&P_(t.y)}function k_(t,e){return t.min===e.min&&t.max===e.max}function r4(t,e){return k_(t.x,e.x)&&k_(t.y,e.y)}function N_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rI(t,e){return N_(t.x,e.x)&&N_(t.y,e.y)}function R_(t){return Ft(t.x)/Ft(t.y)}function j_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class i4{constructor(){this.members=[]}add(e){Og(this.members,e),e.scheduleRender()}remove(e){if(Mg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s4(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:E}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const di={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bo=typeof window<"u"&&window.MotionDebug!==void 0,Rh=["","X","Y","Z"],o4={visibility:"hidden"},D_=1e3;let a4=0;function jh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function iI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ee,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&iI(r)}function sI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=a4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bo&&(di.totalNodes=di.resolvedTargetDeltas=di.recalculatedProjection=0),this.nodes.forEach(c4),this.nodes.forEach(m4),this.nodes.forEach(g4),this.nodes.forEach(d4),Bo&&window.MotionDebug.record(di)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new GM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Fg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qM(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=QM(m,250),Su.hasAnimatedSinceResize&&(Su.hasAnimatedSinceResize=!1,this.nodes.forEach(L_))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||h.getDefaultTransition()||w4,{onLayoutAnimationStart:C,onLayoutAnimationComplete:_}=h.getProps(),x=!this.targetLayout||!rI(this.targetLayout,E)||y,b=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,b);const A={...jg(I,"layout"),onPlay:C,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else m||L_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Hr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(y4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(V_);return}this.isUpdating||this.nodes.forEach(f4),this.isUpdating=!1,this.nodes.forEach(p4),this.nodes.forEach(l4),this.nodes.forEach(u4),this.clearAllSnapshots();const a=Cn.now();Xe.delta=nr(0,1e3/60,a-Xe.timestamp),Xe.timestamp=a,Xe.isProcessing=!0,Th.update.process(Xe),Th.preRender.process(Xe),Th.render.process(Xe),Xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Tg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(h4),this.sharedNodes.forEach(v4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nI(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||ci(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),E4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return De();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(T4))){const{scroll:h}=this.root;h&&(fs(l.x,h.offset.x),fs(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=De();if(zt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&zt(l,o),fs(l.x,p.offset.x),fs(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=De();zt(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ps(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ci(h.latestValues)&&ps(l,h.latestValues)}return ci(this.latestValues)&&ps(l,this.latestValues),l}removeTransform(o){const a=De();zt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ci(c.latestValues))continue;gp(c.latestValues)&&c.updateSnapshot();const h=De(),p=c.measurePageBox();zt(h,p),C_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return ci(this.latestValues)&&C_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Xe.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),sa(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zt(this.target,this.layout.layoutBox),YS(this.target,this.targetDelta)):zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),sa(this.relativeTargetOrigin,this.target,y.target),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bo&&di.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gp(this.parent.latestValues)||QS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Xe.timestamp&&(c=!1),c)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;zt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;VM(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=De());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(S_(this.prevProjectionDelta.x,this.projectionDelta.x),S_(this.prevProjectionDelta.y,this.projectionDelta.y)),ia(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!j_(this.projectionDelta.x,this.prevProjectionDelta.x)||!j_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Bo&&di.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hs(),this.projectionDelta=hs(),this.projectionDeltaWithTransform=hs()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},p=hs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=De(),y=l?l.source:void 0,E=this.layout?this.layout.source:void 0,I=y!==E,C=this.getStack(),_=!C||C.members.length<=1,x=!!(I&&!_&&this.options.crossfade===!0&&!this.path.some(_4));this.animationProgress=0;let b;this.mixTargetDelta=A=>{const j=A/1e3;O_(p.x,o.x,j),O_(p.y,o.y,j),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x4(this.relativeTarget,this.relativeTargetOrigin,m,j),b&&r4(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=De()),zt(b,this.relativeTarget)),I&&(this.animationValues=h,XM(h,c,this.latestValues,j,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Hr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ee.update(()=>{Su.hasAnimatedSinceResize=!0,this.currentAnimation=HM(0,D_,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(D_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&oI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||De();const p=Ft(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=Ft(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}zt(a,l),ps(a,h),ia(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new i4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&jh("z",o,c,this.animationValues);for(let h=0;h<Rh.length;h++)jh(`rotate${Rh[h]}`,o,c,this.animationValues),jh(`skew${Rh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return o4;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Tu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ci(this.latestValues)&&(I.transform=h?h({},""):"none",this.hasProjected=!1),I}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=s4(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:E}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${E.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const I in mc){if(m[I]===void 0)continue;const{correct:C,applyTo:_}=mc[I],x=c.transform==="none"?m[I]:C(m[I],p);if(_){const b=_.length;for(let A=0;A<b;A++)c[_[A]]=x}else c[I]=x}return this.options.layoutId&&(c.pointerEvents=p===this?Tu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(V_),this.root.sharedNodes.clear()}}}function l4(t){t.updateLayout()}function u4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?$t(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Ft(m);m.min=r[p].min,m.max=m.min+y}):oI(s,n.layoutBox,r)&&$t(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Ft(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const a=hs();ia(a,r,n.layoutBox);const l=hs();o?ia(l,t.applyTransform(i,!0),n.measuredBox):ia(l,r,n.layoutBox);const c=!nI(a);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const E=De();sa(E,n.layoutBox,m.layoutBox);const I=De();sa(I,r,y.layoutBox),rI(E,I)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=E,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function c4(t){Bo&&di.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function d4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function h4(t){t.clearSnapshot()}function V_(t){t.clearMeasurements()}function f4(t){t.isLayoutDirty=!1}function p4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function L_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function m4(t){t.resolveTargetDelta()}function g4(t){t.calcProjection()}function y4(t){t.resetSkewAndRotation()}function v4(t){t.removeLeadSnapshot()}function O_(t,e,n){t.translate=Ie(e.translate,0,n),t.scale=Ie(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function M_(t,e,n,r){t.min=Ie(e.min,n.min,r),t.max=Ie(e.max,n.max,r)}function x4(t,e,n,r){M_(t.x,e.x,n.x,r),M_(t.y,e.y,n.y,r)}function _4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const w4={duration:.45,ease:[.4,0,.1,1]},F_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U_=F_("applewebkit/")&&!F_("chrome/")?Math.round:Ot;function B_(t){t.min=U_(t.min),t.max=U_(t.max)}function E4(t){B_(t.x),B_(t.y)}function oI(t,e,n){return t==="position"||t==="preserve-aspect"&&!SM(R_(e),R_(n),.2)}function T4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const b4=sI({attachResizeListener:(t,e)=>Ba(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dh={current:void 0},aI=sI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dh.current){const t=new b4({});t.mount(window),t.setOptions({layoutScroll:!0}),Dh.current=t}return Dh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),S4={pan:{Feature:BM},drag:{Feature:UM,ProjectionNode:aI,MeasureLayout:ZS}};function z_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ee.postRender(()=>s(e,cl(e)))}class I4 extends ti{mount(){const{current:e}=this.node;e&&(this.unmount=SL(e,n=>(z_(this.node,n,"Start"),r=>z_(this.node,r,"End"))))}unmount(){}}class A4 extends ti{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ul(Ba(this.node.current,"focus",()=>this.onFocus()),Ba(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $_(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ee.postRender(()=>s(e,cl(e)))}class C4 extends ti{mount(){const{current:e}=this.node;e&&(this.unmount=PL(e,n=>($_(this.node,n,"Start"),(r,{success:i})=>$_(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vp=new WeakMap,Vh=new WeakMap,P4=t=>{const e=vp.get(t.target);e&&e(t)},k4=t=>{t.forEach(P4)};function N4({root:t,...e}){const n=t||document;Vh.has(n)||Vh.set(n,{});const r=Vh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(k4,{root:t,...e})),r[i]}function R4(t,e,n){const r=N4(e);return vp.set(t,n),r.observe(t),()=>{vp.delete(t),r.unobserve(t)}}const j4={some:0,all:1};class D4 extends ti{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:j4[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=c?h:p;m&&m(l)};return R4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(V4(e,n))&&this.startObserver()}unmount(){}}function V4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const L4={inView:{Feature:D4},tap:{Feature:C4},focus:{Feature:A4},hover:{Feature:I4}},O4={layout:{ProjectionNode:aI,MeasureLayout:ZS}},xp={current:null},lI={current:!1};function M4(){if(lI.current=!0,!!vg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xp.current=t.matches;t.addListener(e),e()}else xp.current=!1}const F4=[...jS,ct,qr],U4=t=>F4.find(RS(t)),W_=new WeakMap;function B4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(pt(i))t.addValue(r,i);else if(pt(s))t.addValue(r,Fa(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Fa(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const H_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class z4{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Cn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ee.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=fd(n),this.isVariantNode=B1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const E=m[y];l[y]!==void 0&&pt(E)&&E.set(l[y],!1)}}mount(e){this.current=e,W_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lI.current||M4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){W_.delete(this.current),this.projection&&this.projection.unmount(),Hr(this.notifyUpdate),Hr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ui.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ee.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ws){const n=Ws[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<H_.length;r++){const i=H_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=B4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Fa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(kS(i)||wS(i))?i=parseFloat(i):!U4(i)&&qr.test(n)&&(i=AS(e,n)),this.setBaseTarget(e,pt(i)?i.get():i)),pt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Sg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Fg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uI extends z4{constructor(){super(...arguments),this.KeyframeResolver=DS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function $4(t){return window.getComputedStyle(t)}class W4 extends uI{constructor(){super(...arguments),this.type="html",this.renderInstance=Y1}readValueFromInstance(e,n){if(Ui.has(n)){const r=Wg(n);return r&&r.default||0}else{const r=$4(e),i=(K1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XS(e,n)}build(e,n,r){Cg(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Rg(e,n,r)}}class H4 extends uI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=De}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ui.has(n)){const r=Wg(n);return r&&r.default||0}return n=X1.has(n)?n:Eg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return eS(e,n,r)}build(e,n,r){Pg(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){J1(e,n,r,i)}mount(e){this.isSVGTag=Ng(e.tagName),super.mount(e)}}const q4=(t,e)=>bg(t)?new H4(e):new W4(e,{allowProjection:t!==R.Fragment}),K4=vL({...gM,...L4,...S4,...O4},q4),te=jV(K4),G4=()=>{const[t,e]=R.useState("desktop");return R.useEffect(()=>{const n=()=>{const r=navigator.userAgent.toLowerCase(),i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r),s=/ipad|android(?!.*mobile)/i.test(r);e(i&&!s?"mobile":s?"tablet":"desktop")};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),t},_p=(t,e=!1)=>{if(!e)return"⚪";switch(t){case"mobile":return"📱";case"tablet":return"📲";case"desktop":default:return"💻"}},wp=(t,e=!1)=>{if(!e)return"Не в сети";switch(t){case"mobile":return"Онлайн с телефона";case"tablet":return"Онлайн с планшета";case"desktop":default:return"Онлайн с компьютера"}};function Q4({name:t,balance:e,income:n=0,expense:r=0,currency:i="PLN",online:s=!1,deviceType:o="desktop",onClick:a}){const l=h=>{const p=parseFloat(h)||0;return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2}).format(p)},c=h=>{const p=parseFloat(h)||0;return p>0?"text-emerald-400":p<0?"text-red-400":"text-zinc-300"};return d.jsxs(te.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"balance-card group",onClick:a,children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:t.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-lg",children:t}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:_p(o,s)}),d.jsx("span",{className:"text-sm text-zinc-400",children:wp(o,s)})]})]})]})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Текущий баланс"}),d.jsxs("div",{className:`text-3xl font-bold transition-colors ${c(e)}`,children:[l(e)," ",i]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{className:"p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[d.jsx("div",{className:"text-xs text-emerald-400 font-medium",children:"ДОХОДЫ"}),d.jsxs("div",{className:"text-lg font-semibold text-emerald-400",children:["+",l(n)," ",i]})]}),d.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("div",{className:"text-xs text-red-400 font-medium",children:"РАСХОДЫ"}),d.jsxs("div",{className:"text-lg font-semibold text-red-400",children:["-",l(r)," ",i]})]})]}),d.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:d.jsx("div",{className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 text-center text-sm font-medium text-zinc-300",children:"Нажмите для добавления операции"})}),d.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-primary opacity-0 group-hover:opacity-20 transition-opacity duration-300 pointer-events-none"})]})}function yi({open:t,title:e,children:n,onClose:r,maxWidth:i="max-w-2xl"}){return R.useEffect(()=>{const s=o=>{o.key==="Escape"&&r()};return t&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[t,r]),d.jsx(La,{children:t&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/20 backdrop-blur-md"}),d.jsxs(te.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:30},className:`relative w-full ${i} max-h-[90vh] overflow-hidden rounded-2xl shadow-2xl border border-white/20`,style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.12) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(40px) saturate(150%)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.7)"},onClick:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold bg-gradient-primary bg-clip-text text-transparent",children:e}),d.jsx("button",{onClick:r,className:"p-2 rounded-xl hover:bg-white/10 transition-all duration-200 text-zinc-400 hover:text-white",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:n})]})]})})}function Y4(){const{profiles:t,categories:e,totals:n,totalsByProfile:r,currency:i,convert:s,addOperation:o,budgetId:a}=mn(),{user:l}=kn(),{playSound:c}=ud(),h=G4(),[p,m]=R.useState(!1),[y,E]=R.useState({type:"income",profileId:"",amount:"",categoryId:"",note:""}),[I,C]=R.useState(null),_=[...t].sort((D,T)=>D.name==="Артур"?-1:T.name==="Артур"?1:0),x=()=>{m(!0),c("click")},b=async D=>{if(D.preventDefault(),!(!y.profileId||!y.amount||!y.categoryId))try{await o(y),E({type:"income",profileId:"",amount:"",categoryId:"",note:""}),m(!1),y.type==="income"?c("coin"):y.type==="expense"?c("add"):y.type==="transfer"?c("notification"):y.type==="goal"&&c("goal")}catch{c("error")}},A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},j={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:12}}};return d.jsxs(te.div,{variants:A,initial:"hidden",animate:"visible",className:"space-y-8",children:[t.length===2&&d.jsx(te.div,{variants:j,className:"space-y-6",children:d.jsx("div",{className:"glass-card rounded-3xl overflow-hidden",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:[d.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:I==="left"?-10:0},transition:{delay:.1,type:"spring",stiffness:300,damping:30},className:"p-6 lg:border-r lg:border-white/10 bg-white/5 cursor-pointer hover:bg-gradient-to-br hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300",onMouseEnter:()=>C("left"),onMouseLeave:()=>C(null),onClick:()=>{E(D=>({...D,profileId:_[0].id})),x()},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:_[0].name.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:_[0].name}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-lg",children:_p(h,_[0].name==="Артур")}),d.jsx("span",{className:"text-zinc-400",children:wp(h,_[0].name==="Артур")})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Текущий баланс"}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[s((r[_[0].id]||{balance:0}).balance).toFixed(2),d.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:i})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-green-400 font-medium text-sm",children:["+",s((r[_[0].id]||{income:0}).income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Доходы"})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-red-400 font-medium text-sm",children:["-",s((r[_[0].id]||{expense:0}).expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Расходы"})]})]})]})]}),d.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,type:"spring",stiffness:300,damping:30},className:"p-6 bg-gradient-to-b from-white/10 to-white/5 text-center relative",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Общий баланс"}),d.jsxs("p",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[s(n.balance).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[d.jsxs("div",{className:"text-green-400",children:[d.jsxs("div",{className:"font-medium",children:["↗ ",s(n.income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500",children:"Общие доходы"})]}),d.jsxs("div",{className:"text-red-400",children:[d.jsxs("div",{className:"font-medium",children:["↘ ",s(n.expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500",children:"Общие расходы"})]})]})]})}),d.jsxs(te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:I==="right"?10:0},transition:{delay:.3,type:"spring",stiffness:300,damping:30},className:"p-6 bg-white/5 cursor-pointer hover:bg-gradient-to-br hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300",onMouseEnter:()=>C("right"),onMouseLeave:()=>C(null),onClick:()=>{E(D=>({...D,profileId:_[1].id})),x()},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:_[1].name.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:_[1].name}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-lg",children:_p("desktop",_[1].name==="Артур")}),d.jsx("span",{className:"text-zinc-400",children:wp("desktop",_[1].name==="Артур")})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Текущий баланс"}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[s((r[_[1].id]||{balance:0}).balance).toFixed(2),d.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:i})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-green-400 font-medium text-sm",children:["+",s((r[_[1].id]||{income:0}).income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Доходы"})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-red-400 font-medium text-sm",children:["-",s((r[_[1].id]||{expense:0}).expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Расходы"})]})]})]})]})]})})}),t.length>2&&d.jsx(te.div,{variants:j,children:d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:[d.jsx("div",{className:"lg:col-span-2 xl:col-span-2",children:d.jsxs("div",{className:"glass-card p-6 rounded-2xl h-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Профили семьи"}),d.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:_.map((D,T)=>{const v=r[D.id]||{balance:0,income:0,expense:0};return d.jsx(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:T*.1},children:d.jsx(Q4,{name:D.name,balance:s(v.balance).toFixed(2),income:s(v.income).toFixed(2),expense:s(v.expense).toFixed(2),currency:i,online:D.name==="Артур",deviceType:D.name==="Артур"?h:"desktop",onClick:()=>{E(S=>({...S,profileId:D.id})),x()}})},D.id)})})]})}),d.jsx("div",{children:d.jsxs(te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"glass-card p-6 rounded-2xl",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Общая статистика"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Общий баланс"}),d.jsxs("p",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[s(n.balance).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-green-500/10 border border-green-500/20",children:[d.jsx("span",{className:"text-green-400 text-sm",children:"Доходы"}),d.jsxs("span",{className:"text-green-400 font-medium",children:["+",s(n.income).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("span",{className:"text-red-400 text-sm",children:"Расходы"}),d.jsxs("span",{className:"text-red-400 font-medium",children:["-",s(n.expense).toFixed(2)," ",i]})]})]})]})]})})]})}),d.jsx(yi,{open:p,onClose:()=>m(!1),title:"Добавить операцию",children:d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Тип операции"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"income",label:"Доход",color:"green"},{value:"expense",label:"Расход",color:"red"}].map(D=>d.jsx("button",{type:"button",onClick:()=>E(T=>({...T,type:D.value,categoryId:""})),className:`p-3 rounded-xl font-medium transition-all duration-300 ${y.type===D.value?`bg-${D.color}-500/20 text-${D.color}-400 border border-${D.color}-500/30`:"bg-white/5 text-zinc-400 border border-white/10 hover:bg-white/10"}`,children:D.label},D.value))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Сумма"}),d.jsx("input",{className:"input",type:"number",placeholder:"0.00",value:y.amount,onChange:D=>E(T=>({...T,amount:D.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Категория"}),d.jsxs("select",{className:"input",value:y.categoryId,onChange:D=>E(T=>({...T,categoryId:D.target.value})),required:!0,children:[d.jsx("option",{value:"",children:"Выберите категорию"}),e.filter(D=>!D.type||D.type===y.type||D.type==="both").map(D=>d.jsxs("option",{value:D.id,children:[D.emoji," ",D.name]},D.id))]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Заметка (необязательно)"}),d.jsx("input",{className:"input",placeholder:"Описание операции",value:y.note,onChange:D=>E(T=>({...T,note:D.target.value}))})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-3 rounded-xl font-medium text-zinc-300 hover:text-white transition-all duration-300 hover:scale-[1.02]",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Отмена"}),d.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"},children:"Добавить"})]})]})})]})}function X4(){const{categories:t,addCategory:e,updateCategory:n,deleteCategory:r}=mn(),[i,s]=R.useState(!1),[o,a]=R.useState(null),[l,c]=R.useState(""),[h,p]=R.useState("🍔"),[m,y]=R.useState("expense"),[E,I]=R.useState(""),C=async A=>{A.preventDefault();const j={name:l,emoji:h,type:m,limit:E?parseFloat(E):0};o?await n(o.id,j):await e(j),s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},_=A=>{a(A),c(A.name),p(A.emoji||"🍔"),y(A.type||"expense"),I(A.limit||""),s(!0)},x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(te.div,{variants:x,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(te.div,{variants:b,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Категории"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"Управление категориями расходов"})]}),d.jsxs("button",{className:"btn-primary px-6 py-3 flex items-center gap-2 hover:scale-105 transition-transform rounded-2xl",onClick:()=>s(!0),children:[d.jsx("span",{className:"text-lg",children:"+"}),"Добавить категорию"]})]}),d.jsx(te.div,{variants:b,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Всего категорий"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.filter(A=>A.limit>0).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"С лимитами"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.reduce((A,j)=>A+(j.limit||0),0).toFixed(0)}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Общий лимит PLN"})]})]})}),t.length>0?d.jsxs(te.div,{variants:b,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Ваши категории"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.jsx(La,{children:t.map((A,j)=>d.jsxs(te.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:j*.1},className:"glass-card p-6 rounded-2xl hover:bg-gradient-to-br hover:from-blue-500/10 hover:to-purple-500/10 transition-all duration-300 group",children:[d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-xl",children:A.emoji||"📂"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-white text-lg",children:A.name}),A.limit>0&&d.jsxs("p",{className:"text-sm text-zinc-400",children:["Лимит: ",d.jsxs("span",{className:"text-amber-400 font-medium",children:[A.limit," PLN"]})]})]})]})}),d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>_(A),className:"btn-secondary flex-1 py-2 text-sm rounded-xl",children:"✏️ Изменить"}),d.jsx("button",{onClick:()=>r(A.id),className:"btn-danger py-2 px-4 text-sm rounded-xl",children:"🗑️"})]})]},A.id))})})]}):d.jsxs(te.div,{variants:b,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📂"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:"Пока нет категорий"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:"Создайте первую категорию для организации расходов"}),d.jsx("button",{className:"btn-primary px-6 py-3 mx-auto rounded-2xl",onClick:()=>s(!0),children:"Создать категорию"})]}),d.jsx(yi,{open:i,onClose:()=>{s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},title:o?"Изменить категорию":"Новая категория",children:d.jsxs("form",{onSubmit:C,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl",placeholder:"🍕",value:h,onChange:A=>p(A.target.value),maxLength:2,required:!0}),d.jsx("p",{className:"text-xs text-zinc-500",children:"Выберите подходящий эмодзи"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название"}),d.jsx("input",{className:"input w-full",placeholder:"Продукты",value:l,onChange:A=>c(A.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Тип"}),d.jsxs("select",{className:"input w-full",value:m,onChange:A=>y(A.target.value),children:[d.jsx("option",{value:"income",children:"Доходы"}),d.jsx("option",{value:"expense",children:"Расходы"}),d.jsx("option",{value:"both",children:"Универсальная"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Лимит расходов (необязательно)"}),d.jsx("input",{className:"input w-full",type:"number",placeholder:"2000",value:E,onChange:A=>I(A.target.value),min:"0",step:"0.01"}),d.jsx("p",{className:"text-xs text-zinc-500",children:"Установите лимит трат по этой категории"})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!l.trim(),className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:o?"Сохранить":"Добавить"})]})]})})]})}function q_({value:t=0,max:e=100,showLabel:n=!0,size:r="md",color:i="primary",className:s=""}){const o=Math.min(100,Math.max(0,Math.round(t/(e||1)*100))),a={sm:"h-2",md:"h-3",lg:"h-4"},l={primary:"from-blue-500 to-purple-600",success:"from-green-500 to-emerald-600",warning:"from-yellow-500 to-orange-600",danger:"from-red-500 to-pink-600",info:"from-cyan-500 to-blue-600"};return d.jsxs("div",{className:`space-y-2 ${s}`,children:[n&&d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-400",children:"Прогресс"}),d.jsxs("span",{className:"font-medium text-zinc-300",children:[o,"% (",t.toLocaleString()," / ",e.toLocaleString(),")"]})]}),d.jsx("div",{className:`w-full bg-zinc-800/50 rounded-full overflow-hidden backdrop-blur-sm ${a[r]}`,children:d.jsx(te.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${l[i]} relative overflow-hidden`,children:d.jsx(te.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}})})})]})}function J4(){const{goals:t,addGoal:e,editGoal:n,deleteGoal:r,contributeToGoal:i,profiles:s,currency:o,convert:a,getGoalSaved:l}=mn(),[c,h]=R.useState(!1),[p,m]=R.useState(!1),[y,E]=R.useState(!1),[I,C]=R.useState(""),[_,x]=R.useState("🎯"),[b,A]=R.useState(""),[j,D]=R.useState(""),[T,v]=R.useState(null),[S,P]=R.useState(""),[N,V]=R.useState(""),[k,re]=R.useState(null),[pe,Ue]=R.useState(!1),[ne,B]=R.useState(null),G=async W=>{W.preventDefault(),await e({name:I,emoji:_,amount:parseFloat(b),deadline:j}),h(!1),C(""),x("🎯"),A(""),D("")},X=async W=>{W.preventDefault(),!(!T||!S||!N)&&(await i(T.id,S,parseFloat(N)),E(!1),P(""),V(""))},ye=W=>{re(W),C(W.name),x(W.emoji||"🎯"),A(W.amount.toString()),D(W.deadline||""),m(!0)},de=async W=>{W.preventDefault(),await n(k.id,{name:I,emoji:_,amount:parseFloat(b),deadline:j}),m(!1),re(null),C(""),x("🎯"),A(""),D("")},be=async W=>{B(W),Ue(!0)},Yt=async()=>{try{await r(ne.id),Ue(!1),B(null)}catch(W){console.error("Error deleting goal:",W)}},Xt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},vt={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},Jt=t.reduce((W,gn)=>W+l(gn.id),0),gd=t.reduce((W,gn)=>W+gn.amount,0),yd=t.filter(W=>l(W.id)>=W.amount).length;return d.jsxs(te.div,{variants:Xt,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(te.div,{variants:vt,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Цели"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"Планируйте и достигайте финансовых целей"})]}),d.jsxs("button",{className:"btn-primary px-6 py-3 flex items-center gap-2 hover:scale-105 transition-transform rounded-2xl",onClick:()=>h(!0),children:[d.jsx("span",{className:"text-lg",children:"+"}),"Добавить цель"]})]}),d.jsx(te.div,{variants:vt,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Всего целей"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:yd}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Достигнуто"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:a(Jt).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Накоплено ",o]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-400",children:a(gd).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Общая цель ",o]})]})]})}),t.length>0?d.jsxs(te.div,{variants:vt,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Ваши цели"}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.jsx(La,{children:t.map((W,gn)=>{const or=l(W.id),Bi=Math.min(or/W.amount*100,100),Nn=or>=W.amount,Rn=W.deadline?Math.ceil((new Date(W.deadline)-new Date)/(1e3*60*60*24)):null;return d.jsxs(te.div,{variants:vt,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:gn*.1},className:`glass-card p-6 rounded-2xl hover:bg-gradient-to-br hover:from-blue-500/10 hover:to-purple-500/10 transition-all duration-300 ${Nn?"ring-2 ring-green-400/50":""}`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-xl",children:W.emoji||"🎯"}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[W.name,Nn&&d.jsx("span",{className:"text-green-400",children:"✅"})]}),W.deadline&&d.jsx("p",{className:"text-sm text-zinc-400",children:Rn>0?d.jsxs("span",{className:Rn<=7?"text-orange-400":"text-zinc-400",children:["📅 ",Rn," дней осталось"]}):Rn===0?d.jsx("span",{className:"text-red-400",children:"📅 Сегодня дедлайн!"}):d.jsxs("span",{className:"text-red-400",children:["📅 Просрочено на ",Math.abs(Rn)," дней"]})})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ye(W),className:"btn-secondary py-2 px-3 text-sm rounded-xl hover:scale-105 transition-transform",title:"Редактировать",children:"✏️"}),d.jsx("button",{onClick:()=>be(W),className:"btn-secondary py-2 px-3 text-sm rounded-xl hover:scale-105 transition-transform hover:bg-red-500/20",title:"Удалить",children:"🗑️"}),d.jsx("button",{onClick:()=>{v(W),E(!0)},className:"btn-secondary py-2 px-4 text-sm rounded-xl hover:scale-105 transition-transform",disabled:Nn,children:"💰 Пополнить"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(q_,{value:or,max:W.amount,color:Nn?"success":Bi>=75?"warning":"primary",showLabel:!0}),d.jsxs("div",{className:"flex justify-between items-center text-sm",children:[d.jsxs("span",{className:"text-zinc-400",children:["Прогресс: ",Bi.toFixed(1),"%"]}),d.jsxs("span",{className:"text-white font-medium",children:[a(or).toFixed(2)," / ",a(W.amount).toFixed(2)," ",o]})]}),Nn&&d.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:d.jsx("span",{className:"text-green-400 font-medium",children:"🎉 Цель достигнута!"})})]})]},W.id)})})})]}):d.jsxs(te.div,{variants:vt,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"🎯"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:"Пока нет целей"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:"Поставьте первую финансовую цель и начните копить"}),d.jsx("button",{className:"btn-primary px-6 py-3 mx-auto rounded-2xl",onClick:()=>h(!0),children:"Поставить цель"})]}),d.jsx(yi,{open:c,onClose:()=>{h(!1),C(""),x("🎯"),A(""),D("")},title:"Новая цель",children:d.jsxs("form",{onSubmit:G,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl rounded-xl",placeholder:"🎯",value:_,onChange:W=>x(W.target.value),maxLength:2})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название цели"}),d.jsx("input",{className:"input w-full rounded-xl",placeholder:"Подушка безопасности",value:I,onChange:W=>C(W.target.value),required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Целевая сумма"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"10000",value:b,onChange:W=>A(W.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дедлайн (необязательно)"}),d.jsx("input",{className:"input w-full rounded-xl",type:"date",value:j,onChange:W=>D(W.target.value),min:new Date().toISOString().split("T")[0]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{h(!1),C(""),x("🎯"),A(""),D("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!I.trim()||!b,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Создать цель"})]})]})}),d.jsx(yi,{open:p,onClose:()=>{m(!1),re(null),C(""),x("🎯"),A(""),D("")},title:"Редактировать цель",children:d.jsxs("form",{onSubmit:de,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl rounded-xl",placeholder:"🎯",value:_,onChange:W=>x(W.target.value),maxLength:2})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название цели"}),d.jsx("input",{className:"input w-full rounded-xl",placeholder:"Подушка безопасности",value:I,onChange:W=>C(W.target.value),required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Целевая сумма"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"10000",value:b,onChange:W=>A(W.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дедлайн (необязательно)"}),d.jsx("input",{className:"input w-full rounded-xl",type:"date",value:j,onChange:W=>D(W.target.value),min:new Date().toISOString().split("T")[0]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{m(!1),re(null),C(""),x("🎯"),A(""),D("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!I.trim()||!b,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Сохранить"})]})]})}),d.jsx(yi,{open:y,onClose:()=>{E(!1),P(""),V("")},title:`Пополнить цель "${T==null?void 0:T.name}"`,children:d.jsxs("form",{onSubmit:X,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Выберите профиль"}),d.jsxs("select",{className:"input w-full rounded-xl",value:S,onChange:W=>P(W.target.value),required:!0,children:[d.jsx("option",{value:"",children:"Выберите профиль для списания"}),s.map(W=>d.jsx("option",{value:W.id,children:W.name},W.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Сумма пополнения"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"1000",value:N,onChange:W=>V(W.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),T&&d.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:d.jsxs("div",{className:"text-sm text-zinc-300",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("span",{children:"Текущий прогресс:"}),d.jsxs("span",{children:[a(l(T.id)).toFixed(2)," / ",a(T.amount).toFixed(2)," ",o]})]}),d.jsx(q_,{value:l(T.id),max:T.amount,size:"sm",showLabel:!1})]})}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{E(!1),P(""),V("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!S||!N,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Пополнить"})]})]})}),d.jsx(yi,{open:pe,onClose:()=>{Ue(!1),B(null)},title:"Удаление цели",children:d.jsxs("div",{className:"space-y-6",children:[ne&&d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"text-4xl mb-4",children:ne.emoji||"🎯"}),d.jsxs("h3",{className:"text-xl font-medium text-zinc-200",children:['Удалить цель "',ne.name,'"?']}),d.jsx("p",{className:"text-zinc-400",children:"Это действие нельзя будет отменить. Все данные о цели и прогрессе будут удалены."}),d.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-4 mt-4 text-left",children:[d.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[d.jsx("span",{className:"text-zinc-400",children:"Целевая сумма:"}),d.jsxs("span",{className:"text-white",children:[a(ne.amount).toFixed(2)," ",o]})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-400",children:"Накоплено:"}),d.jsxs("span",{className:"text-white",children:[a(l(ne.id)).toFixed(2)," ",o]})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{onClick:()=>{Ue(!1),B(null)},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{onClick:Yt,className:"flex-1 px-6 py-3 rounded-xl border border-red-500/30 text-white hover:bg-gradient-to-r hover:from-red-500/20 hover:to-red-600/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.2))",backdropFilter:"blur(10px)"},children:"Удалить"})]})]})})]})}function Z4(){const{operations:t,profiles:e,categories:n,currency:r,convert:i,deleteOperation:s}=mn(),{playSound:o}=ud(),[a,l]=R.useState({profile:"",category:"",type:"",date:"",search:""}),[c,h]=R.useState(!1),p=A=>{s(A),o("delete")},m=A=>{const j=A!=null&&A.toDate?A.toDate():new Date(A),D=String(j.getDate()).padStart(2,"0"),T=String(j.getMonth()+1).padStart(2,"0"),v=j.getFullYear(),S=String(j.getHours()).padStart(2,"0"),P=String(j.getMinutes()).padStart(2,"0");return`${D}.${T}.${v} ${S}:${P}`},y=A=>{const j=A!=null&&A.toDate?A.toDate():new Date(A),D=new Date,T=new Date(D);if(T.setDate(T.getDate()-1),j.toDateString()===D.toDateString())return"Сегодня";if(j.toDateString()===T.toDateString())return"Вчера";const v=String(j.getDate()).padStart(2,"0"),S=String(j.getMonth()+1).padStart(2,"0");return`${v}.${S}`},E={income:{label:"Доход",color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/20",icon:"💰"},expense:{label:"Расход",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/20",icon:"💸"},transfer:{label:"Перевод",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:"🔄"},goal:{label:"Цель",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20",icon:"🎯"}},I=R.useMemo(()=>t.filter(A=>{var j,D,T,v,S;if(a.profile&&A.profileId!==a.profile||a.category&&A.categoryId!==a.category||a.type&&A.type!==a.type)return!1;if(a.date){const P=(j=A.date)!=null&&j.toDate?A.date.toDate():new Date(A.date),N=new Date(a.date);if(P.toDateString()!==N.toDateString())return!1}if(a.search){const P=a.search.toLowerCase(),N=e.find(k=>k.id===A.profileId),V=n.find(k=>k.id===A.categoryId);if(!((D=A.note)!=null&&D.toLowerCase().includes(P))&&!((T=N==null?void 0:N.name)!=null&&T.toLowerCase().includes(P))&&!((v=V==null?void 0:V.name)!=null&&v.toLowerCase().includes(P))&&!((S=E[A.type])!=null&&S.label.toLowerCase().includes(P)))return!1}return!0}).sort((A,j)=>{var v,S;const D=(v=A.date)!=null&&v.toDate?A.date.toDate():new Date(A.date);return((S=j.date)!=null&&S.toDate?j.date.toDate():new Date(j.date))-D}),[t,a,e,n]),C=R.useMemo(()=>{const A=I.filter(v=>v.type==="income").reduce((v,S)=>v+S.amount,0),j=I.filter(v=>v.type==="expense").reduce((v,S)=>v+S.amount,0),D=I.filter(v=>v.type==="transfer").reduce((v,S)=>v+S.amount,0),T=I.filter(v=>v.type==="goal").reduce((v,S)=>v+S.amount,0);return{totalIncome:A,totalExpense:j,totalTransfer:D,totalGoal:T}},[I]),_=()=>{l({profile:"",category:"",type:"",date:"",search:""})},x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(te.div,{variants:x,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(te.div,{variants:b,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Операции"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"История всех финансовых операций"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>h(!c),className:`btn-secondary px-4 py-2 rounded-xl flex items-center gap-2 transition-all ${c?"bg-blue-500/20 text-blue-400":""}`,children:["🔍 Фильтры",d.jsx("span",{className:`transition-transform ${c?"rotate-180":""}`,children:"▼"})]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Показано: ",d.jsx("span",{className:"text-white font-medium",children:I.length})," из ",t.length]})]})]}),d.jsx(te.div,{variants:b,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["+",i(C.totalIncome).toFixed(0)]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Доходы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["-",i(C.totalExpense).toFixed(0)]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Расходы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i(C.totalTransfer).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Переводы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i(C.totalGoal).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["В цели ",r]})]})]})}),d.jsx(La,{children:c&&d.jsxs(te.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",className:"glass-card p-6 rounded-2xl space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Фильтры"}),d.jsx("button",{onClick:_,className:"text-sm text-zinc-400 hover:text-white transition-colors",children:"Очистить все"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Поиск"}),d.jsx("input",{type:"text",className:"input w-full rounded-xl",placeholder:"Поиск по заметке, профилю...",value:a.search,onChange:A=>l(j=>({...j,search:A.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Профиль"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.profile,onChange:A=>l(j=>({...j,profile:A.target.value})),children:[d.jsx("option",{value:"",children:"Все профили"}),e.map(A=>d.jsx("option",{value:A.id,children:A.name},A.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Тип операции"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.type,onChange:A=>l(j=>({...j,type:A.target.value})),children:[d.jsx("option",{value:"",children:"Все типы"}),Object.entries(E).map(([A,j])=>d.jsxs("option",{value:A,children:[j.icon," ",j.label]},A))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Категория"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.category,onChange:A=>l(j=>({...j,category:A.target.value})),children:[d.jsx("option",{value:"",children:"Все категории"}),n.map(A=>d.jsxs("option",{value:A.id,children:[A.emoji," ",A.name]},A.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дата"}),d.jsx("input",{type:"date",className:"input w-full rounded-xl",value:a.date,onChange:A=>l(j=>({...j,date:A.target.value}))})]})]})]})}),I.length>0?d.jsx(te.div,{variants:b,className:"space-y-4",children:d.jsx("div",{className:"space-y-3",children:d.jsx(La,{children:I.map((A,j)=>{const D=e.find(S=>S.id===A.profileId),T=n.find(S=>S.id===A.categoryId),v=E[A.type];return d.jsx(te.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:j*.02},className:"glass-card p-4 rounded-2xl hover:bg-white/5 transition-all duration-300 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-2xl ${v.bg} ${v.border} border flex items-center justify-center text-xl`,children:v.icon}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:`inline-block px-2 py-1 rounded-lg text-xs font-medium ${v.bg} ${v.color} ${v.border} border`,children:v.label}),T&&d.jsxs("span",{className:"text-xs text-zinc-400",children:[T.emoji," ",T.name]})]}),d.jsx("div",{className:"text-sm text-zinc-300",children:A.note||"Без описания"}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-500 mt-1",children:[d.jsxs("span",{children:["👤 ",(D==null?void 0:D.name)||"Неизвестно"]}),d.jsxs("span",{children:["📅 ",m(A.date)]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:`text-lg font-bold ${v.color}`,children:[A.type==="expense"?"-":"+",i(A.amount).toFixed(2)," ",r]}),d.jsx("div",{className:"text-xs text-zinc-400",children:y(A.date)})]}),d.jsx("button",{onClick:()=>p(A.id),className:"opacity-0 group-hover:opacity-100 p-2 rounded-xl hover:bg-red-500/20 text-red-400 hover:text-red-300 transition-all",title:"Удалить операцию",children:"🗑️"})]})]})},A.id)})})})}):d.jsxs(te.div,{variants:b,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📊"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:t.length===0?"Нет операций":"Операции не найдены"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:t.length===0?"Добавьте первую операцию через главную страницу":"Попробуйте изменить параметры поиска"}),t.length>0&&d.jsx("button",{onClick:_,className:"btn-primary px-6 py-3 rounded-2xl",children:"Очистить фильтры"})]})]})}function e3(){var V;const{currency:t,setCurrency:e,theme:n,toggleTheme:r,rates:i,leaveFamily:s,budgetId:o}=mn(),{user:a}=kn(),{playSound:l}=ud(),[c,h]=R.useState(!0),[p,m]=R.useState(!0),[y,E]=R.useState(!0),[I,C]=R.useState("ru"),[_,x]=R.useState(localStorage.getItem("soundEnabled")!=="false");R.useEffect(()=>{localStorage.setItem("soundEnabled",_)},[_]);const b=k=>{x(k),k&&l("success")},A=()=>{r(),l("click")},j=()=>{l("success"),console.log("Экспорт данных...")},D=()=>{l("notification"),console.log("Импорт данных...")},T=()=>{l("add"),console.log("Синхронизация...")},v=()=>{l("error"),console.log("Очистка данных...")},S=async()=>{if(!o){alert("Вы не состоите в семье");return}if(window.confirm("Вы уверены, что хотите покинуть семью? Это действие нельзя отменить.")){l("warning");try{await s()?(l("success"),alert("Вы успешно покинули семью")):(l("error"),alert("Ошибка при выходе из семьи. Попробуйте позже."))}catch(k){console.error("Error leaving family:",k),l("error"),alert("Произошла ошибка. Проверьте подключение к интернету.")}}},P=[{value:"PLN",label:"PLN — Польский злотый",flag:"🇵🇱"},{value:"USD",label:"USD — Доллар США",flag:"🇺🇸"},{value:"UAH",label:"UAH — Украинская гривна",flag:"🇺🇦"},{value:"EUR",label:"EUR — Евро",flag:"🇪🇺"},{value:"RUB",label:"RUB — Российский рубль",flag:"🇷🇺"}],N=[{value:"ru",label:"Русский",flag:"🇷🇺"},{value:"en",label:"English",flag:"🇺🇸"},{value:"pl",label:"Polski",flag:"🇵🇱"},{value:"uk",label:"Українська",flag:"🇺🇦"}];return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"⚙️ Настройки"}),d.jsx("p",{className:"text-zinc-400",children:"Персонализируйте свой опыт работы с Budget Buddy"})]}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"👤 Профиль"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((V=a==null?void 0:a.email)==null?void 0:V.charAt(0).toUpperCase())||"U"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-white",children:(a==null?void 0:a.email)||"Не авторизован"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Основной аккаунт"})]})]}),d.jsx("div",{className:"p-3 rounded-xl",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)"},children:d.jsx("div",{className:"text-sm text-green-400",children:"✅ Аккаунт подтвержден"})})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🎨 Внешний вид"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Тема оформления"}),d.jsxs("button",{onClick:A,className:"w-full p-3 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] flex items-center justify-center gap-2",style:{background:n==="dark"?"linear-gradient(135deg, #1e293b, #334155)":"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("span",{className:"text-lg",children:n==="dark"?"🌙":"☀️"}),n==="dark"?"Тёмная тема":"Светлая тема"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Язык интерфейса"}),d.jsx("select",{className:"w-full px-4 py-3 rounded-xl text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},value:I,onChange:k=>C(k.target.value),children:N.map(k=>d.jsxs("option",{value:k.value,style:{background:"#1e293b"},children:[k.flag," ",k.label]},k.value))})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"💰 Валюта и финансы"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Основная валюта"}),d.jsx("select",{className:"w-full px-4 py-3 rounded-xl text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},value:t,onChange:k=>e(k.target.value),children:P.map(k=>d.jsxs("option",{value:k.value,style:{background:"#1e293b"},children:[k.flag," ",k.label]},k.value))})]}),d.jsx("div",{children:d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("span",{className:"text-white",children:"Показывать десятичные разряды"}),d.jsx("input",{type:"checkbox",checked:y,onChange:k=>E(k.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-green-500 checked:border-green-500 transition-all duration-300"})]})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Текущие курсы валют"}),d.jsxs("div",{className:"space-y-2",children:[Object.entries(i||{}).map(([k,re])=>d.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsxs("span",{className:"text-zinc-400",children:[k,":"]}),d.jsxs("span",{className:"text-white font-medium",children:[re.toFixed(2)," PLN"]})]},k)),d.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsx("span",{className:"text-zinc-400",children:"PLN:"}),d.jsx("span",{className:"text-white font-medium",children:"1.00 PLN"})]})]})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🔔 Уведомления и поведение"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Уведомления"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Получать уведомления о транзакциях"})]}),d.jsx("input",{type:"checkbox",checked:c,onChange:k=>h(k.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-blue-500 checked:border-blue-500 transition-all duration-300"})]}),d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Автосохранение"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Автоматически сохранять изменения"})]}),d.jsx("input",{type:"checkbox",checked:p,onChange:k=>m(k.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-green-500 checked:border-green-500 transition-all duration-300"})]}),d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Звуковые эффекты"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Звуки при взаимодействии"})]}),d.jsx("input",{type:"checkbox",checked:_,onChange:k=>b(k.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-purple-500 checked:border-purple-500 transition-all duration-300"})]})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
            linear-gradient(145deg, 
              rgba(255, 255, 255, 0.1) 0%, 
              rgba(255, 255, 255, 0.05) 100%
            )
          `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🛠️ Дополнительные действия"}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[d.jsxs("button",{onClick:j,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(99, 102, 241, 0.1))",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"📊"}),d.jsx("div",{className:"text-white font-medium",children:"Экспорт данных"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Скачать данные"})]}),d.jsxs("button",{onClick:D,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1))",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"📥"}),d.jsx("div",{className:"text-white font-medium",children:"Импорт данных"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Загрузить данные"})]}),d.jsxs("button",{onClick:T,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🔄"}),d.jsx("div",{className:"text-white font-medium",children:"Синхронизация"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Синхронизировать"})]}),o&&d.jsxs("button",{onClick:S,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.1))",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🚪"}),d.jsx("div",{className:"text-white font-medium",children:"Покинуть семью"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Выйти из группы"})]}),d.jsxs("button",{onClick:v,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🗑️"}),d.jsx("div",{className:"text-white font-medium",children:"Очистить данные"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Удалить все"})]})]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),K_=t=>{const e=n3(t);return e.charAt(0).toUpperCase()+e.slice(1)},cI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),r3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>R.createElement("svg",{ref:l,...i3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cI("lucide",i),...!s&&!r3(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>R.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=(t,e)=>{const n=R.forwardRef(({className:r,...i},s)=>R.createElement(s3,{ref:s,iconNode:e,className:cI(`lucide-${t3(K_(t))}`,`lucide-${t}`,r),...i}));return n.displayName=K_(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],a3=dI("square-pen",o3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],u3=dI("triangle-alert",l3);function c3(){const{categories:t,spentByCategory:e,currency:n,convert:r,setLimitForCategory:i}=mn(),[s,o]=R.useState(null),[a,l]=R.useState(""),c=async(C,_)=>{try{await i(C,_),o(null),l("")}catch(x){console.error("Ошибка сохранения лимита:",x)}},h=C=>{var _;o(C.id),l(((_=C.limit)==null?void 0:_.toString())||"")},p=()=>{o(null),l("")},m=C=>{const _=e[C.id]||0,x=C.limit||0,b=x>0?Math.min(_/x*100,100):0,A=Math.max(x-_,0);return{spent:_,limit:x,percentage:b,remaining:A}},y=C=>C>=100?"red":C>=80?"yellow":"green",E={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,staggerChildren:.1}}},I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return d.jsxs(te.div,{variants:E,initial:"hidden",animate:"visible",className:"min-h-screen p-4 space-y-6",children:[d.jsxs(te.div,{variants:I,className:"text-center space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Лимиты категорий"}),d.jsx("p",{className:"text-zinc-400",children:"Управляйте бюджетами для каждой категории"})]}),d.jsxs(te.div,{variants:I,className:"glass-card p-6 rounded-2xl",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Общая статистика"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"text-center p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.filter(C=>C.limit>0).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Категорий с лимитами"})]}),d.jsxs("div",{className:"text-center p-4 rounded-xl bg-green-500/10 border border-green-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.filter(C=>{const{percentage:_}=m(C);return C.limit>0&&_<80}).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"В безопасной зоне"})]}),d.jsxs("div",{className:"text-center p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.filter(C=>{const{percentage:_}=m(C);return C.limit>0&&_>=100}).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Лимиты превышены"})]})]})]}),d.jsxs(te.div,{variants:I,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-white",children:"Категории"}),d.jsx("div",{className:"grid gap-4",children:t.map(C=>{const{spent:_,limit:x,percentage:b,remaining:A}=m(C),j=y(b),D=s===C.id;return d.jsx(te.div,{variants:I,className:"glass-card p-6 rounded-2xl",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:C.emoji}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:C.name}),d.jsx("div",{className:"text-sm text-zinc-400",children:C.type==="income"?"Доходы":C.type==="expense"?"Расходы":"Универсальная"})]})]}),d.jsx("div",{className:"flex items-center gap-2",children:!D&&d.jsx("button",{onClick:()=>h(C),className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:d.jsx(a3,{className:"w-4 h-4 text-zinc-400"})})})]}),d.jsxs("div",{className:"space-y-3",children:[D?d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"number",className:"input flex-1",placeholder:"Введите лимит",value:a,onChange:T=>l(T.target.value),onKeyPress:T=>{T.key==="Enter"&&c(C.id,Number(a))}}),d.jsx("button",{onClick:()=>c(C.id,Number(a)),className:"px-4 py-2 rounded-xl bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors",children:"Сохранить"}),d.jsx("button",{onClick:p,className:"px-4 py-2 rounded-xl bg-white/5 text-zinc-400 hover:bg-white/10 transition-colors",children:"Отмена"})]}):d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-zinc-400",children:"Лимит"}),d.jsx("div",{className:"text-lg font-semibold text-white",children:x>0?`${r(x).toFixed(2)} ${n}`:"Не установлен"})]}),x>0&&d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`text-sm font-medium ${j==="red"?"text-red-400":j==="yellow"?"text-yellow-400":"text-green-400"}`,children:j==="red"?`Превышен на ${r(_-x).toFixed(2)} ${n}`:`${r(A).toFixed(2)} ${n} осталось`}),d.jsxs("div",{className:"text-xs text-zinc-400",children:[r(_).toFixed(2)," / ",r(x).toFixed(2)," ",n]})]})]}),x>0&&!D&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-500 ${j==="red"?"bg-red-500":j==="yellow"?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(b,100)}%`}})}),d.jsxs("div",{className:"flex justify-between text-xs text-zinc-400",children:[d.jsxs("span",{children:["0 ",n]}),d.jsxs("span",{children:[b.toFixed(1),"%"]}),d.jsxs("span",{children:[r(x).toFixed(0)," ",n]})]})]}),x>0&&b>=80&&!D&&d.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-xl ${j==="red"?"bg-red-500/10 border border-red-500/20 text-red-400":"bg-yellow-500/10 border border-yellow-500/20 text-yellow-400"}`,children:[d.jsx(u3,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:j==="red"?"Лимит превышен! Рекомендуется сократить расходы.":"Лимит почти исчерпан. Будьте осторожны с тратами."})]})]})]})},C.id)})})]})]})}function d3(){const{login:t}=kn(),[e,n]=R.useState(""),[r,i]=R.useState(""),[s,o]=R.useState(null),[a,l]=R.useState(!1),c=Ka();async function h(p){p.preventDefault(),l(!0),o(null);try{await t(e,r),c("/")}catch(m){o(m.message==="Firebase: Error (auth/invalid-credential)."?"Неверный email или пароль":"Ошибка входа. Попробуйте еще раз")}finally{l(!1)}}return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:`
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
          linear-gradient(135deg, rgba(15, 15, 25, 0.95) 0%, rgba(25, 25, 40, 0.9) 100%)
        `},children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #6366f1, #8b5cf6)",filter:"blur(100px)"}}),d.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #8b5cf6, #06b6d4)",filter:"blur(80px)"}})]}),d.jsx("div",{className:"relative w-full max-w-md",children:d.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:`
              0 25px 50px rgba(0, 0, 0, 0.25),
              inset 0 1px 0 rgba(255, 255, 255, 0.2)
            `},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl shadow-lg",children:"🔐"}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"Вход"}),d.jsx("p",{className:"text-zinc-400 text-sm",children:"Добро пожаловать в Budget Buddy"})]}),s&&d.jsx("div",{className:"mb-6 p-4 rounded-xl text-red-300 text-sm",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(10px)"},children:s}),d.jsxs("form",{onSubmit:h,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш email",value:e,onChange:p=>n(p.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш пароль",value:r,onChange:p=>i(p.target.value),required:!0})]}),d.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 10px 25px rgba(99, 102, 241, 0.3)"},children:a?d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Вход..."]}):"Войти"})]}),d.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:d.jsxs("p",{className:"text-zinc-400 text-sm",children:["Нет аккаунта?"," ",d.jsx(ws,{to:"/register",className:"text-blue-400 hover:text-blue-300 transition-colors font-medium",children:"Зарегистрироваться"})]})})]})})]})}function h3(){const{register:t}=kn(),[e,n]=R.useState(""),[r,i]=R.useState(""),[s,o]=R.useState(""),[a,l]=R.useState(null),[c,h]=R.useState(!1),p=Ka();async function m(y){if(y.preventDefault(),r!==s){l("Пароли не совпадают");return}if(r.length<6){l("Пароль должен содержать минимум 6 символов");return}h(!0),l(null);try{await t(e,r),p("/")}catch(E){E.message.includes("email-already-in-use")?l("Этот email уже используется"):E.message.includes("weak-password")?l("Слишком простой пароль"):E.message.includes("invalid-email")?l("Неверный формат email"):l("Ошибка регистрации. Попробуйте еще раз")}finally{h(!1)}}return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:`
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
          linear-gradient(135deg, rgba(15, 15, 25, 0.95) 0%, rgba(25, 25, 40, 0.9) 100%)
        `},children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #6366f1, #8b5cf6)",filter:"blur(100px)"}}),d.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #8b5cf6, #06b6d4)",filter:"blur(80px)"}})]}),d.jsx("div",{className:"relative w-full max-w-md",children:d.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:`
              0 25px 50px rgba(0, 0, 0, 0.25),
              inset 0 1px 0 rgba(255, 255, 255, 0.2)
            `},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-2xl shadow-lg",children:"✨"}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"Регистрация"}),d.jsx("p",{className:"text-zinc-400 text-sm",children:"Создайте аккаунт для управления бюджетом"})]}),a&&d.jsx("div",{className:"mb-6 p-4 rounded-xl text-red-300 text-sm",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(10px)"},children:a}),d.jsxs("form",{onSubmit:m,className:"space-y-5",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш email",value:e,onChange:y=>n(y.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Минимум 6 символов",value:r,onChange:y=>i(y.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Подтвердите пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Повторите пароль",value:s,onChange:y=>o(y.target.value),required:!0})]}),d.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",boxShadow:"0 10px 25px rgba(139, 92, 246, 0.3)"},children:c?d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Создание аккаунта..."]}):"Создать аккаунт"})]}),d.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:d.jsxs("p",{className:"text-zinc-400 text-sm",children:["Уже есть аккаунт?"," ",d.jsx(ws,{to:"/login",className:"text-purple-400 hover:text-purple-300 transition-colors font-medium",children:"Войти"})]})})]})})]})}function f3(){const{budgetId:t,budgetCode:e,createBudget:n,joinBudget:r,updateBudgetCode:i}=mn(),[s,o]=R.useState(!1),[a,l]=R.useState(""),[c,h]=R.useState(e||""),p=async I=>{I.preventDefault(),await r(a),o(!1),l("")},m=async I=>{I.preventDefault(),c&&await i(c)},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return d.jsxs(te.div,{className:"space-y-8",variants:y,initial:"hidden",animate:"visible",children:[d.jsx(te.div,{variants:E,className:"text-center space-y-4",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-4xl lg:text-5xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"👨‍👩‍👧‍👦 Семья"}),d.jsx("p",{className:"text-zinc-400 text-lg",children:"Управление семейным бюджетом"})]})}),t?d.jsx(te.div,{variants:E,className:"space-y-6",children:d.jsx(te.div,{className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden border border-white/20",style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.15) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(25px) saturate(120%)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.6)"},children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"🏠 Ваш семейный бюджет"}),d.jsx("p",{className:"text-zinc-400",children:"Активен и готов к использованию"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"ID бюджета (Firestore)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{className:"input w-full bg-black/20 border-white/10 text-zinc-300",value:t,readOnly:!0}),d.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-zinc-500",children:"🔒"})]})]}),d.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Короткий код (редактируемый)"}),d.jsx("input",{className:"input w-full bg-black/20 border-white/10 text-white",value:c,onChange:I=>h(I.target.value),placeholder:"Введите удобный код для семьи"})]}),d.jsx("button",{type:"submit",className:"w-full px-6 py-3 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"💾 Сохранить код"})]})]})]})})}):d.jsx(te.div,{variants:E,className:"space-y-6",children:d.jsx(te.div,{className:"backdrop-blur-2xl rounded-2xl p-8 shadow-2xl relative overflow-hidden border border-white/20",style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.15) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(25px) saturate(120%)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.6)"},children:d.jsxs("div",{className:"text-center space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"🏠 Семейный бюджет"}),d.jsx("p",{className:"text-zinc-400",children:"Создайте новый или присоединитесь к существующему"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{className:"p-6 rounded-xl border border-green-500/30 text-white hover:bg-gradient-to-r hover:from-green-500/20 hover:to-emerald-500/20 transition-all duration-300 backdrop-blur-xl group",onClick:n,style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.2))",backdropFilter:"blur(10px)"},children:[d.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"✨"}),d.jsx("div",{className:"font-medium",children:"Создать семейный бюджет"}),d.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:"Новый бюджет для вашей семьи"})]}),d.jsxs("button",{className:"p-6 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl group",onClick:()=>o(!0),style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:[d.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"🤝"}),d.jsx("div",{className:"font-medium",children:"Присоединиться"}),d.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:"К существующему бюджету"})]})]})]})})}),d.jsx(yi,{open:s,onClose:()=>o(!1),title:"Присоединиться к семейному бюджету",children:d.jsxs("form",{onSubmit:p,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"ID или короткий код"}),d.jsx("input",{className:"input w-full",placeholder:"Введите ID или короткий код семьи",value:a,onChange:I=>l(I.target.value)})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Присоединиться"})]})]})})]})}function p3(){const{user:t,loading:e,error:n}=kn(),{budgetId:r,budgetCode:i,profiles:s,categories:o}=mn();return d.jsxs("div",{className:"card p-6 space-y-4 max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"🔧 Диагностика"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Аутентификация"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["Загрузка: ",e?"✅":"❌"]}),d.jsxs("div",{children:["Ошибка: ",n||"Нет"]}),d.jsxs("div",{children:["Пользователь: ",t?`✅ ${t.email}`:"❌"]}),d.jsxs("div",{children:["UID: ",(t==null?void 0:t.uid)||"Нет"]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Бюджет"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["ID бюджета: ",r||"Нет"]}),d.jsxs("div",{children:["Код бюджета: ",i||"Нет"]}),d.jsxs("div",{children:["Профилей: ",s.length]}),d.jsxs("div",{children:["Категорий: ",o.length]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Браузер"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["User Agent: ",navigator.userAgent]}),d.jsxs("div",{children:["Local Storage: ",typeof Storage<"u"?"✅":"❌"]}),d.jsxs("div",{children:["Online: ",navigator.onLine?"✅":"❌"]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Переменные окружения"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["NODE_ENV: ","production"]}),d.jsxs("div",{children:["Режим: ","production"]}),d.jsxs("div",{children:["Dev: ","❌"]})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Console Logs"}),d.jsx("div",{className:"text-xs text-zinc-400",children:"Откройте DevTools (F12) → Console для просмотра подробных логов"})]})]})}function hr({children:t}){const{user:e,loading:n}=kn();return n?d.jsx(D1,{text:"Проверяем авторизацию..."}):e?d.jsx(wV,{children:t}):d.jsx(s2,{to:"/login",replace:!0})}function m3(){return console.log("📱 App component rendering..."),d.jsx(yV,{children:d.jsx(vV,{children:d.jsxs("div",{className:"min-h-screen bg-gradient-hero",children:[d.jsx(xV,{}),d.jsx("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:d.jsxs(a2,{children:[d.jsx(nn,{path:"/",element:d.jsx(hr,{children:d.jsx(Y4,{})})}),d.jsx(nn,{path:"/categories",element:d.jsx(hr,{children:d.jsx(X4,{})})}),d.jsx(nn,{path:"/goals",element:d.jsx(hr,{children:d.jsx(J4,{})})}),d.jsx(nn,{path:"/operations",element:d.jsx(hr,{children:d.jsx(Z4,{})})}),d.jsx(nn,{path:"/limits",element:d.jsx(hr,{children:d.jsx(c3,{})})}),d.jsx(nn,{path:"/settings",element:d.jsx(hr,{children:d.jsx(e3,{})})}),d.jsx(nn,{path:"/budget",element:d.jsx(hr,{children:d.jsx(f3,{})})}),d.jsx(nn,{path:"/debug",element:d.jsx(hr,{children:d.jsx(p3,{})})}),d.jsx(nn,{path:"/login",element:d.jsx(d3,{})}),d.jsx(nn,{path:"/register",element:d.jsx(h3,{})})]})})]})})})}class g3 extends Ip.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"card p-8 max-w-md text-center space-y-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"Что-то пошло не так"}),d.jsx("p",{className:"text-zinc-400",children:"Произошла ошибка при загрузке приложения. Попробуйте обновить страницу."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Обновить страницу"}),!1]})}):this.props.children}}function y3(){return d.jsx("div",{style:{minHeight:"100vh",background:"#09090b",color:"#fafafa",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui",padding:"20px"},children:d.jsxs("div",{style:{background:"#18181b",padding:"32px",borderRadius:"16px",border:"1px solid #27272a",textAlign:"center",maxWidth:"500px"},children:[d.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#6366f1",marginBottom:"16px"},children:"🔧 Режим отладки"}),d.jsx("p",{style:{color:"#a1a1aa",marginBottom:"24px",lineHeight:"1.5"},children:"Приложение запущено в автономном режиме для диагностики проблем."}),d.jsxs("div",{style:{background:"#0f0f23",padding:"16px",borderRadius:"8px",marginBottom:"20px",textAlign:"left",fontSize:"14px"},children:[d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"✅ React:"})," Загружен успешно"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"✅ CSS:"})," Базовые стили применены"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"🔍 Firebase:"})," Проверяется..."]}),d.jsxs("div",{children:[d.jsx("strong",{children:"🌐 Сеть:"})," ",navigator.onLine?"Подключена":"Отключена"]})]}),d.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#6366f1",color:"white",padding:"12px 24px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"500"},children:"Попробовать снова"}),d.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"#71717a"},children:"Откройте DevTools (F12) для просмотра подробных логов"})]})})}console.log("🚀 Starting React app...");console.log("Environment:",{NODE_ENV:"production",MODE:"production",DEV:!1,BASE_URL:"./"});const Qg=document.getElementById("root");console.log("Root element found:",!!Qg);if(!Qg)throw console.error("❌ Root element not found! Check your HTML."),new Error("Root element not found");async function v3(){let t=!0;try{await WI(()=>Promise.resolve().then(()=>gV),void 0,import.meta.url),console.log("✅ Firebase config loaded")}catch(e){console.error("❌ Firebase config failed to load:",e),t=!1}try{const e=aT(Qg);console.log("✅ React root created successfully"),t?e.render(d.jsx(Ip.StrictMode,{children:d.jsx(g3,{children:d.jsx(m2,{children:d.jsx(m3,{})})})})):(console.log("🔧 Starting in offline mode"),e.render(d.jsx(y3,{}))),console.log("✅ App rendered successfully")}catch(e){console.error("❌ Failed to render app:",e),document.body.innerHTML=`
      <div style="
        min-height: 100vh; 
        background: #09090b; 
        color: #fafafa; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        font-family: system-ui;
        padding: 20px;
      ">
        <div style="text-align: center; max-width: 500px;">
          <h1 style="color: #ef4444; font-size: 24px; margin-bottom: 16px;">
            Ошибка загрузки приложения
          </h1>
          <p style="color: #a1a1aa; margin-bottom: 20px;">
            ${e.message}
          </p>
          <button onclick="window.location.reload()" style="
            background: #6366f1; 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer;
            font-size: 16px;
          ">
            Обновить страницу
          </button>
        </div>
      </div>
    `}}v3();
