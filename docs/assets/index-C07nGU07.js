function $1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const W1="modulepreload",H1=function(t,e){return new URL(t,e).href},ev={},q1=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=H1(c,r),c in ev)return;ev[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const I=o[E];if(I.href===c&&(!h||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":W1,h||(y.as="script"),y.crossOrigin="",y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((E,I)=>{y.addEventListener("load",E),y.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function K1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ew={exports:{}},Vc={},tw={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),G1=Symbol.for("react.portal"),Q1=Symbol.for("react.fragment"),Y1=Symbol.for("react.strict_mode"),X1=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.memo"),rA=Symbol.for("react.lazy"),tv=Symbol.iterator;function iA(t){return t===null||typeof t!="object"?null:(t=tv&&t[tv]||t["@@iterator"],typeof t=="function"?t:null)}var nw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rw=Object.assign,iw={};function so(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||nw}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sw(){}sw.prototype=so.prototype;function kp(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||nw}var Np=kp.prototype=new sw;Np.constructor=kp;rw(Np,so.prototype);Np.isPureReactComponent=!0;var nv=Array.isArray,ow=Object.prototype.hasOwnProperty,Rp={current:null},aw={key:!0,ref:!0,__self:!0,__source:!0};function lw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ow.call(e,r)&&!aw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nl,type:t,key:s,ref:o,props:i,_owner:Rp.current}}function sA(t,e){return{$$typeof:nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function oA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rv=/\/+/g;function Kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oA(""+t.key):e.toString(36)}function mu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nl:case G1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Kd(o,0):r,nv(i)?(n="",t!=null&&(n=t.replace(rv,"$&/")+"/"),mu(i,e,n,"",function(c){return c})):i!=null&&(jp(i)&&(i=sA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Kd(s,a);o+=mu(s,e,n,l,i)}else if(l=iA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Kd(s,a++),o+=mu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bl(t,e,n){if(t==null)return t;var r=[],i=0;return mu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function aA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},gu={transition:null},lA={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:gu,ReactCurrentOwner:Rp};function uw(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Bl,forEach:function(t,e,n){Bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bl(t,function(){e++}),e},toArray:function(t){return Bl(t,function(e){return e})||[]},only:function(t){if(!jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=so;oe.Fragment=Q1;oe.Profiler=X1;oe.PureComponent=kp;oe.StrictMode=Y1;oe.Suspense=tA;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;oe.act=uw;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ow.call(e,l)&&!aw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nl,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:Z1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J1,_context:t},t.Consumer=t};oe.createElement=lw;oe.createFactory=function(t){var e=lw.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:eA,render:t}};oe.isValidElement=jp;oe.lazy=function(t){return{$$typeof:rA,_payload:{_status:-1,_result:t},_init:aA}};oe.memo=function(t,e){return{$$typeof:nA,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=gu.transition;gu.transition={};try{t()}finally{gu.transition=e}};oe.unstable_act=uw;oe.useCallback=function(t,e){return Rt.current.useCallback(t,e)};oe.useContext=function(t){return Rt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Rt.current.useEffect(t,e)};oe.useId=function(){return Rt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Rt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};oe.useRef=function(t){return Rt.current.useRef(t)};oe.useState=function(t){return Rt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Rt.current.useTransition()};oe.version="18.3.1";tw.exports=oe;var N=tw.exports;const Dp=K1(N),uA=$1({__proto__:null,default:Dp},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA=N,dA=Symbol.for("react.element"),hA=Symbol.for("react.fragment"),fA=Object.prototype.hasOwnProperty,pA=cA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mA={key:!0,ref:!0,__self:!0,__source:!0};function cw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fA.call(e,r)&&!mA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dA,type:t,key:s,ref:o,props:i,_owner:pA.current}}Vc.Fragment=hA;Vc.jsx=cw;Vc.jsxs=cw;ew.exports=Vc;var d=ew.exports,dw={exports:{}},Zt={},hw={exports:{}},fw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var Z=$.length;$.push(X);e:for(;0<Z;){var ve=Z-1>>>1,pe=$[ve];if(0<i(pe,X))$[ve]=X,$[Z]=pe,Z=ve;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],Z=$.pop();if(Z!==X){$[0]=Z;e:for(var ve=0,pe=$.length,we=pe>>>1;ve<we;){var $t=2*(ve+1)-1,Wt=$[$t],Je=$t+1,Dt=$[Je];if(0>i(Wt,Z))Je<pe&&0>i(Dt,Wt)?($[ve]=Dt,$[Je]=Z,ve=Je):($[ve]=Wt,$[$t]=Z,ve=$t);else if(Je<pe&&0>i(Dt,Z))$[ve]=Dt,$[Je]=Z,ve=Je;else break e}}return X}function i($,X){var Z=$.sortIndex-X.sortIndex;return Z!==0?Z:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,p=null,m=3,y=!1,E=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=$)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function S($){if(I=!1,b($),!E)if(n(l)!==null)E=!0,zt(j);else{var X=n(c);X!==null&&ue(S,X.startTime-$)}}function j($,X){E=!1,I&&(I=!1,_(v),v=-1),y=!0;var Z=m;try{for(b(X),p=n(l);p!==null&&(!(p.expirationTime>X)||$&&!R());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,m=p.priorityLevel;var pe=ve(p.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?p.callback=pe:p===n(l)&&r(l),b(X)}else r(l);p=n(l)}if(p!==null)var we=!0;else{var $t=n(c);$t!==null&&ue(S,$t.startTime-X),we=!1}return we}finally{p=null,m=Z,y=!1}}var D=!1,T=null,v=-1,A=5,k=-1;function R(){return!(t.unstable_now()-k<A)}function V(){if(T!==null){var $=t.unstable_now();k=$;var X=!0;try{X=T(!0,$)}finally{X?C():(D=!1,T=null)}}else D=!1}var C;if(typeof x=="function")C=function(){x(V)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,tn=Ae.port2;Ae.port1.onmessage=V,C=function(){tn.postMessage(null)}}else C=function(){P(V,0)};function zt($){T=$,D||(D=!0,C())}function ue($,X){v=P(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,zt(j))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Z=m;m=X;try{return $()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=m;m=$;try{return X()}finally{m=Z}},t.unstable_scheduleCallback=function($,X,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,$){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,$={id:h++,callback:X,priorityLevel:$,startTime:Z,expirationTime:pe,sortIndex:-1},Z>ve?($.sortIndex=Z,e(c,$),n(l)===null&&$===n(c)&&(I?(_(v),v=-1):I=!0,ue(S,Z-ve))):($.sortIndex=pe,e(l,$),E||y||(E=!0,zt(j))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var X=m;return function(){var Z=m;m=X;try{return $.apply(this,arguments)}finally{m=Z}}}})(fw);hw.exports=fw;var gA=hw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA=N,Xt=gA;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pw=new Set,_a={};function qi(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(_a[t]=e,t=0;t<e.length;t++)pw.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wh=Object.prototype.hasOwnProperty,vA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iv={},sv={};function xA(t){return Wh.call(sv,t)?!0:Wh.call(iv,t)?!1:vA.test(t)?sv[t]=!0:(iv[t]=!0,!1)}function _A(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wA(t,e,n,r){if(e===null||typeof e>"u"||_A(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vp,Lp);ct[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vp,Lp);ct[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vp,Lp);ct[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Op(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wA(e,n,i,r)&&(n=null),r||i===null?xA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hr=yA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zl=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Hh=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),gw=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),qh=Symbol.for("react.suspense"),Kh=Symbol.for("react.suspense_list"),Up=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),yw=Symbol.for("react.offscreen"),ov=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=ov&&t[ov]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Gd;function $o(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Qd=!1;function Yd(t,e){if(!t||Qd)return"";Qd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Qd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$o(t):""}function EA(t){switch(t.tag){case 5:return $o(t.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function Gh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case us:return"Portal";case Hh:return"Profiler";case Mp:return"StrictMode";case qh:return"Suspense";case Kh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gw:return(t.displayName||"Context")+".Consumer";case mw:return(t._context.displayName||"Context")+".Provider";case Fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Up:return e=t.displayName||null,e!==null?e:Gh(t.type)||"Memo";case br:e=t._payload,t=t._init;try{return Gh(t(e))}catch{}}return null}function TA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gh(e);case 8:return e===Mp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bA(t){var e=vw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=bA(t))}function xw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qh(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function av(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _w(t,e){e=e.checked,e!=null&&Op(t,"checked",e,!1)}function Yh(t,e){_w(t,e);var n=Qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xh(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xh(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Ps(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Wo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function ww(t,e){var n=Qr(e.value),r=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ew(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ew(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,Tw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IA=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){IA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function bw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function Iw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var SA=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ef(t,e){if(e){if(SA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nf=null;function Bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rf=null,Cs=null,ks=null;function dv(t){if(t=sl(t)){if(typeof rf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Uc(e),rf(t.stateNode,t.type,e))}}function Sw(t){Cs?ks?ks.push(t):ks=[t]:Cs=t}function Aw(){if(Cs){var t=Cs,e=ks;if(ks=Cs=null,dv(t),e)for(t=0;t<e.length;t++)dv(e[t])}}function Pw(t,e){return t(e)}function Cw(){}var Xd=!1;function kw(t,e,n){if(Xd)return t(e,n);Xd=!0;try{return Pw(t,e,n)}finally{Xd=!1,(Cs!==null||ks!==null)&&(Cw(),Aw())}}function Ea(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var sf=!1;if(nr)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){sf=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{sf=!1}function AA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ra=!1,Bu=null,zu=!1,of=null,PA={onError:function(t){ra=!0,Bu=t}};function CA(t,e,n,r,i,s,o,a,l){ra=!1,Bu=null,AA.apply(PA,arguments)}function kA(t,e,n,r,i,s,o,a,l){if(CA.apply(this,arguments),ra){if(ra){var c=Bu;ra=!1,Bu=null}else throw Error(z(198));zu||(zu=!0,of=c)}}function Ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hv(t){if(Ki(t)!==t)throw Error(z(188))}function NA(t){var e=t.alternate;if(!e){if(e=Ki(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return hv(i),t;if(s===r)return hv(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Rw(t){return t=NA(t),t!==null?jw(t):null}function jw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jw(t);if(e!==null)return e;t=t.sibling}return null}var Dw=Xt.unstable_scheduleCallback,fv=Xt.unstable_cancelCallback,RA=Xt.unstable_shouldYield,jA=Xt.unstable_requestPaint,ze=Xt.unstable_now,DA=Xt.unstable_getCurrentPriorityLevel,zp=Xt.unstable_ImmediatePriority,Vw=Xt.unstable_UserBlockingPriority,$u=Xt.unstable_NormalPriority,VA=Xt.unstable_LowPriority,Lw=Xt.unstable_IdlePriority,Lc=null,Rn=null;function LA(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Lc,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:FA,OA=Math.log,MA=Math.LN2;function FA(t){return t>>>=0,t===0?32:31-(OA(t)/MA|0)|0}var Hl=64,ql=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ho(a):(s&=o,s!==0&&(r=Ho(s)))}else o=n&~i,o!==0?r=Ho(o):s!==0&&(r=Ho(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),i=1<<n,r|=t[n],e&=~i;return r}function UA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=UA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ow(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function zA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function Mw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fw,Wp,Uw,Bw,zw,lf=!1,Kl=[],Lr=null,Or=null,Mr=null,Ta=new Map,ba=new Map,Sr=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pv(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function Vo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sl(e),e!==null&&Wp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WA(t,e,n,r,i){switch(e){case"focusin":return Lr=Vo(Lr,t,e,n,r,i),!0;case"dragenter":return Or=Vo(Or,t,e,n,r,i),!0;case"mouseover":return Mr=Vo(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ta.set(s,Vo(Ta.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ba.set(s,Vo(ba.get(s)||null,t,e,n,r,i)),!0}return!1}function $w(t){var e=Ii(t.target);if(e!==null){var n=Ki(e);if(n!==null){if(e=n.tag,e===13){if(e=Nw(n),e!==null){t.blockedOn=e,zw(t.priority,function(){Uw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nf=r,n.target.dispatchEvent(r),nf=null}else return e=sl(n),e!==null&&Wp(e),t.blockedOn=n,!1;e.shift()}return!0}function mv(t,e,n){yu(t)&&n.delete(e)}function HA(){lf=!1,Lr!==null&&yu(Lr)&&(Lr=null),Or!==null&&yu(Or)&&(Or=null),Mr!==null&&yu(Mr)&&(Mr=null),Ta.forEach(mv),ba.forEach(mv)}function Lo(t,e){t.blockedOn===e&&(t.blockedOn=null,lf||(lf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,HA)))}function Ia(t){function e(i){return Lo(i,t)}if(0<Kl.length){Lo(Kl[0],t);for(var n=1;n<Kl.length;n++){var r=Kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&Lo(Lr,t),Or!==null&&Lo(Or,t),Mr!==null&&Lo(Mr,t),Ta.forEach(e),ba.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)$w(n),n.blockedOn===null&&Sr.shift()}var Ns=hr.ReactCurrentBatchConfig,Hu=!0;function qA(t,e,n,r){var i=ge,s=Ns.transition;Ns.transition=null;try{ge=1,Hp(t,e,n,r)}finally{ge=i,Ns.transition=s}}function KA(t,e,n,r){var i=ge,s=Ns.transition;Ns.transition=null;try{ge=4,Hp(t,e,n,r)}finally{ge=i,Ns.transition=s}}function Hp(t,e,n,r){if(Hu){var i=uf(t,e,n,r);if(i===null)lh(t,e,r,qu,n),pv(t,r);else if(WA(i,t,e,n,r))r.stopPropagation();else if(pv(t,r),e&4&&-1<$A.indexOf(t)){for(;i!==null;){var s=sl(i);if(s!==null&&Fw(s),s=uf(t,e,n,r),s===null&&lh(t,e,r,qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lh(t,e,r,null,n)}}var qu=null;function uf(t,e,n,r){if(qu=null,t=Bp(r),t=Ii(t),t!==null)if(e=Ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function Ww(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DA()){case zp:return 1;case Vw:return 4;case $u:case VA:return 16;case Lw:return 536870912;default:return 16}default:return 16}}var Rr=null,qp=null,vu=null;function Hw(){if(vu)return vu;var t,e=qp,n=e.length,r,i="value"in Rr?Rr.value:Rr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vu=i.slice(t,1<r?1-r:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gl(){return!0}function gv(){return!1}function en(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gl:gv,this.isPropagationStopped=gv,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=en(oo),il=Ve({},oo,{view:0,detail:0}),GA=en(il),Zd,eh,Oo,Oc=Ve({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(Zd=t.screenX-Oo.screenX,eh=t.screenY-Oo.screenY):eh=Zd=0,Oo=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),yv=en(Oc),QA=Ve({},Oc,{dataTransfer:0}),YA=en(QA),XA=Ve({},il,{relatedTarget:0}),th=en(XA),JA=Ve({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZA=en(JA),eP=Ve({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tP=en(eP),nP=Ve({},oo,{data:0}),vv=en(nP),rP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sP[t])?!!e[t]:!1}function Gp(){return oP}var aP=Ve({},il,{key:function(t){if(t.key){var e=rP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gp,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lP=en(aP),uP=Ve({},Oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xv=en(uP),cP=Ve({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gp}),dP=en(cP),hP=Ve({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fP=en(hP),pP=Ve({},Oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mP=en(pP),gP=[9,13,27,32],Qp=nr&&"CompositionEvent"in window,ia=null;nr&&"documentMode"in document&&(ia=document.documentMode);var yP=nr&&"TextEvent"in window&&!ia,qw=nr&&(!Qp||ia&&8<ia&&11>=ia),_v=" ",wv=!1;function Kw(t,e){switch(t){case"keyup":return gP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function vP(t,e){switch(t){case"compositionend":return Gw(e);case"keypress":return e.which!==32?null:(wv=!0,_v);case"textInput":return t=e.data,t===_v&&wv?null:t;default:return null}}function xP(t,e){if(ds)return t==="compositionend"||!Qp&&Kw(t,e)?(t=Hw(),vu=qp=Rr=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qw&&e.locale!=="ko"?null:e.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_P[t.type]:e==="textarea"}function Qw(t,e,n,r){Sw(r),e=Ku(e,"onChange"),0<e.length&&(n=new Kp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sa=null,Sa=null;function wP(t){oE(t,0)}function Mc(t){var e=ps(t);if(xw(e))return t}function EP(t,e){if(t==="change")return e}var Yw=!1;if(nr){var nh;if(nr){var rh="oninput"in document;if(!rh){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),rh=typeof Tv.oninput=="function"}nh=rh}else nh=!1;Yw=nh&&(!document.documentMode||9<document.documentMode)}function bv(){sa&&(sa.detachEvent("onpropertychange",Xw),Sa=sa=null)}function Xw(t){if(t.propertyName==="value"&&Mc(Sa)){var e=[];Qw(e,Sa,t,Bp(t)),kw(wP,e)}}function TP(t,e,n){t==="focusin"?(bv(),sa=e,Sa=n,sa.attachEvent("onpropertychange",Xw)):t==="focusout"&&bv()}function bP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(Sa)}function IP(t,e){if(t==="click")return Mc(e)}function SP(t,e){if(t==="input"||t==="change")return Mc(e)}function AP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tn=typeof Object.is=="function"?Object.is:AP;function Aa(t,e){if(Tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wh.call(e,i)||!Tn(t[i],e[i]))return!1}return!0}function Iv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sv(t,e){var n=Iv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Iv(n)}}function Jw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zw(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PP(t){var e=Zw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jw(n.ownerDocument.documentElement,n)){if(r!==null&&Yp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Sv(n,s);var o=Sv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CP=nr&&"documentMode"in document&&11>=document.documentMode,hs=null,cf=null,oa=null,df=!1;function Av(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;df||hs==null||hs!==Uu(r)||(r=hs,"selectionStart"in r&&Yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Aa(oa,r)||(oa=r,r=Ku(cf,"onSelect"),0<r.length&&(e=new Kp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hs)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fs={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ih={},eE={};nr&&(eE=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Fc(t){if(ih[t])return ih[t];if(!fs[t])return t;var e=fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eE)return ih[t]=e[n];return t}var tE=Fc("animationend"),nE=Fc("animationiteration"),rE=Fc("animationstart"),iE=Fc("transitionend"),sE=new Map,Pv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){sE.set(t,e),qi(e,[t])}for(var sh=0;sh<Pv.length;sh++){var oh=Pv[sh],kP=oh.toLowerCase(),NP=oh[0].toUpperCase()+oh.slice(1);ni(kP,"on"+NP)}ni(tE,"onAnimationEnd");ni(nE,"onAnimationIteration");ni(rE,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(iE,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RP=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Cv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kA(r,e,void 0,t),t.currentTarget=null}function oE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cv(i,a,c),s=l}}}if(zu)throw t=of,zu=!1,of=null,t}function Te(t,e){var n=e[gf];n===void 0&&(n=e[gf]=new Set);var r=t+"__bubble";n.has(r)||(aE(e,t,2,!1),n.add(r))}function ah(t,e,n){var r=0;e&&(r|=4),aE(n,t,r,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Yl]){t[Yl]=!0,pw.forEach(function(n){n!=="selectionchange"&&(RP.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,ah("selectionchange",!1,e))}}function aE(t,e,n,r){switch(Ww(e)){case 1:var i=qA;break;case 4:i=KA;break;default:i=Hp}n=i.bind(null,e,n,t),i=void 0,!sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ii(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}kw(function(){var c=s,h=Bp(n),p=[];e:{var m=sE.get(t);if(m!==void 0){var y=Kp,E=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":y=lP;break;case"focusin":E="focus",y=th;break;case"focusout":E="blur",y=th;break;case"beforeblur":case"afterblur":y=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=YA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=dP;break;case tE:case nE:case rE:y=ZA;break;case iE:y=fP;break;case"scroll":y=GA;break;case"wheel":y=mP;break;case"copy":case"cut":case"paste":y=tP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xv}var I=(e&4)!==0,P=!I&&t==="scroll",_=I?m!==null?m+"Capture":null:m;I=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,_!==null&&(S=Ea(x,_),S!=null&&I.push(Ca(x,S,b)))),P)break;x=x.return}0<I.length&&(m=new y(m,E,null,n,h),p.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==nf&&(E=n.relatedTarget||n.fromElement)&&(Ii(E)||E[rr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?Ii(E):null,E!==null&&(P=Ki(E),E!==P||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(I=yv,S="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(I=xv,S="onPointerLeave",_="onPointerEnter",x="pointer"),P=y==null?m:ps(y),b=E==null?m:ps(E),m=new I(S,x+"leave",y,n,h),m.target=P,m.relatedTarget=b,S=null,Ii(h)===c&&(I=new I(_,x+"enter",E,n,h),I.target=b,I.relatedTarget=P,S=I),P=S,y&&E)t:{for(I=y,_=E,x=0,b=I;b;b=is(b))x++;for(b=0,S=_;S;S=is(S))b++;for(;0<x-b;)I=is(I),x--;for(;0<b-x;)_=is(_),b--;for(;x--;){if(I===_||_!==null&&I===_.alternate)break t;I=is(I),_=is(_)}I=null}else I=null;y!==null&&kv(p,m,y,I,!1),E!==null&&P!==null&&kv(p,P,E,I,!0)}}e:{if(m=c?ps(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=EP;else if(Ev(m))if(Yw)j=SP;else{j=bP;var D=TP}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=IP);if(j&&(j=j(t,c))){Qw(p,j,n,h);break e}D&&D(t,m,c),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Xh(m,"number",m.value)}switch(D=c?ps(c):window,t){case"focusin":(Ev(D)||D.contentEditable==="true")&&(hs=D,cf=c,oa=null);break;case"focusout":oa=cf=hs=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,Av(p,n,h);break;case"selectionchange":if(CP)break;case"keydown":case"keyup":Av(p,n,h)}var T;if(Qp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ds?Kw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(qw&&n.locale!=="ko"&&(ds||v!=="onCompositionStart"?v==="onCompositionEnd"&&ds&&(T=Hw()):(Rr=h,qp="value"in Rr?Rr.value:Rr.textContent,ds=!0)),D=Ku(c,v),0<D.length&&(v=new vv(v,t,null,n,h),p.push({event:v,listeners:D}),T?v.data=T:(T=Gw(n),T!==null&&(v.data=T)))),(T=yP?vP(t,n):xP(t,n))&&(c=Ku(c,"onBeforeInput"),0<c.length&&(h=new vv("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=T))}oE(p,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ea(t,n),s!=null&&r.unshift(Ca(t,s,i)),s=Ea(t,e),s!=null&&r.push(Ca(t,s,i))),t=t.return}return r}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ea(n,s),l!=null&&o.unshift(Ca(n,l,a))):i||(l=Ea(n,s),l!=null&&o.push(Ca(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jP=/\r\n?/g,DP=/\u0000|\uFFFD/g;function Nv(t){return(typeof t=="string"?t:""+t).replace(jP,`
`).replace(DP,"")}function Xl(t,e,n){if(e=Nv(e),Nv(t)!==e&&n)throw Error(z(425))}function Gu(){}var hf=null,ff=null;function pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mf=typeof setTimeout=="function"?setTimeout:void 0,VP=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,LP=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(t){return Rv.resolve(null).then(t).catch(OP)}:mf;function OP(t){setTimeout(function(){throw t})}function uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ia(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),kn="__reactFiber$"+ao,ka="__reactProps$"+ao,rr="__reactContainer$"+ao,gf="__reactEvents$"+ao,MP="__reactListeners$"+ao,FP="__reactHandles$"+ao;function Ii(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jv(t);t!==null;){if(n=t[kn])return n;t=jv(t)}return e}t=n,n=t.parentNode}return null}function sl(t){return t=t[kn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Uc(t){return t[ka]||null}var yf=[],ms=-1;function ri(t){return{current:t}}function Ie(t){0>ms||(t.current=yf[ms],yf[ms]=null,ms--)}function _e(t,e){ms++,yf[ms]=t.current,t.current=e}var Yr={},St=ri(Yr),Mt=ri(!1),Vi=Yr;function Bs(t,e){var n=t.type.contextTypes;if(!n)return Yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function Qu(){Ie(Mt),Ie(St)}function Dv(t,e,n){if(St.current!==Yr)throw Error(z(168));_e(St,e),_e(Mt,n)}function lE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,TA(t)||"Unknown",i));return Ve({},n,r)}function Yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,Vi=St.current,_e(St,t),_e(Mt,Mt.current),!0}function Vv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=lE(t,e,Vi),r.__reactInternalMemoizedMergedChildContext=t,Ie(Mt),Ie(St),_e(St,t)):Ie(Mt),_e(Mt,n)}var Hn=null,Bc=!1,ch=!1;function uE(t){Hn===null?Hn=[t]:Hn.push(t)}function UP(t){Bc=!0,uE(t)}function ii(){if(!ch&&Hn!==null){ch=!0;var t=0,e=ge;try{var n=Hn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,Bc=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(t+1)),Dw(zp,ii),i}finally{ge=e,ch=!1}}return null}var gs=[],ys=0,Xu=null,Ju=0,an=[],ln=0,Li=null,qn=1,Kn="";function _i(t,e){gs[ys++]=Ju,gs[ys++]=Xu,Xu=t,Ju=e}function cE(t,e,n){an[ln++]=qn,an[ln++]=Kn,an[ln++]=Li,Li=t;var r=qn;t=Kn;var i=32-wn(r)-1;r&=~(1<<i),n+=1;var s=32-wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qn=1<<32-wn(e)+i|n<<i|r,Kn=s+t}else qn=1<<s|n<<i|r,Kn=t}function Xp(t){t.return!==null&&(_i(t,1),cE(t,1,0))}function Jp(t){for(;t===Xu;)Xu=gs[--ys],gs[ys]=null,Ju=gs[--ys],gs[ys]=null;for(;t===Li;)Li=an[--ln],an[ln]=null,Kn=an[--ln],an[ln]=null,qn=an[--ln],an[ln]=null}var Qt=null,Kt=null,Ce=!1,_n=null;function dE(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Li!==null?{id:qn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xf(t){if(Ce){var e=Kt;if(e){var n=e;if(!Lv(t,e)){if(vf(t))throw Error(z(418));e=Fr(n.nextSibling);var r=Qt;e&&Lv(t,e)?dE(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Qt=t)}}else{if(vf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ce=!1,Qt=t}}}function Ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Jl(t){if(t!==Qt)return!1;if(!Ce)return Ov(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pf(t.type,t.memoizedProps)),e&&(e=Kt)){if(vf(t))throw hE(),Error(z(418));for(;e;)dE(t,e),e=Fr(e.nextSibling)}if(Ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?Fr(t.stateNode.nextSibling):null;return!0}function hE(){for(var t=Kt;t;)t=Fr(t.nextSibling)}function zs(){Kt=Qt=null,Ce=!1}function Zp(t){_n===null?_n=[t]:_n.push(t)}var BP=hr.ReactCurrentBatchConfig;function Mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mv(t){var e=t._init;return e(t._payload)}function fE(t){function e(_,x){if(t){var b=_.deletions;b===null?(_.deletions=[x],_.flags|=16):b.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=$r(_,x),_.index=0,_.sibling=null,_}function s(_,x,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<x?(_.flags|=2,x):b):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,b,S){return x===null||x.tag!==6?(x=yh(b,_.mode,S),x.return=_,x):(x=i(x,b),x.return=_,x)}function l(_,x,b,S){var j=b.type;return j===cs?h(_,x,b.props.children,S,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===br&&Mv(j)===x.type)?(S=i(x,b.props),S.ref=Mo(_,x,b),S.return=_,S):(S=Su(b.type,b.key,b.props,null,_.mode,S),S.ref=Mo(_,x,b),S.return=_,S)}function c(_,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=vh(b,_.mode,S),x.return=_,x):(x=i(x,b.children||[]),x.return=_,x)}function h(_,x,b,S,j){return x===null||x.tag!==7?(x=Ri(b,_.mode,S,j),x.return=_,x):(x=i(x,b),x.return=_,x)}function p(_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=yh(""+x,_.mode,b),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zl:return b=Su(x.type,x.key,x.props,null,_.mode,b),b.ref=Mo(_,null,x),b.return=_,b;case us:return x=vh(x,_.mode,b),x.return=_,x;case br:var S=x._init;return p(_,S(x._payload),b)}if(Wo(x)||jo(x))return x=Ri(x,_.mode,b,null),x.return=_,x;Zl(_,x)}return null}function m(_,x,b,S){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:a(_,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zl:return b.key===j?l(_,x,b,S):null;case us:return b.key===j?c(_,x,b,S):null;case br:return j=b._init,m(_,x,j(b._payload),S)}if(Wo(b)||jo(b))return j!==null?null:h(_,x,b,S,null);Zl(_,b)}return null}function y(_,x,b,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(b)||null,a(x,_,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zl:return _=_.get(S.key===null?b:S.key)||null,l(x,_,S,j);case us:return _=_.get(S.key===null?b:S.key)||null,c(x,_,S,j);case br:var D=S._init;return y(_,x,b,D(S._payload),j)}if(Wo(S)||jo(S))return _=_.get(b)||null,h(x,_,S,j,null);Zl(x,S)}return null}function E(_,x,b,S){for(var j=null,D=null,T=x,v=x=0,A=null;T!==null&&v<b.length;v++){T.index>v?(A=T,T=null):A=T.sibling;var k=m(_,T,b[v],S);if(k===null){T===null&&(T=A);break}t&&T&&k.alternate===null&&e(_,T),x=s(k,x,v),D===null?j=k:D.sibling=k,D=k,T=A}if(v===b.length)return n(_,T),Ce&&_i(_,v),j;if(T===null){for(;v<b.length;v++)T=p(_,b[v],S),T!==null&&(x=s(T,x,v),D===null?j=T:D.sibling=T,D=T);return Ce&&_i(_,v),j}for(T=r(_,T);v<b.length;v++)A=y(T,_,v,b[v],S),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?v:A.key),x=s(A,x,v),D===null?j=A:D.sibling=A,D=A);return t&&T.forEach(function(R){return e(_,R)}),Ce&&_i(_,v),j}function I(_,x,b,S){var j=jo(b);if(typeof j!="function")throw Error(z(150));if(b=j.call(b),b==null)throw Error(z(151));for(var D=j=null,T=x,v=x=0,A=null,k=b.next();T!==null&&!k.done;v++,k=b.next()){T.index>v?(A=T,T=null):A=T.sibling;var R=m(_,T,k.value,S);if(R===null){T===null&&(T=A);break}t&&T&&R.alternate===null&&e(_,T),x=s(R,x,v),D===null?j=R:D.sibling=R,D=R,T=A}if(k.done)return n(_,T),Ce&&_i(_,v),j;if(T===null){for(;!k.done;v++,k=b.next())k=p(_,k.value,S),k!==null&&(x=s(k,x,v),D===null?j=k:D.sibling=k,D=k);return Ce&&_i(_,v),j}for(T=r(_,T);!k.done;v++,k=b.next())k=y(T,_,v,k.value,S),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?v:k.key),x=s(k,x,v),D===null?j=k:D.sibling=k,D=k);return t&&T.forEach(function(V){return e(_,V)}),Ce&&_i(_,v),j}function P(_,x,b,S){if(typeof b=="object"&&b!==null&&b.type===cs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zl:e:{for(var j=b.key,D=x;D!==null;){if(D.key===j){if(j=b.type,j===cs){if(D.tag===7){n(_,D.sibling),x=i(D,b.props.children),x.return=_,_=x;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===br&&Mv(j)===D.type){n(_,D.sibling),x=i(D,b.props),x.ref=Mo(_,D,b),x.return=_,_=x;break e}n(_,D);break}else e(_,D);D=D.sibling}b.type===cs?(x=Ri(b.props.children,_.mode,S,b.key),x.return=_,_=x):(S=Su(b.type,b.key,b.props,null,_.mode,S),S.ref=Mo(_,x,b),S.return=_,_=S)}return o(_);case us:e:{for(D=b.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(_,x.sibling),x=i(x,b.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=vh(b,_.mode,S),x.return=_,_=x}return o(_);case br:return D=b._init,P(_,x,D(b._payload),S)}if(Wo(b))return E(_,x,b,S);if(jo(b))return I(_,x,b,S);Zl(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,b),x.return=_,_=x):(n(_,x),x=yh(b,_.mode,S),x.return=_,_=x),o(_)):n(_,x)}return P}var $s=fE(!0),pE=fE(!1),Zu=ri(null),ec=null,vs=null,em=null;function tm(){em=vs=ec=null}function nm(t){var e=Zu.current;Ie(Zu),t._currentValue=e}function _f(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){ec=t,em=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(ec===null)throw Error(z(308));vs=t,ec.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Si=null;function rm(t){Si===null?Si=[t]:Si.push(t)}function mE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rm(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,rm(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function _u(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$p(t,n)}}function Fv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tc(t,e,n,r){var i=t.updateQueue;Ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,I=a;switch(m=e,y=n,I.tag){case 1:if(E=I.payload,typeof E=="function"){p=E.call(y,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=I.payload,m=typeof E=="function"?E.call(y,p,m):E,m==null)break e;p=Ve({},p,m);break e;case 2:Ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=p):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mi|=o,t.lanes=o,t.memoizedState=p}}function Uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var ol={},jn=ri(ol),Na=ri(ol),Ra=ri(ol);function Ai(t){if(t===ol)throw Error(z(174));return t}function sm(t,e){switch(_e(Ra,e),_e(Na,t),_e(jn,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zh(e,t)}Ie(jn),_e(jn,e)}function Ws(){Ie(jn),Ie(Na),Ie(Ra)}function yE(t){Ai(Ra.current);var e=Ai(jn.current),n=Zh(e,t.type);e!==n&&(_e(Na,t),_e(jn,n))}function om(t){Na.current===t&&(Ie(jn),Ie(Na))}var Ne=ri(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dh=[];function am(){for(var t=0;t<dh.length;t++)dh[t]._workInProgressVersionPrimary=null;dh.length=0}var wu=hr.ReactCurrentDispatcher,hh=hr.ReactCurrentBatchConfig,Oi=0,je=null,Ge=null,et=null,rc=!1,aa=!1,ja=0,zP=0;function mt(){throw Error(z(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tn(t[n],e[n]))return!1;return!0}function um(t,e,n,r,i,s){if(Oi=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wu.current=t===null||t.memoizedState===null?qP:KP,t=n(r,i),aa){s=0;do{if(aa=!1,ja=0,25<=s)throw Error(z(301));s+=1,et=Ge=null,e.updateQueue=null,wu.current=GP,t=n(r,i)}while(aa)}if(wu.current=ic,e=Ge!==null&&Ge.next!==null,Oi=0,et=Ge=je=null,rc=!1,e)throw Error(z(300));return t}function cm(){var t=ja!==0;return ja=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?je.memoizedState=et=t:et=et.next=t,et}function fn(){if(Ge===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=et===null?je.memoizedState:et.next;if(e!==null)et=e,Ge=t;else{if(t===null)throw Error(z(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},et===null?je.memoizedState=et=t:et=et.next=t}return et}function Da(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Oi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,je.lanes|=h,Mi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Tn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,Mi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Tn(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vE(){}function xE(t,e){var n=je,r=fn(),i=e(),s=!Tn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,dm(EE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Va(9,wE.bind(null,n,r,i,e),void 0,null),tt===null)throw Error(z(349));Oi&30||_E(n,e,i)}return i}function _E(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wE(t,e,n,r){e.value=n,e.getSnapshot=r,TE(e)&&bE(t)}function EE(t,e,n){return n(function(){TE(e)&&bE(t)})}function TE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tn(t,n)}catch{return!0}}function bE(t){var e=ir(t,1);e!==null&&En(e,t,1,-1)}function Bv(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=HP.bind(null,je,t),[e.memoizedState,t]}function Va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IE(){return fn().memoizedState}function Eu(t,e,n,r){var i=Cn();je.flags|=t,i.memoizedState=Va(1|e,n,void 0,r===void 0?null:r)}function zc(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&lm(r,o.deps)){i.memoizedState=Va(e,n,s,r);return}}je.flags|=t,i.memoizedState=Va(1|e,n,s,r)}function zv(t,e){return Eu(8390656,8,t,e)}function dm(t,e){return zc(2048,8,t,e)}function SE(t,e){return zc(4,2,t,e)}function AE(t,e){return zc(4,4,t,e)}function PE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CE(t,e,n){return n=n!=null?n.concat([t]):null,zc(4,4,PE.bind(null,e,t),n)}function hm(){}function kE(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NE(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RE(t,e,n){return Oi&21?(Tn(n,e)||(n=Ow(),je.lanes|=n,Mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function $P(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=hh.transition;hh.transition={};try{t(!1),e()}finally{ge=n,hh.transition=r}}function jE(){return fn().memoizedState}function WP(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DE(t))VE(e,n);else if(n=mE(t,e,n,r),n!==null){var i=Nt();En(n,t,r,i),LE(n,e,r)}}function HP(t,e,n){var r=zr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DE(t))VE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Tn(a,o)){var l=e.interleaved;l===null?(i.next=i,rm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mE(t,e,i,r),n!==null&&(i=Nt(),En(n,t,r,i),LE(n,e,r))}}function DE(t){var e=t.alternate;return t===je||e!==null&&e===je}function VE(t,e){aa=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$p(t,n)}}var ic={readContext:hn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},qP={readContext:hn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:zv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Eu(4194308,4,PE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WP.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Bv,useDebugValue:hm,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Bv(!1),e=t[0];return t=$P.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=Cn();if(Ce){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),tt===null)throw Error(z(349));Oi&30||_E(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,zv(EE.bind(null,r,s,t),[t]),r.flags|=2048,Va(9,wE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=tt.identifierPrefix;if(Ce){var n=Kn,r=qn;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KP={readContext:hn,useCallback:kE,useContext:hn,useEffect:dm,useImperativeHandle:CE,useInsertionEffect:SE,useLayoutEffect:AE,useMemo:NE,useReducer:fh,useRef:IE,useState:function(){return fh(Da)},useDebugValue:hm,useDeferredValue:function(t){var e=fn();return RE(e,Ge.memoizedState,t)},useTransition:function(){var t=fh(Da)[0],e=fn().memoizedState;return[t,e]},useMutableSource:vE,useSyncExternalStore:xE,useId:jE,unstable_isNewReconciler:!1},GP={readContext:hn,useCallback:kE,useContext:hn,useEffect:dm,useImperativeHandle:CE,useInsertionEffect:SE,useLayoutEffect:AE,useMemo:NE,useReducer:ph,useRef:IE,useState:function(){return ph(Da)},useDebugValue:hm,useDeferredValue:function(t){var e=fn();return Ge===null?e.memoizedState=t:RE(e,Ge.memoizedState,t)},useTransition:function(){var t=ph(Da)[0],e=fn().memoizedState;return[t,e]},useMutableSource:vE,useSyncExternalStore:xE,useId:jE,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $c={isMounted:function(t){return(t=t._reactInternals)?Ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=zr(t),s=Xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(En(e,t,i,r),_u(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=zr(t),s=Xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(En(e,t,i,r),_u(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=zr(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(t,i,r),e!==null&&(En(e,t,r,n),_u(e,t,r))}};function $v(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(i,s):!0}function OE(t,e,n){var r=!1,i=Yr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=Ft(e)?Vi:St.current,r=e.contextTypes,s=(r=r!=null)?Bs(t,i):Yr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$c.enqueueReplaceState(e,e.state,null)}function Ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},im(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=Ft(e)?Vi:St.current,i.context=Bs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$c.enqueueReplaceState(i,i.state,null),tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hs(t,e){try{var n="",r=e;do n+=EA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function ME(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oc||(oc=!0,jf=r),Tf(t,e)},n}function FE(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Tf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tf(t,e),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=uC.bind(null,t,e,n),e.then(t,t))}function qv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var YP=hr.ReactCurrentOwner,Ot=!1;function kt(t,e,n,r){e.child=t===null?pE(e,null,n,r):$s(e,t.child,n,r)}function Gv(t,e,n,r,i){n=n.render;var s=e.ref;return Rs(e,i),r=um(t,e,n,r,s,i),n=cm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Ce&&n&&Xp(e),e.flags|=1,kt(t,e,r,i),e.child)}function Qv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!_m(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,UE(t,e,s,r,i)):(t=Su(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=$r(s,r),t.ref=e.ref,t.return=e,e.child=t}function UE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Aa(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,sr(t,e,i)}return bf(t,e,n,r,i)}function BE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(_s,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(_s,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(_s,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(_s,qt),qt|=r;return kt(t,e,i,n),e.child}function zE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bf(t,e,n,r,i){var s=Ft(n)?Vi:St.current;return s=Bs(e,s),Rs(e,i),n=um(t,e,n,r,s,i),r=cm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Ce&&r&&Xp(e),e.flags|=1,kt(t,e,n,i),e.child)}function Yv(t,e,n,r,i){if(Ft(n)){var s=!0;Yu(e)}else s=!1;if(Rs(e,i),e.stateNode===null)Tu(t,e),OE(e,n,r),Ef(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=Ft(n)?Vi:St.current,c=Bs(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wv(e,o,r,c),Ir=!1;var m=e.memoizedState;o.state=m,tc(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Mt.current||Ir?(typeof h=="function"&&(wf(e,n,h,r),l=e.memoizedState),(a=Ir||$v(e,n,a,r,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vn(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hn(l):(l=Ft(n)?Vi:St.current,l=Bs(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Wv(e,o,r,l),Ir=!1,m=e.memoizedState,o.state=m,tc(e,r,o,i);var E=e.memoizedState;a!==p||m!==E||Mt.current||Ir?(typeof y=="function"&&(wf(e,n,y,r),E=e.memoizedState),(c=Ir||$v(e,n,c,r,m,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return If(t,e,n,r,s,i)}function If(t,e,n,r,i,s){zE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Vv(e,n,!1),sr(t,e,s);r=e.stateNode,YP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):kt(t,e,a,s),e.memoizedState=r.state,i&&Vv(e,n,!0),e.child}function $E(t){var e=t.stateNode;e.pendingContext?Dv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dv(t,e.context,!1),sm(t,e.containerInfo)}function Xv(t,e,n,r,i){return zs(),Zp(i),e.flags|=256,kt(t,e,n,r),e.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Af(t){return{baseLanes:t,cachePool:null,transitions:null}}function WE(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ne,i&1),t===null)return xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qc(o,r,0,null),t=Ri(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Af(n),e.memoizedState=Sf,t):fm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$r(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$r(a,s):(s=Ri(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Af(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sf,r}return s=t.child,t=s.sibling,r=$r(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fm(t,e){return e=qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,r){return r!==null&&Zp(r),$s(e,t.child,null,n),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(z(422))),eu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qc({mode:"visible",children:r.children},i,0,null),s=Ri(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$s(e,t.child,null,o),e.child.memoizedState=Af(o),e.memoizedState=Sf,s);if(!(e.mode&1))return eu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=mh(s,r,void 0),eu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),En(r,t,i,-1))}return xm(),r=mh(Error(z(421))),eu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=cC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=Fr(i.nextSibling),Qt=e,Ce=!0,_n=null,t!==null&&(an[ln++]=qn,an[ln++]=Kn,an[ln++]=Li,qn=t.id,Kn=t.overflow,Li=e),e=fm(e,r.children),e.flags|=4096,e)}function Jv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_f(t.return,e,n)}function gh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function HE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jv(t,n,e);else if(t.tag===19)Jv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gh(e,!0,n,null,s);break;case"together":gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JP(t,e,n){switch(e.tag){case 3:$E(e),zs();break;case 5:yE(e);break;case 1:Ft(e.type)&&Yu(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(Zu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?WE(t,e,n):(_e(Ne,Ne.current&1),t=sr(t,e,n),t!==null?t.sibling:null);_e(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,BE(t,e,n)}return sr(t,e,n)}var qE,Pf,KE,GE;qE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pf=function(){};KE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ai(jn.current);var s=null;switch(n){case"input":i=Qh(t,i),r=Qh(t,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=Jh(t,i),r=Jh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gu)}ef(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_a.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};GE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZP(t,e,n){var r=e.pendingProps;switch(Jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ft(e.type)&&Qu(),gt(e),null;case 3:return r=e.stateNode,Ws(),Ie(Mt),Ie(St),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Lf(_n),_n=null))),Pf(t,e),gt(e),null;case 5:om(e);var i=Ai(Ra.current);if(n=e.type,t!==null&&e.stateNode!=null)KE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return gt(e),null}if(t=Ai(jn.current),Jl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[ka]=s,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<qo.length;i++)Te(qo[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":av(r,s),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Te("invalid",r);break;case"textarea":uv(r,s),Te("invalid",r)}ef(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,a,t),i=["children",""+a]):_a.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":$l(r),lv(r,s,!0);break;case"textarea":$l(r),cv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ew(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[ka]=r,qE(t,e,!1,!1),e.stateNode=t;e:{switch(o=tf(n,r),n){case"dialog":Te("cancel",t),Te("close",t),i=r;break;case"iframe":case"object":case"embed":Te("load",t),i=r;break;case"video":case"audio":for(i=0;i<qo.length;i++)Te(qo[i],t);i=r;break;case"source":Te("error",t),i=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=r;break;case"details":Te("toggle",t),i=r;break;case"input":av(t,r),i=Qh(t,r),Te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),Te("invalid",t);break;case"textarea":uv(t,r),i=Jh(t,r),Te("invalid",t);break;default:i=r}ef(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Iw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wa(t,l):typeof l=="number"&&wa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_a.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",t):l!=null&&Op(t,s,l,o))}switch(n){case"input":$l(t),lv(t,r,!1);break;case"textarea":$l(t),cv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ps(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)GE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ai(Ra.current),Ai(jn.current),Jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return gt(e),null;case 13:if(Ie(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Kt!==null&&e.mode&1&&!(e.flags&128))hE(),zs(),e.flags|=98560,s=!1;else if(s=Jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[kn]=e}else zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else _n!==null&&(Lf(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Qe===0&&(Qe=3):xm())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return Ws(),Pf(t,e),t===null&&Pa(e.stateNode.containerInfo),gt(e),null;case 10:return nm(e.type._context),gt(e),null;case 17:return Ft(e.type)&&Qu(),gt(e),null;case 19:if(Ie(Ne),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fo(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,Fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>qs&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return gt(e),null}else 2*ze()-s.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=Ne.current,_e(Ne,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function eC(t,e){switch(Jp(e),e.tag){case 1:return Ft(e.type)&&Qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ws(),Ie(Mt),Ie(St),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return om(e),null;case 13:if(Ie(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ne),null;case 4:return Ws(),null;case 10:return nm(e.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var tu=!1,Et=!1,tC=typeof WeakSet=="function"?WeakSet:Set,G=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Cf(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Zv=!1;function nC(t,e){if(hf=Hu,t=Zw(),Yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:t,selectionRange:n},Hu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var I=E.memoizedProps,P=E.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?I:vn(e.type,I),P);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){Fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return E=Zv,Zv=!1,E}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cf(e,n,s)}i=i.next}while(i!==r)}}function Wc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QE(t){var e=t.alternate;e!==null&&(t.alternate=null,QE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[ka],delete e[gf],delete e[MP],delete e[FP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YE(t){return t.tag===5||t.tag===3||t.tag===4}function e0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(r!==4&&(t=t.child,t!==null))for(Nf(t,e,n),t=t.sibling;t!==null;)Nf(t,e,n),t=t.sibling}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}var it=null,xn=!1;function xr(t,e,n){for(n=n.child;n!==null;)XE(t,e,n),n=n.sibling}function XE(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Lc,n)}catch{}switch(n.tag){case 5:Et||xs(n,e);case 6:var r=it,i=xn;it=null,xr(t,e,n),it=r,xn=i,it!==null&&(xn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(xn?(t=it,n=n.stateNode,t.nodeType===8?uh(t.parentNode,n):t.nodeType===1&&uh(t,n),Ia(t)):uh(it,n.stateNode));break;case 4:r=it,i=xn,it=n.stateNode.containerInfo,xn=!0,xr(t,e,n),it=r,xn=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cf(n,e,o),i=i.next}while(i!==r)}xr(t,e,n);break;case 1:if(!Et&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,xr(t,e,n),Et=r):xr(t,e,n);break;default:xr(t,e,n)}}function t0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tC),e.forEach(function(r){var i=dC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,xn=!1;break e;case 3:it=a.stateNode.containerInfo,xn=!0;break e;case 4:it=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(it===null)throw Error(z(160));XE(s,o,i),it=null,xn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JE(e,t),e=e.sibling}function JE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),Pn(t),r&4){try{la(3,t,t.return),Wc(3,t)}catch(I){Fe(t,t.return,I)}try{la(5,t,t.return)}catch(I){Fe(t,t.return,I)}}break;case 1:mn(e,t),Pn(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(mn(e,t),Pn(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var i=t.stateNode;try{wa(i,"")}catch(I){Fe(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_w(i,s),tf(a,o);var c=tf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?Iw(i,p):h==="dangerouslySetInnerHTML"?Tw(i,p):h==="children"?wa(i,p):Op(i,h,p,c)}switch(a){case"input":Yh(i,s);break;case"textarea":ww(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Ps(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ps(i,!!s.multiple,s.defaultValue,!0):Ps(i,!!s.multiple,s.multiple?[]:"",!1))}i[ka]=s}catch(I){Fe(t,t.return,I)}}break;case 6:if(mn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Fe(t,t.return,I)}}break;case 3:if(mn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ia(e.containerInfo)}catch(I){Fe(t,t.return,I)}break;case 4:mn(e,t),Pn(t);break;case 13:mn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gm=ze())),r&4&&t0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(c=Et)||h,mn(e,t),Et=c):mn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(p=G=h;G!==null;){switch(m=G,y=m.child,m.tag){case 0:case 11:case 14:case 15:la(4,m,m.return);break;case 1:xs(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(I){Fe(r,n,I)}}break;case 5:xs(m,m.return);break;case 22:if(m.memoizedState!==null){r0(p);continue}}y!==null?(y.return=m,G=y):r0(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bw("display",o))}catch(I){Fe(t,t.return,I)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(I){Fe(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mn(e,t),Pn(t),r&4&&t0(t);break;case 21:break;default:mn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wa(i,""),r.flags&=-33);var s=e0(t);Rf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e0(t);Nf(t,a,o);break;default:throw Error(z(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rC(t,e,n){G=t,ZE(t)}function ZE(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Et;a=tu;var c=Et;if(tu=o,(Et=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?i0(i):l!==null?(l.return=o,G=l):i0(i);for(;s!==null;)G=s,ZE(s),s=s.sibling;G=i,tu=a,Et=c}n0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):n0(t)}}function n0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Wc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Uv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Ia(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Et||e.flags&512&&kf(e)}catch(m){Fe(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function r0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function i0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wc(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var s=e.return;try{kf(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{kf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var iC=Math.ceil,sc=hr.ReactCurrentDispatcher,pm=hr.ReactCurrentOwner,cn=hr.ReactCurrentBatchConfig,de=0,tt=null,He=null,lt=0,qt=0,_s=ri(0),Qe=0,La=null,Mi=0,Hc=0,mm=0,ua=null,Vt=null,gm=0,qs=1/0,Wn=null,oc=!1,jf=null,Br=null,nu=!1,jr=null,ac=0,ca=0,Df=null,bu=-1,Iu=0;function Nt(){return de&6?ze():bu!==-1?bu:bu=ze()}function zr(t){return t.mode&1?de&2&&lt!==0?lt&-lt:BP.transition!==null?(Iu===0&&(Iu=Ow()),Iu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:Ww(t.type)),t):1}function En(t,e,n,r){if(50<ca)throw ca=0,Df=null,Error(z(185));rl(t,n,r),(!(de&2)||t!==tt)&&(t===tt&&(!(de&2)&&(Hc|=n),Qe===4&&Ar(t,lt)),Ut(t,r),n===1&&de===0&&!(e.mode&1)&&(qs=ze()+500,Bc&&ii()))}function Ut(t,e){var n=t.callbackNode;BA(t,e);var r=Wu(t,t===tt?lt:0);if(r===0)n!==null&&fv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fv(n),e===1)t.tag===0?UP(s0.bind(null,t)):uE(s0.bind(null,t)),LP(function(){!(de&6)&&ii()}),n=null;else{switch(Mw(r)){case 1:n=zp;break;case 4:n=Vw;break;case 16:n=$u;break;case 536870912:n=Lw;break;default:n=$u}n=aT(n,eT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eT(t,e){if(bu=-1,Iu=0,de&6)throw Error(z(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Wu(t,t===tt?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lc(t,r);else{e=r;var i=de;de|=2;var s=nT();(tt!==t||lt!==e)&&(Wn=null,qs=ze()+500,Ni(t,e));do try{aC();break}catch(a){tT(t,a)}while(!0);tm(),sc.current=s,de=i,He!==null?e=0:(tt=null,lt=0,e=Qe)}if(e!==0){if(e===2&&(i=af(t),i!==0&&(r=i,e=Vf(t,i))),e===1)throw n=La,Ni(t,0),Ar(t,r),Ut(t,ze()),n;if(e===6)Ar(t,r);else{if(i=t.current.alternate,!(r&30)&&!sC(i)&&(e=lc(t,r),e===2&&(s=af(t),s!==0&&(r=s,e=Vf(t,s))),e===1))throw n=La,Ni(t,0),Ar(t,r),Ut(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:wi(t,Vt,Wn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=gm+500-ze(),10<e)){if(Wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mf(wi.bind(null,t,Vt,Wn),e);break}wi(t,Vt,Wn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iC(r/1960))-r,10<r){t.timeoutHandle=mf(wi.bind(null,t,Vt,Wn),r);break}wi(t,Vt,Wn);break;case 5:wi(t,Vt,Wn);break;default:throw Error(z(329))}}}return Ut(t,ze()),t.callbackNode===n?eT.bind(null,t):null}function Vf(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(Ni(t,e).flags|=256),t=lc(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Lf(e)),t}function Lf(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function sC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Tn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~mm,e&=~Hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function s0(t){if(de&6)throw Error(z(327));js();var e=Wu(t,0);if(!(e&1))return Ut(t,ze()),null;var n=lc(t,e);if(t.tag!==0&&n===2){var r=af(t);r!==0&&(e=r,n=Vf(t,r))}if(n===1)throw n=La,Ni(t,0),Ar(t,e),Ut(t,ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wi(t,Vt,Wn),Ut(t,ze()),null}function ym(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(qs=ze()+500,Bc&&ii())}}function Fi(t){jr!==null&&jr.tag===0&&!(de&6)&&js();var e=de;de|=1;var n=cn.transition,r=ge;try{if(cn.transition=null,ge=1,t)return t()}finally{ge=r,cn.transition=n,de=e,!(de&6)&&ii()}}function vm(){qt=_s.current,Ie(_s)}function Ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VP(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Jp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qu();break;case 3:Ws(),Ie(Mt),Ie(St),am();break;case 5:om(r);break;case 4:Ws();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:nm(r.type._context);break;case 22:case 23:vm()}n=n.return}if(tt=t,He=t=$r(t.current,null),lt=qt=e,Qe=0,La=null,mm=Hc=Mi=0,Vt=ua=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Si=null}return t}function tT(t,e){do{var n=He;try{if(tm(),wu.current=ic,rc){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rc=!1}if(Oi=0,et=Ge=je=null,aa=!1,ja=0,pm.current=null,n===null||n.return===null){Qe=1,La=e,He=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=qv(o);if(y!==null){y.flags&=-257,Kv(y,o,a,s,e),y.mode&1&&Hv(s,c,e),e=y,l=c;var E=e.updateQueue;if(E===null){var I=new Set;I.add(l),e.updateQueue=I}else E.add(l);break e}else{if(!(e&1)){Hv(s,c,e),xm();break e}l=Error(z(426))}}else if(Ce&&a.mode&1){var P=qv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Kv(P,o,a,s,e),Zp(Hs(l,a));break e}}s=l=Hs(l,a),Qe!==4&&(Qe=2),ua===null?ua=[s]:ua.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=ME(s,l,e);Fv(s,_);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Br===null||!Br.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=FE(s,a,e);Fv(s,S);break e}}s=s.return}while(s!==null)}iT(n)}catch(j){e=j,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function nT(){var t=sc.current;return sc.current=ic,t===null?ic:t}function xm(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Mi&268435455)&&!(Hc&268435455)||Ar(tt,lt)}function lc(t,e){var n=de;de|=2;var r=nT();(tt!==t||lt!==e)&&(Wn=null,Ni(t,e));do try{oC();break}catch(i){tT(t,i)}while(!0);if(tm(),de=n,sc.current=r,He!==null)throw Error(z(261));return tt=null,lt=0,Qe}function oC(){for(;He!==null;)rT(He)}function aC(){for(;He!==null&&!RA();)rT(He)}function rT(t){var e=oT(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?iT(t):He=e,pm.current=null}function iT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eC(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=ZP(n,e,qt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function wi(t,e,n){var r=ge,i=cn.transition;try{cn.transition=null,ge=1,lC(t,e,n,r)}finally{cn.transition=i,ge=r}return null}function lC(t,e,n,r){do js();while(jr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zA(t,s),t===tt&&(He=tt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,aT($u,function(){return js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=ge;ge=1;var a=de;de|=4,pm.current=null,nC(t,n),JE(n,t),PP(ff),Hu=!!hf,ff=hf=null,t.current=n,rC(n),jA(),de=a,ge=o,cn.transition=s}else t.current=n;if(nu&&(nu=!1,jr=t,ac=i),s=t.pendingLanes,s===0&&(Br=null),LA(n.stateNode),Ut(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oc)throw oc=!1,t=jf,jf=null,t;return ac&1&&t.tag!==0&&js(),s=t.pendingLanes,s&1?t===Df?ca++:(ca=0,Df=t):ca=0,ii(),null}function js(){if(jr!==null){var t=Mw(ac),e=cn.transition,n=ge;try{if(cn.transition=null,ge=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,ac=0,de&6)throw Error(z(331));var i=de;for(de|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:la(8,h,s)}var p=h.child;if(p!==null)p.return=h,G=p;else for(;G!==null;){h=G;var m=h.sibling,y=h.return;if(QE(h),h===c){G=null;break}if(m!==null){m.return=y,G=m;break}G=y}}}var E=s.alternate;if(E!==null){var I=E.child;if(I!==null){E.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:la(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,G=_;break e}G=s.return}}var x=t.current;for(G=x;G!==null;){o=G;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,G=b;else e:for(o=x;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wc(9,a)}}catch(j){Fe(a,a.return,j)}if(a===o){G=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,G=S;break e}G=a.return}}if(de=i,ii(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Lc,t)}catch{}r=!0}return r}finally{ge=n,cn.transition=e}}return!1}function o0(t,e,n){e=Hs(n,e),e=ME(t,e,1),t=Ur(t,e,1),e=Nt(),t!==null&&(rl(t,1,e),Ut(t,e))}function Fe(t,e,n){if(t.tag===3)o0(t,t,n);else for(;e!==null;){if(e.tag===3){o0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){t=Hs(n,t),t=FE(e,t,1),e=Ur(e,t,1),t=Nt(),e!==null&&(rl(e,1,t),Ut(e,t));break}}e=e.return}}function uC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(lt&n)===n&&(Qe===4||Qe===3&&(lt&130023424)===lt&&500>ze()-gm?Ni(t,0):mm|=n),Ut(t,e)}function sT(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=Nt();t=ir(t,e),t!==null&&(rl(t,e,n),Ut(t,n))}function cC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sT(t,n)}function dC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),sT(t,n)}var oT;oT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,JP(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Ce&&e.flags&1048576&&cE(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tu(t,e),t=e.pendingProps;var i=Bs(e,St.current);Rs(e,n),i=um(null,e,r,t,i,n);var s=cm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,Yu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,im(e),i.updater=$c,e.stateNode=i,i._reactInternals=e,Ef(e,r,t,n),e=If(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&Xp(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fC(r),t=vn(r,t),i){case 0:e=bf(null,e,r,t,n);break e;case 1:e=Yv(null,e,r,t,n);break e;case 11:e=Gv(null,e,r,t,n);break e;case 14:e=Qv(null,e,r,vn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),bf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Yv(t,e,r,i,n);case 3:e:{if($E(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gE(t,e),tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hs(Error(z(423)),e),e=Xv(t,e,r,n,i);break e}else if(r!==i){i=Hs(Error(z(424)),e),e=Xv(t,e,r,n,i);break e}else for(Kt=Fr(e.stateNode.containerInfo.firstChild),Qt=e,Ce=!0,_n=null,n=pE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zs(),r===i){e=sr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return yE(e),t===null&&xf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,pf(r,i)?o=null:s!==null&&pf(r,s)&&(e.flags|=32),zE(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&xf(e),null;case 13:return WE(t,e,n);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$s(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Gv(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(Zu,r._currentValue),r._currentValue=o,s!==null)if(Tn(s.value,o)){if(s.children===i.children&&!Mt.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_f(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_f(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=hn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=vn(r,e.pendingProps),i=vn(r.type,i),Qv(t,e,r,i,n);case 15:return UE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Tu(t,e),e.tag=1,Ft(r)?(t=!0,Yu(e)):t=!1,Rs(e,n),OE(e,r,i),Ef(e,r,i,n),If(null,e,r,!0,t,n);case 19:return HE(t,e,n);case 22:return BE(t,e,n)}throw Error(z(156,e.tag))};function aT(t,e){return Dw(t,e)}function hC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new hC(t,e,n,r)}function _m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fC(t){if(typeof t=="function")return _m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fp)return 11;if(t===Up)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Su(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")_m(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return Ri(n.children,i,s,e);case Mp:o=8,i|=8;break;case Hh:return t=un(12,n,e,i|2),t.elementType=Hh,t.lanes=s,t;case qh:return t=un(13,n,e,i),t.elementType=qh,t.lanes=s,t;case Kh:return t=un(19,n,e,i),t.elementType=Kh,t.lanes=s,t;case yw:return qc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mw:o=10;break e;case gw:o=9;break e;case Fp:o=11;break e;case Up:o=14;break e;case br:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ri(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function qc(t,e,n,r){return t=un(22,t,r,e),t.elementType=yw,t.lanes=n,t.stateNode={isHidden:!1},t}function yh(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function vh(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wm(t,e,n,r,i,s,o,a,l){return t=new pC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(s),t}function mC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lT(t){if(!t)return Yr;t=t._reactInternals;e:{if(Ki(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ft(n))return lE(t,n,e)}return e}function uT(t,e,n,r,i,s,o,a,l){return t=wm(n,r,!0,t,i,s,o,a,l),t.context=lT(null),n=t.current,r=Nt(),i=zr(n),s=Xn(r,i),s.callback=e??null,Ur(n,s,i),t.current.lanes=i,rl(t,i,r),Ut(t,r),t}function Kc(t,e,n,r){var i=e.current,s=Nt(),o=zr(i);return n=lT(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(i,e,o),t!==null&&(En(t,i,o,s),_u(t,i,o)),o}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){a0(t,e),(t=t.alternate)&&a0(t,e)}function gC(){return null}var cT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tm(t){this._internalRoot=t}Gc.prototype.render=Tm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Kc(t,e,null,null)};Gc.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fi(function(){Kc(null,t,null,null)}),e[rr]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&$w(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l0(){}function yC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=uc(o);s.call(c)}}var o=uT(e,r,t,0,null,!1,!1,"",l0);return t._reactRootContainer=o,t[rr]=o.current,Pa(t.nodeType===8?t.parentNode:t),Fi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=uc(l);a.call(c)}}var l=wm(t,0,!1,null,null,!1,!1,"",l0);return t._reactRootContainer=l,t[rr]=l.current,Pa(t.nodeType===8?t.parentNode:t),Fi(function(){Kc(e,l,n,r)}),l}function Yc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=uc(o);a.call(l)}}Kc(e,o,t,i)}else o=yC(n,e,t,i,r);return uc(o)}Fw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&($p(e,n|1),Ut(e,ze()),!(de&6)&&(qs=ze()+500,ii()))}break;case 13:Fi(function(){var r=ir(t,1);if(r!==null){var i=Nt();En(r,t,1,i)}}),Em(t,1)}};Wp=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Nt();En(e,t,134217728,n)}Em(t,134217728)}};Uw=function(t){if(t.tag===13){var e=zr(t),n=ir(t,e);if(n!==null){var r=Nt();En(n,t,e,r)}Em(t,e)}};Bw=function(){return ge};zw=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};rf=function(t,e,n){switch(e){case"input":if(Yh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Uc(r);if(!i)throw Error(z(90));xw(r),Yh(r,i)}}}break;case"textarea":ww(t,n);break;case"select":e=n.value,e!=null&&Ps(t,!!n.multiple,e,!1)}};Pw=ym;Cw=Fi;var vC={usingClientEntryPoint:!1,Events:[sl,ps,Uc,Sw,Aw,ym]},Uo={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xC={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rw(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||gC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Lc=ru.inject(xC),Rn=ru}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vC;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(z(200));return mC(t,e,null,n)};Zt.createRoot=function(t,e){if(!bm(t))throw Error(z(299));var n=!1,r="",i=cT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wm(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,Pa(t.nodeType===8?t.parentNode:t),new Tm(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Rw(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Fi(t)};Zt.hydrate=function(t,e,n){if(!Qc(e))throw Error(z(200));return Yc(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!bm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uT(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)};Zt.render=function(t,e,n){if(!Qc(e))throw Error(z(200));return Yc(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(z(40));return t._reactRootContainer?(Fi(function(){Yc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Zt.unstable_batchedUpdates=ym;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Yc(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function dT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dT)}catch(t){console.error(t)}}dT(),dw.exports=Zt;var hT=dw.exports,fT,u0=hT;fT=u0.createRoot,u0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oa.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const c0="popstate";function _C(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Gi(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Of("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:cc(s))}function r(i,s){Im(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return EC(e,n,r,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Im(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wC(){return Math.random().toString(36).substr(2,8)}function d0(t,e){return{usr:t.state,key:t.key,idx:e}}function Of(t,e,n,r){return n===void 0&&(n=null),Oa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gi(e):e,{state:n,key:e&&e.key||r||wC()})}function cc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function EC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Dr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Oa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=Dr.Pop;let P=h(),_=P==null?null:P-c;c=P,l&&l({action:a,location:I.location,delta:_})}function m(P,_){a=Dr.Push;let x=Of(I.location,P,_);n&&n(x,P),c=h()+1;let b=d0(x,c),S=I.createHref(x);try{o.pushState(b,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(S)}s&&l&&l({action:a,location:I.location,delta:1})}function y(P,_){a=Dr.Replace;let x=Of(I.location,P,_);n&&n(x,P),c=h();let b=d0(x,c),S=I.createHref(x);o.replaceState(b,"",S),s&&l&&l({action:a,location:I.location,delta:0})}function E(P){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof P=="string"?P:cc(P);return x=x.replace(/ $/,"%20"),De(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(c0,p),l=P,()=>{i.removeEventListener(c0,p),l=null}},createHref(P){return e(i,P)},createURL:E,encodeLocation(P){let _=E(P);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(P){return o.go(P)}};return I}var h0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(h0||(h0={}));function TC(t,e,n){return n===void 0&&(n="/"),bC(t,e,n)}function bC(t,e,n,r){let i=typeof e=="string"?Gi(e):e,s=Ks(i.pathname||"/",n);if(s==null)return null;let o=pT(t);IC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=LC(s);a=DC(o[l],c)}return a}function pT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(De(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Wr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(De(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:RC(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of mT(s.path))i(s,o,l)}),e}function mT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=mT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function IC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SC=/^:[\w-]+$/,AC=3,PC=2,CC=1,kC=10,NC=-2,f0=t=>t==="*";function RC(t,e){let n=t.split("/"),r=n.length;return n.some(f0)&&(r+=NC),e&&(r+=PC),n.filter(i=>!f0(i)).reduce((i,s)=>i+(SC.test(s)?AC:s===""?CC:kC),r)}function jC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function DC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Mf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Wr([s,p.pathname]),pathnameBase:UC(Wr([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Wr([s,p.pathnameBase]))}return o}function Mf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let I=a[p]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const E=a[p];return y&&!E?c[m]=void 0:c[m]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function VC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Im(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function LC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Im(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ks(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function OC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Gi(t):t;return{pathname:n?n.startsWith("/")?n:MC(n,e):e,search:BC(r),hash:zC(i)}}function MC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sm(t,e){let n=FC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Am(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Gi(t):(i=Oa({},t),De(!i.pathname||!i.pathname.includes("?"),xh("?","pathname","search",i)),De(!i.pathname||!i.pathname.includes("#"),xh("#","pathname","hash",i)),De(!i.search||!i.search.includes("#"),xh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=OC(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Wr=t=>t.join("/").replace(/\/\/+/g,"/"),UC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $C(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gT=["post","put","patch","delete"];new Set(gT);const WC=["get",...gT];new Set(WC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ma.apply(this,arguments)}const Xc=N.createContext(null),yT=N.createContext(null),fr=N.createContext(null),Jc=N.createContext(null),si=N.createContext({outlet:null,matches:[],isDataRoute:!1}),vT=N.createContext(null);function HC(t,e){let{relative:n}=e===void 0?{}:e;lo()||De(!1);let{basename:r,navigator:i}=N.useContext(fr),{hash:s,pathname:o,search:a}=Zc(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Wr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function lo(){return N.useContext(Jc)!=null}function Qi(){return lo()||De(!1),N.useContext(Jc).location}function xT(t){N.useContext(fr).static||N.useLayoutEffect(t)}function al(){let{isDataRoute:t}=N.useContext(si);return t?i2():qC()}function qC(){lo()||De(!1);let t=N.useContext(Xc),{basename:e,future:n,navigator:r}=N.useContext(fr),{matches:i}=N.useContext(si),{pathname:s}=Qi(),o=JSON.stringify(Sm(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return xT(()=>{a.current=!0}),N.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=Am(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Wr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,s,t])}function Zc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(fr),{matches:i}=N.useContext(si),{pathname:s}=Qi(),o=JSON.stringify(Sm(i,r.v7_relativeSplatPath));return N.useMemo(()=>Am(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function KC(t,e){return GC(t,e)}function GC(t,e,n,r){lo()||De(!1);let{navigator:i}=N.useContext(fr),{matches:s}=N.useContext(si),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Qi(),h;if(e){var p;let P=typeof e=="string"?Gi(e):e;l==="/"||(p=P.pathname)!=null&&p.startsWith(l)||De(!1),h=P}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let P=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=TC(t,{pathname:y}),I=ZC(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:Wr([l,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:Wr([l,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&I?N.createElement(Jc.Provider,{value:{location:Ma({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Dr.Pop}},I):I}function QC(){let t=r2(),e=$C(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const YC=N.createElement(QC,null);class XC extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(si.Provider,{value:this.props.routeContext},N.createElement(vT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JC(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(Xc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(si.Provider,{value:e},r)}function ZC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||De(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:m,errors:y}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let y,E=!1,I=null,P=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,I=p.route.errorElement||YC,l&&(c<0&&m===0?(s2("route-fallback"),E=!0,P=null):c===m&&(E=!0,P=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),x=()=>{let b;return y?b=I:E?b=P:p.route.Component?b=N.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=h,N.createElement(JC,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(XC,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var _T=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_T||{}),wT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wT||{});function e2(t){let e=N.useContext(Xc);return e||De(!1),e}function t2(t){let e=N.useContext(yT);return e||De(!1),e}function n2(t){let e=N.useContext(si);return e||De(!1),e}function ET(t){let e=n2(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function r2(){var t;let e=N.useContext(vT),n=t2(),r=ET();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function i2(){let{router:t}=e2(_T.UseNavigateStable),e=ET(wT.UseNavigateStable),n=N.useRef(!1);return xT(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ma({fromRouteId:e},s)))},[t,e])}const p0={};function s2(t,e,n){p0[t]||(p0[t]=!0)}function o2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function a2(t){let{to:e,replace:n,state:r,relative:i}=t;lo()||De(!1);let{future:s,static:o}=N.useContext(fr),{matches:a}=N.useContext(si),{pathname:l}=Qi(),c=al(),h=Am(e,Sm(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(h);return N.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function gn(t){De(!1)}function l2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Dr.Pop,navigator:s,static:o=!1,future:a}=t;lo()&&De(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Ma({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Gi(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:E="default"}=r,I=N.useMemo(()=>{let P=Ks(h,l);return P==null?null:{location:{pathname:P,search:p,hash:m,state:y,key:E},navigationType:i}},[l,h,p,m,y,E,i]);return I==null?null:N.createElement(fr.Provider,{value:c},N.createElement(Jc.Provider,{children:n,value:I}))}function u2(t){let{children:e,location:n}=t;return KC(Ff(e),n)}new Promise(()=>{});function Ff(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,Ff(r.props.children,s));return}r.type!==gn&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ff(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(this,arguments)}function TT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function c2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d2(t,e){return t.button===0&&(!e||e==="_self")&&!c2(t)}const h2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p2="6";try{window.__reactRouterVersion=p2}catch{}const m2=N.createContext({isTransitioning:!1}),g2="startTransition",m0=uA[g2];function y2(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=_C({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=N.useCallback(p=>{c&&m0?m0(()=>l(p)):l(p)},[l,c]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>o2(r),[r]),N.createElement(l2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const v2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ds=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:p}=e,m=TT(e,h2),{basename:y}=N.useContext(fr),E,I=!1;if(typeof c=="string"&&x2.test(c)&&(E=c,v2))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),j=Ks(S.pathname,y);S.origin===b.origin&&j!=null?c=j+S.search+S.hash:I=!0}catch{}let P=HC(c,{relative:i}),_=w2(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:p});function x(b){r&&r(b),b.defaultPrevented||_(b)}return N.createElement("a",dc({},m,{href:E||P,onClick:I||s?r:x,ref:n,target:l}))}),g0=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,p=TT(e,f2),m=Zc(l,{relative:p.relative}),y=Qi(),E=N.useContext(yT),{navigator:I,basename:P}=N.useContext(fr),_=E!=null&&E2(m)&&c===!0,x=I.encodeLocation?I.encodeLocation(m).pathname:m.pathname,b=y.pathname,S=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&P&&(S=Ks(S,P)||S);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=b===x||!o&&b.startsWith(x)&&b.charAt(j)==="/",T=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),v={isActive:D,isPending:T,isTransitioning:_},A=D?r:void 0,k;typeof s=="function"?k=s(v):k=[s,D?"active":null,T?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(v):a;return N.createElement(Ds,dc({},p,{"aria-current":A,className:k,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(v):h)});var Uf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uf||(Uf={}));var y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(y0||(y0={}));function _2(t){let e=N.useContext(Xc);return e||De(!1),e}function w2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=al(),c=Qi(),h=Zc(t,{relative:o});return N.useCallback(p=>{if(d2(p,n)){p.preventDefault();let m=r!==void 0?r:cc(c)===cc(h);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function E2(t,e){e===void 0&&(e={});let n=N.useContext(m2);n==null&&De(!1);let{basename:r}=_2(Uf.useViewTransitionState),i=Zc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ks(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ks(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mf(i.pathname,o)!=null||Mf(i.pathname,s)!=null}var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},T2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},IT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new b2;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const E=c<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I2=function(t){const e=bT(t);return IT.encodeByteArray(e,!0)},hc=function(t){return I2(t).replace(/\./g,"")},ST=function(t){try{return IT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=()=>S2().__FIREBASE_DEFAULTS__,P2=()=>{if(typeof process>"u"||typeof v0>"u")return;const t=v0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ST(t[1]);return e&&JSON.parse(e)},ed=()=>{try{return A2()||P2()||C2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AT=t=>{var e,n;return(n=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},k2=t=>{const e=AT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PT=()=>{var t;return(t=ed())===null||t===void 0?void 0:t.config},CT=t=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hc(JSON.stringify(n)),hc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function D2(){var t;const e=(t=ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M2(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F2(){return!D2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U2(){try{return typeof indexedDB=="object"}catch{return!1}}function B2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z2,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pr(i,a,r)}}function $2(t,e){return t.replace(W2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const W2=/\{\$([^}]+)}/g;function H2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(x0(s)&&x0(o)){if(!fc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function x0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ko(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function q2(t,e){const n=new K2(t,e);return n.subscribe.bind(n)}class K2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");G2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_h),i.error===void 0&&(i.error=_h),i.complete===void 0&&(i.complete=_h);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _h(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class Ui{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new N2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X2(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y2(t){return t===Ei?void 0:t}function X2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Z2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},ek=le.INFO,tk={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},nk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=ek,this._logHandler=nk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const rk=(t,e)=>e.some(n=>t instanceof n);let _0,w0;function ik(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sk(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kT=new WeakMap,Bf=new WeakMap,NT=new WeakMap,wh=new WeakMap,Cm=new WeakMap;function ok(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kT.set(n,t)}).catch(()=>{}),Cm.set(e,t),e}function ak(t){if(Bf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Bf.set(t,e)}let zf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lk(t){zf=t(zf)}function uk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eh(this),e,...n);return NT.set(r,e.sort?e.sort():[e]),Hr(r)}:sk().includes(t)?function(...e){return t.apply(Eh(this),e),Hr(kT.get(this))}:function(...e){return Hr(t.apply(Eh(this),e))}}function ck(t){return typeof t=="function"?uk(t):(t instanceof IDBTransaction&&ak(t),rk(t,ik())?new Proxy(t,zf):t)}function Hr(t){if(t instanceof IDBRequest)return ok(t);if(wh.has(t))return wh.get(t);const e=ck(t);return e!==t&&(wh.set(t,e),Cm.set(e,t)),e}const Eh=t=>Cm.get(t);function dk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hr(o.result),l.oldVersion,l.newVersion,Hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const hk=["get","getKey","getAll","getAllKeys","count"],fk=["put","add","delete","clear"],Th=new Map;function E0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hk.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Th.set(e,s),s}lk(t=>({...t,get:(e,n,r)=>E0(e,n)||t.get(e,n,r),has:(e,n)=>!!E0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $f="@firebase/app",T0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Pm("@firebase/app"),gk="@firebase/app-compat",yk="@firebase/analytics-compat",vk="@firebase/analytics",xk="@firebase/app-check-compat",_k="@firebase/app-check",wk="@firebase/auth",Ek="@firebase/auth-compat",Tk="@firebase/database",bk="@firebase/data-connect",Ik="@firebase/database-compat",Sk="@firebase/functions",Ak="@firebase/functions-compat",Pk="@firebase/installations",Ck="@firebase/installations-compat",kk="@firebase/messaging",Nk="@firebase/messaging-compat",Rk="@firebase/performance",jk="@firebase/performance-compat",Dk="@firebase/remote-config",Vk="@firebase/remote-config-compat",Lk="@firebase/storage",Ok="@firebase/storage-compat",Mk="@firebase/firestore",Fk="@firebase/vertexai-preview",Uk="@firebase/firestore-compat",Bk="firebase",zk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",$k={[$f]:"fire-core",[gk]:"fire-core-compat",[vk]:"fire-analytics",[yk]:"fire-analytics-compat",[_k]:"fire-app-check",[xk]:"fire-app-check-compat",[wk]:"fire-auth",[Ek]:"fire-auth-compat",[Tk]:"fire-rtdb",[bk]:"fire-data-connect",[Ik]:"fire-rtdb-compat",[Sk]:"fire-fn",[Ak]:"fire-fn-compat",[Pk]:"fire-iid",[Ck]:"fire-iid-compat",[kk]:"fire-fcm",[Nk]:"fire-fcm-compat",[Rk]:"fire-perf",[jk]:"fire-perf-compat",[Dk]:"fire-rc",[Vk]:"fire-rc-compat",[Lk]:"fire-gcs",[Ok]:"fire-gcs-compat",[Mk]:"fire-fst",[Uk]:"fire-fst-compat",[Fk]:"fire-vertex","fire-js":"fire-js",[Bk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Map,Wk=new Map,Hf=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gs(t){const e=t.name;if(Hf.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;Hf.set(e,t);for(const n of pc.values())b0(n,t);for(const n of Wk.values())b0(n,t);return!0}function km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new ll("app","Firebase",Hk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=zk;function RT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=PT()),!n)throw qr.create("no-options");const s=pc.get(i);if(s){if(fc(n,s.options)&&fc(r,s.config))return s;throw qr.create("duplicate-app",{appName:i})}const o=new J2(i);for(const l of Hf.values())o.addComponent(l);const a=new qk(n,r,o);return pc.set(i,a),a}function jT(t=Wf){const e=pc.get(t);if(!e&&t===Wf&&PT())return RT();if(!e)throw qr.create("no-app",{appName:t});return e}function Kr(t,e,n){var r;let i=(r=$k[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(a.join(" "));return}Gs(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="firebase-heartbeat-database",Gk=1,Fa="firebase-heartbeat-store";let bh=null;function DT(){return bh||(bh=dk(Kk,Gk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),bh}async function Qk(t){try{const n=(await DT()).transaction(Fa),r=await n.objectStore(Fa).get(VT(t));return await n.done,r}catch(e){if(e instanceof pr)or.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function I0(t,e){try{const r=(await DT()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,VT(t)),await r.done}catch(n){if(n instanceof pr)or.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function VT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=1024,Xk=30*24*60*60*1e3;class Jk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=S0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Xk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S0(),{heartbeatsToSend:r,unsentEntries:i}=Zk(this._heartbeatsCache.heartbeats),s=hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return or.warn(n),""}}}function S0(){return new Date().toISOString().substring(0,10)}function Zk(t,e=Yk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),A0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),A0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U2()?B2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function A0(t){return hc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){Gs(new Ui("platform-logger",e=>new pk(e),"PRIVATE")),Gs(new Ui("heartbeat",e=>new Jk(e),"PRIVATE")),Kr($f,T0,t),Kr($f,T0,"esm2017"),Kr("fire-js","")}tN("");var nN="firebase",rN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(nN,rN,"app");function Nm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function LT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iN=LT,OT=new ll("auth","Firebase",LT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Pm("@firebase/auth");function sN(t,...e){mc.logLevel<=le.WARN&&mc.warn(`Auth (${uo}): ${t}`,...e)}function Au(t,...e){mc.logLevel<=le.ERROR&&mc.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw Rm(t,...e)}function Dn(t,...e){return Rm(t,...e)}function MT(t,e,n){const r=Object.assign(Object.assign({},iN()),{[e]:n});return new ll("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return MT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OT.create(t,...e)}function ee(t,e,...n){if(!t)throw Rm(e,...n)}function Gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function ar(t,e){t||Gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oN(){return P0()==="http:"||P0()==="https:"}function P0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oN()||L2()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=j2()||O2()}get(){return aN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new cl(3e4,6e4);function oi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ai(t,e,n,r,i={}){return UT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ul(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return V2()||(c.referrerPolicy="no-referrer"),FT.fetch()(BT(t,t.config.apiHost,n,a),c)})}async function UT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uN),e);try{const i=new hN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw iu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw iu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw iu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw MT(t,h,c);bn(t,h)}}catch(i){if(i instanceof pr)throw i;bn(t,"network-request-failed",{message:String(i)})}}async function dl(t,e,n,r,i={}){const s=await ai(t,e,n,r,i);return"mfaPendingCredential"in s&&bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function BT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?jm(t.config,i):`${t.config.apiScheme}://${i}`}function dN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),cN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function iu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dn(t,e,r);return i.customData._tokenResponse=n,i}function C0(t){return t!==void 0&&t.enterprise!==void 0}class fN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pN(t,e){return ai(t,"GET","/v2/recaptchaConfig",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function zT(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gN(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),i=Dm(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:da(Ih(i.auth_time)),issuedAtTime:da(Ih(i.iat)),expirationTime:da(Ih(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ih(t){return Number(t)*1e3}function Dm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const i=ST(n);return i?JSON.parse(i):(Au("Failed to decode base64 JWT payload"),null)}catch(i){return Au("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k0(t){const e=Dm(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&yN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ua(t,zT(n,{idToken:r}));ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$T(s.providerUserInfo):[],a=_N(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function xN(t){const e=Xe(t);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _N(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $T(t){return t.map(e=>{var{providerId:n}=e,r=Nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){const n=await UT(t,{},async()=>{const r=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=BT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EN(t,e){return ai(t,"POST","/v2/accounts:revokeToken",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=k0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await wN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vs;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gN(this,e)}reload(){return xN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(Jn(this.auth));const e=await this.getIdToken();return await Ua(this,mN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:S,isAnonymous:j,providerData:D,stsTokenManager:T}=n;ee(b&&T,e,"internal-error");const v=Vs.fromJSON(this.name,T);ee(typeof b=="string",e,"internal-error"),_r(p,e.name),_r(m,e.name),ee(typeof S=="boolean",e,"internal-error"),ee(typeof j=="boolean",e,"internal-error"),_r(y,e.name),_r(E,e.name),_r(I,e.name),_r(P,e.name),_r(_,e.name),_r(x,e.name);const A=new Qn({uid:b,auth:e,email:m,emailVerified:S,displayName:p,isAnonymous:j,photoURL:E,phoneNumber:y,tenantId:I,stsTokenManager:v,createdAt:_,lastLoginAt:x});return D&&Array.isArray(D)&&(A.providerData=D.map(k=>Object.assign({},k))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vs;i.updateFromServerResponse(n);const s=new Qn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?$T(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(r);const l=new Qn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;function Yn(t){ar(t instanceof Function,"Expected a class definition");let e=N0.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,N0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WT.type="NONE";const R0=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Pu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ls(Yn(R0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Yn(R0);const o=Pu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const p=Qn._fromJSON(e,h);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ls(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(XT(e))return"Webos";if(qT(e))return"Safari";if((e.includes("chrome/")||KT(e))&&!e.includes("edge/"))return"Chrome";if(QT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HT(t=At()){return/firefox\//i.test(t)}function qT(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KT(t=At()){return/crios\//i.test(t)}function GT(t=At()){return/iemobile/i.test(t)}function QT(t=At()){return/android/i.test(t)}function YT(t=At()){return/blackberry/i.test(t)}function XT(t=At()){return/webos/i.test(t)}function Vm(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TN(t=At()){var e;return Vm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bN(){return M2()&&document.documentMode===10}function JT(t=At()){return Vm(t)||QT(t)||XT(t)||YT(t)||/windows phone/i.test(t)||GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e=[]){let n;switch(t){case"Browser":n=j0(At());break;case"Worker":n=`${j0(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e={}){return ai(t,"GET","/v2/passwordPolicy",oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=6;class PN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new IN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zT(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(Jn(this));const n=e?Xe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SN(this),n=new PN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yi(t){return Xe(t)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=q2(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kN(t){td=t}function eb(t){return td.loadJS(t)}function NN(){return td.recaptchaEnterpriseScript}function RN(){return td.gapiScript}function jN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const DN="recaptcha-enterprise",VN="NO_RECAPTCHA";class LN{constructor(e){this.type=DN,this.auth=Yi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{pN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new fN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;C0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(VN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&C0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=NN();l.length!==0&&(l+=a),eb(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function V0(t,e,n,r=!1){const i=new LN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await V0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await V0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){const n=km(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fc(s,e??{}))return i;bn(i,"already-initialized")}return n.initialize({options:e})}function MN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FN(t,e,n){const r=Yi(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=tb(e),{host:o,port:a}=UN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),BN()}function tb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UN(t){const e=tb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:L0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:L0(o)}}}function L0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gn("not implemented")}_getIdTokenResponse(e){return Gn("not implemented")}_linkToIdToken(e,n){return Gn("not implemented")}_getReauthenticationResolver(e){return Gn("not implemented")}}async function zN(t,e){return ai(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){return dl(t,"POST","/v1/accounts:signInWithPassword",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}async function HN(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Lm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ba(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ba(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,n,"signInWithPassword",$N);case"emailLink":return WN(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,r,"signUpPassword",zN);case"emailLink":return HN(e,{idToken:n,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e){return dl(t,"POST","/v1/accounts:signInWithIdp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="http://localhost";class Bi extends Lm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Nm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Bi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Os(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}buildRequest(){const e={requestUri:qN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GN(t){const e=Ko(Go(t)).link,n=e?Ko(Go(e)).deep_link_id:null,r=Ko(Go(t)).deep_link_id;return(r?Ko(Go(r)).link:null)||r||n||e||t}class Om{constructor(e){var n,r,i,s,o,a;const l=Ko(Go(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=KN((i=l.mode)!==null&&i!==void 0?i:null);ee(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=GN(e);try{return new Om(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.providerId=co.PROVIDER_ID}static credential(e,n){return Ba._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Om.parseLink(n);return ee(r,"argument-error"),Ba._fromEmailAndCode(e,r.code,r.tenantId)}}co.PROVIDER_ID="password";co.EMAIL_PASSWORD_SIGN_IN_METHOD="password";co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends nb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends hl{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends hl{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends hl{constructor(){super("twitter.com")}static credential(e,n){return Bi._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return dl(t,"POST","/v1/accounts:signUp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Qn._fromIdTokenResponse(e,r,i),o=O0(r);return new zi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=O0(r);return new zi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function O0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new yc(e,n,r,i)}}function rb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(t,s,e,r):s})}async function YN(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(Jn(r));const i="reauthenticate";try{const s=await Ua(t,rb(r,i,e,t),n);ee(s.idToken,r,"internal-error");const o=Dm(s.idToken);ee(o,r,"internal-error");const{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),zi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(t,e,n=!1){if(Nn(t.app))return Promise.reject(Jn(t));const r="signIn",i=await rb(t,r,e),s=await zi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JN(t,e){return ib(Yi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(t){const e=Yi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZN(t,e,n){if(Nn(t.app))return Promise.reject(Jn(t));const r=Yi(t),o=await Gf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&sb(t),l}),a=await zi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function eR(t,e,n){return Nn(t.app)?Promise.reject(Jn(t)):JN(Xe(t),co.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sb(t),r})}function tR(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function nR(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function rR(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function iR(t){return Xe(t).signOut()}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=1e3,oR=10;class ab extends ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ab.type="LOCAL";const aR=ab;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lb.type="SESSION";const ub=lb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await lR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Mm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function cR(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function dR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fR(){return cb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebaseLocalStorageDb",pR=1,xc="firebaseLocalStorage",hb="fbase_key";class fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rd(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function mR(){const t=indexedDB.deleteDatabase(db);return new fl(t).toPromise()}function Qf(){const t=indexedDB.open(db,pR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xc,{keyPath:hb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xc)?e(r):(r.close(),await mR(),e(await Qf()))})})}async function M0(t,e,n){const r=rd(t,!0).put({[hb]:e,value:n});return new fl(r).toPromise()}async function gR(t,e){const n=rd(t,!1).get(e),r=await new fl(n).toPromise();return r===void 0?null:r.value}function F0(t,e){const n=rd(t,!0).delete(e);return new fl(n).toPromise()}const yR=800,vR=3;class fb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(fR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dR(),!this.activeServiceWorker)return;this.sender=new uR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qf();return await M0(e,vc,"1"),await F0(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>M0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=rd(i,!1).getAll();return new fl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fb.type="LOCAL";const xR=fb;new cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e){return e?Yn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Lm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Os(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wR(t){return ib(t.auth,new Fm(t),t.bypassAuthState)}function ER(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),XN(n,new Fm(t),t.bypassAuthState)}async function TR(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),YN(n,new Fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return TR;case"reauthViaPopup":case"reauthViaRedirect":return ER;default:bn(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new cl(2e3,1e4);class ws extends pb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bR.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="pendingRedirect",Cu=new Map;class SR extends pb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await AR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AR(t,e){const n=kR(e),r=CR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PR(t,e){Cu.set(t._key(),e)}function CR(t){return Yn(t._redirectPersistence)}function kR(t){return Pu(IR,t.config.apiKey,t.name)}async function NR(t,e,n=!1){if(Nn(t.app))return Promise.reject(Jn(t));const r=Yi(t),i=_R(r,e),o=await new SR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=10*60*1e3;class jR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RR&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e={}){return ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OR=/^https?/;async function MR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VR(t);for(const n of e)try{if(FR(n))return}catch{}bn(t,"unauthorized-domain")}function FR(t){const e=qf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OR.test(n))return!1;if(LR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new cl(3e4,6e4);function B0(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BR(t){return new Promise((e,n)=>{var r,i,s;function o(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(Dn(t,"network-request-failed"))},timeout:UR.get()})}if(!((i=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)o();else{const a=jN("iframefcb");return Vn()[a]=()=>{gapi.load?o():n(Dn(t,"network-request-failed"))},eb(`${RN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ku=null,e})}let ku=null;function zR(t){return ku=ku||BR(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new cl(5e3,15e3),WR="__/auth/iframe",HR="emulator/auth/iframe",qR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GR(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jm(e,HR):`https://${t.config.authDomain}/${WR}`,r={apiKey:e.apiKey,appName:t.name,v:uo},i=KR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ul(r).slice(1)}`}async function QR(t){const e=await zR(t),n=Vn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:GR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},$R.get());function l(){Vn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XR=500,JR=600,ZR="_blank",ej="http://localhost";class z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tj(t,e,n,r=XR,i=JR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},YR),{width:r.toString(),height:i.toString(),top:s,left:o}),c=At().toLowerCase();n&&(a=KT(c)?ZR:n),HT(c)&&(e=e||ej,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(TN(c)&&a!=="_self")return nj(e||"",a),new z0(null);const p=window.open(e||"",a,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new z0(p)}function nj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="__/auth/handler",ij="emulator/auth/handler",sj=encodeURIComponent("fac");async function $0(t,e,n,r,i,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:i};if(e instanceof nb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",H2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof hl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${sj}=${encodeURIComponent(l)}`:"";return`${oj(t)}?${ul(a).slice(1)}${c}`}function oj({config:t}){return t.emulator?jm(t,ij):`https://${t.authDomain}/${rj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="webStorageSupport";class aj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ub,this._completeRedirectFn=NR,this._overrideRedirectResult=PR}async _openPopup(e,n,r,i){var s;ar((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $0(e,n,r,qf(),i);return tj(e,o,Mm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $0(e,n,r,qf(),i);return cR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ar(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QR(e),r=new jR(e);return n.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sh,{type:Sh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Sh];o!==void 0&&n(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JT()||qT()||Vm()}}const lj=aj;var W0="@firebase/auth",H0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dj(t){Gs(new Ui("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(t)},c=new CN(r,i,s,l);return MN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gs(new Ui("auth-internal",e=>{const n=Yi(e.getProvider("auth").getImmediate());return(r=>new uj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(W0,H0,cj(t)),Kr(W0,H0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=5*60,fj=CT("authIdTokenMaxAge")||hj;let q0=null;const pj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fj)return;const i=n==null?void 0:n.token;q0!==i&&(q0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mj(t=jT()){const e=km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ON(t,{popupRedirectResolver:lj,persistence:[xR,aR,ub]}),r=CT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pj(s.toString());nR(n,o,()=>o(n.currentUser)),tR(n,a=>o(a))}}const i=AT("auth");return i&&FN(n,`http://${i}`),n}function gj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Dn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dj("Browser");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,gb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function A(){}A.prototype=v.prototype,T.D=v.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(k,R,V){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return v.prototype[R].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,A){A||(A=0);var k=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)k[R]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=T.g[0],A=T.g[1],R=T.g[2];var V=T.g[3],C=v+(V^A&(R^V))+k[0]+3614090360&4294967295;v=A+(C<<7&4294967295|C>>>25),C=V+(R^v&(A^R))+k[1]+3905402710&4294967295,V=v+(C<<12&4294967295|C>>>20),C=R+(A^V&(v^A))+k[2]+606105819&4294967295,R=V+(C<<17&4294967295|C>>>15),C=A+(v^R&(V^v))+k[3]+3250441966&4294967295,A=R+(C<<22&4294967295|C>>>10),C=v+(V^A&(R^V))+k[4]+4118548399&4294967295,v=A+(C<<7&4294967295|C>>>25),C=V+(R^v&(A^R))+k[5]+1200080426&4294967295,V=v+(C<<12&4294967295|C>>>20),C=R+(A^V&(v^A))+k[6]+2821735955&4294967295,R=V+(C<<17&4294967295|C>>>15),C=A+(v^R&(V^v))+k[7]+4249261313&4294967295,A=R+(C<<22&4294967295|C>>>10),C=v+(V^A&(R^V))+k[8]+1770035416&4294967295,v=A+(C<<7&4294967295|C>>>25),C=V+(R^v&(A^R))+k[9]+2336552879&4294967295,V=v+(C<<12&4294967295|C>>>20),C=R+(A^V&(v^A))+k[10]+4294925233&4294967295,R=V+(C<<17&4294967295|C>>>15),C=A+(v^R&(V^v))+k[11]+2304563134&4294967295,A=R+(C<<22&4294967295|C>>>10),C=v+(V^A&(R^V))+k[12]+1804603682&4294967295,v=A+(C<<7&4294967295|C>>>25),C=V+(R^v&(A^R))+k[13]+4254626195&4294967295,V=v+(C<<12&4294967295|C>>>20),C=R+(A^V&(v^A))+k[14]+2792965006&4294967295,R=V+(C<<17&4294967295|C>>>15),C=A+(v^R&(V^v))+k[15]+1236535329&4294967295,A=R+(C<<22&4294967295|C>>>10),C=v+(R^V&(A^R))+k[1]+4129170786&4294967295,v=A+(C<<5&4294967295|C>>>27),C=V+(A^R&(v^A))+k[6]+3225465664&4294967295,V=v+(C<<9&4294967295|C>>>23),C=R+(v^A&(V^v))+k[11]+643717713&4294967295,R=V+(C<<14&4294967295|C>>>18),C=A+(V^v&(R^V))+k[0]+3921069994&4294967295,A=R+(C<<20&4294967295|C>>>12),C=v+(R^V&(A^R))+k[5]+3593408605&4294967295,v=A+(C<<5&4294967295|C>>>27),C=V+(A^R&(v^A))+k[10]+38016083&4294967295,V=v+(C<<9&4294967295|C>>>23),C=R+(v^A&(V^v))+k[15]+3634488961&4294967295,R=V+(C<<14&4294967295|C>>>18),C=A+(V^v&(R^V))+k[4]+3889429448&4294967295,A=R+(C<<20&4294967295|C>>>12),C=v+(R^V&(A^R))+k[9]+568446438&4294967295,v=A+(C<<5&4294967295|C>>>27),C=V+(A^R&(v^A))+k[14]+3275163606&4294967295,V=v+(C<<9&4294967295|C>>>23),C=R+(v^A&(V^v))+k[3]+4107603335&4294967295,R=V+(C<<14&4294967295|C>>>18),C=A+(V^v&(R^V))+k[8]+1163531501&4294967295,A=R+(C<<20&4294967295|C>>>12),C=v+(R^V&(A^R))+k[13]+2850285829&4294967295,v=A+(C<<5&4294967295|C>>>27),C=V+(A^R&(v^A))+k[2]+4243563512&4294967295,V=v+(C<<9&4294967295|C>>>23),C=R+(v^A&(V^v))+k[7]+1735328473&4294967295,R=V+(C<<14&4294967295|C>>>18),C=A+(V^v&(R^V))+k[12]+2368359562&4294967295,A=R+(C<<20&4294967295|C>>>12),C=v+(A^R^V)+k[5]+4294588738&4294967295,v=A+(C<<4&4294967295|C>>>28),C=V+(v^A^R)+k[8]+2272392833&4294967295,V=v+(C<<11&4294967295|C>>>21),C=R+(V^v^A)+k[11]+1839030562&4294967295,R=V+(C<<16&4294967295|C>>>16),C=A+(R^V^v)+k[14]+4259657740&4294967295,A=R+(C<<23&4294967295|C>>>9),C=v+(A^R^V)+k[1]+2763975236&4294967295,v=A+(C<<4&4294967295|C>>>28),C=V+(v^A^R)+k[4]+1272893353&4294967295,V=v+(C<<11&4294967295|C>>>21),C=R+(V^v^A)+k[7]+4139469664&4294967295,R=V+(C<<16&4294967295|C>>>16),C=A+(R^V^v)+k[10]+3200236656&4294967295,A=R+(C<<23&4294967295|C>>>9),C=v+(A^R^V)+k[13]+681279174&4294967295,v=A+(C<<4&4294967295|C>>>28),C=V+(v^A^R)+k[0]+3936430074&4294967295,V=v+(C<<11&4294967295|C>>>21),C=R+(V^v^A)+k[3]+3572445317&4294967295,R=V+(C<<16&4294967295|C>>>16),C=A+(R^V^v)+k[6]+76029189&4294967295,A=R+(C<<23&4294967295|C>>>9),C=v+(A^R^V)+k[9]+3654602809&4294967295,v=A+(C<<4&4294967295|C>>>28),C=V+(v^A^R)+k[12]+3873151461&4294967295,V=v+(C<<11&4294967295|C>>>21),C=R+(V^v^A)+k[15]+530742520&4294967295,R=V+(C<<16&4294967295|C>>>16),C=A+(R^V^v)+k[2]+3299628645&4294967295,A=R+(C<<23&4294967295|C>>>9),C=v+(R^(A|~V))+k[0]+4096336452&4294967295,v=A+(C<<6&4294967295|C>>>26),C=V+(A^(v|~R))+k[7]+1126891415&4294967295,V=v+(C<<10&4294967295|C>>>22),C=R+(v^(V|~A))+k[14]+2878612391&4294967295,R=V+(C<<15&4294967295|C>>>17),C=A+(V^(R|~v))+k[5]+4237533241&4294967295,A=R+(C<<21&4294967295|C>>>11),C=v+(R^(A|~V))+k[12]+1700485571&4294967295,v=A+(C<<6&4294967295|C>>>26),C=V+(A^(v|~R))+k[3]+2399980690&4294967295,V=v+(C<<10&4294967295|C>>>22),C=R+(v^(V|~A))+k[10]+4293915773&4294967295,R=V+(C<<15&4294967295|C>>>17),C=A+(V^(R|~v))+k[1]+2240044497&4294967295,A=R+(C<<21&4294967295|C>>>11),C=v+(R^(A|~V))+k[8]+1873313359&4294967295,v=A+(C<<6&4294967295|C>>>26),C=V+(A^(v|~R))+k[15]+4264355552&4294967295,V=v+(C<<10&4294967295|C>>>22),C=R+(v^(V|~A))+k[6]+2734768916&4294967295,R=V+(C<<15&4294967295|C>>>17),C=A+(V^(R|~v))+k[13]+1309151649&4294967295,A=R+(C<<21&4294967295|C>>>11),C=v+(R^(A|~V))+k[4]+4149444226&4294967295,v=A+(C<<6&4294967295|C>>>26),C=V+(A^(v|~R))+k[11]+3174756917&4294967295,V=v+(C<<10&4294967295|C>>>22),C=R+(v^(V|~A))+k[2]+718787259&4294967295,R=V+(C<<15&4294967295|C>>>17),C=A+(V^(R|~v))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+V&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var A=v-this.blockSize,k=this.B,R=this.h,V=0;V<v;){if(R==0)for(;V<=A;)i(this,T,V),V+=this.blockSize;if(typeof T=="string"){for(;V<v;)if(k[R++]=T.charCodeAt(V++),R==this.blockSize){i(this,k),R=0;break}}else for(;V<v;)if(k[R++]=T[V++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var A=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=A&255,A/=256;for(this.u(T),T=Array(16),v=A=0;4>v;++v)for(var k=0;32>k;k+=8)T[A++]=this.g[v]>>>k&255;return T};function s(T,v){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=v(T)}function o(T,v){this.h=v;for(var A=[],k=!0,R=T.length-1;0<=R;R--){var V=T[R]|0;k&&V==v||(A[R]=V,k=!1)}this.g=A}var a={};function l(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return P(c(-T));for(var v=[],A=1,k=0;T>=A;k++)v[k]=T/A|0,A*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return P(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(v,8)),k=p,R=0;R<T.length;R+=8){var V=Math.min(8,T.length-R),C=parseInt(T.substring(R,R+V),v);8>V?(V=c(Math.pow(v,V)),k=k.j(V).add(c(C))):(k=k.j(A),k=k.add(c(C)))}return k}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var T=0,v=1,A=0;A<this.g.length;A++){var k=this.i(A);T+=(0<=k?k:4294967296+k)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(I(this))return"-"+P(this).toString(T);for(var v=c(Math.pow(T,6)),A=this,k="";;){var R=S(A,v).g;A=_(A,R.j(v));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=R,E(A))return V+k;for(;6>V.length;)V="0"+V;k=V+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=_(this,T),I(T)?-1:E(T)?0:1};function P(T){for(var v=T.g.length,A=[],k=0;k<v;k++)A[k]=~T.g[k];return new o(A,~T.h).add(m)}t.abs=function(){return I(this)?P(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),A=[],k=0,R=0;R<=v;R++){var V=k+(this.i(R)&65535)+(T.i(R)&65535),C=(V>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);k=C>>>16,V&=65535,C&=65535,A[R]=C<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(T,v){return T.add(P(v))}t.j=function(T){if(E(this)||E(T))return p;if(I(this))return I(T)?P(this).j(P(T)):P(P(this).j(T));if(I(T))return P(this.j(P(T)));if(0>this.l(y)&&0>T.l(y))return c(this.m()*T.m());for(var v=this.g.length+T.g.length,A=[],k=0;k<2*v;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<T.g.length;R++){var V=this.i(k)>>>16,C=this.i(k)&65535,Ae=T.i(R)>>>16,tn=T.i(R)&65535;A[2*k+2*R]+=C*tn,x(A,2*k+2*R),A[2*k+2*R+1]+=V*tn,x(A,2*k+2*R+1),A[2*k+2*R+1]+=C*Ae,x(A,2*k+2*R+1),A[2*k+2*R+2]+=V*Ae,x(A,2*k+2*R+2)}for(k=0;k<v;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=v;k<2*v;k++)A[k]=0;return new o(A,0)};function x(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function b(T,v){this.g=T,this.h=v}function S(T,v){if(E(v))throw Error("division by zero");if(E(T))return new b(p,p);if(I(T))return v=S(P(T),v),new b(P(v.g),P(v.h));if(I(v))return v=S(T,P(v)),new b(P(v.g),v.h);if(30<T.g.length){if(I(T)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var A=m,k=v;0>=k.l(T);)A=j(A),k=j(k);var R=D(A,1),V=D(k,1);for(k=D(k,2),A=D(A,2);!E(k);){var C=V.add(k);0>=C.l(T)&&(R=R.add(A),V=C),k=D(k,1),A=D(A,1)}return v=_(T,R.j(v)),new b(R,v)}for(R=p;0<=T.l(v);){for(A=Math.max(1,Math.floor(T.m()/v.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),V=c(A),C=V.j(v);I(C)||0<C.l(T);)A-=k,V=c(A),C=V.j(v);E(V)&&(V=m),R=R.add(V),T=_(T,C)}return new b(R,T)}t.A=function(T){return S(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),A=[],k=0;k<v;k++)A[k]=this.i(k)&T.i(k);return new o(A,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),A=[],k=0;k<v;k++)A[k]=this.i(k)|T.i(k);return new o(A,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),A=[],k=0;k<v;k++)A[k]=this.i(k)^T.i(k);return new o(A,this.h^T.h)};function j(T){for(var v=T.g.length+1,A=[],k=0;k<v;k++)A[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(A,T.h)}function D(T,v){var A=v>>5;v%=32;for(var k=T.g.length-A,R=[],V=0;V<k;V++)R[V]=0<v?T.i(V+A)>>>v|T.i(V+A+1)<<32-v:T.i(V+A);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ji=o}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yb,Qo,vb,Nu,Yf,xb,_b,wb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof su=="object"&&su];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var L=u[w];if(!(L in g))break e;g=g[L]}u=u[u.length-1],w=g[u],f=f(w),f!=w&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,w=!1,L={next:function(){if(!w&&g<u.length){var M=g++;return{value:f(M,u[M]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function p(u,f,g){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function m(u,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function E(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(w,L,M){for(var H=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)H[xe-2]=arguments[xe];return f.prototype[L].apply(w,H)}}function I(u){const f=u.length;if(0<f){const g=Array(f);for(let w=0;w<f;w++)g[w]=u[w];return g}return[]}function P(u,f){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const L=u.length||0,M=w.length||0;u.length=L+M;for(let H=0;H<M;H++)u[L+H]=w[H]}else u.push(w)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function x(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(u,f,g){for(const w in u)f.call(g,u[w],w,u)}function T(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function v(u){const f={};for(const g in u)f[g]=u[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let g,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(g in w)u[g]=w[g];for(let M=0;M<A.length;M++)g=A[M],Object.prototype.hasOwnProperty.call(w,g)&&(u[g]=w[g])}}function R(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function V(u){a.setTimeout(()=>{throw u},0)}function C(){var u=X;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,g){const w=tn.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var tn=new _(()=>new zt,u=>u.reset());class zt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,$=!1,X=new Ae,Z=()=>{const u=a.Promise.resolve(void 0);ue=()=>{u.then(ve)}};var ve=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){V(g)}var f=tn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}$=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Wt(u,f){if(we.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(j){e:{try{S(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Je[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Wt.aa.h.call(this)}}E(Wt,we);var Je={2:"touch",3:"pen",4:"mouse"};Wt.prototype.h=function(){Wt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),vo=0;function xo(u,f,g,w,L){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=L,this.key=++vo,this.da=this.fa=!1}function q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function nn(u){this.src=u,this.g={},this.h=0}nn.prototype.add=function(u,f,g,w,L){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var H=O(u,f,w,L);return-1<H?(f=u[H],g||(f.fa=!1)):(f=new xo(f,this.src,M,!!w,L),f.fa=g,u.push(f)),f};function F(u,f){var g=f.type;if(g in u.g){var w=u.g[g],L=Array.prototype.indexOf.call(w,f,void 0),M;(M=0<=L)&&Array.prototype.splice.call(w,L,1),M&&(q(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function O(u,f,g,w){for(var L=0;L<u.length;++L){var M=u[L];if(!M.da&&M.listener==f&&M.capture==!!g&&M.ha==w)return L}return-1}var W="closure_lm_"+(1e6*Math.random()|0),se={};function $e(u,f,g,w,L){if(Array.isArray(f)){for(var M=0;M<f.length;M++)$e(u,f[M],g,w,L);return null}return g=iy(g),u&&u[Dt]?u.K(f,g,c(w)?!!w.capture:!1,L):Pe(u,f,g,!1,w,L)}function Pe(u,f,g,w,L,M){if(!f)throw Error("Invalid event type");var H=c(L)?!!L.capture:!!L,xe=mr(u);if(xe||(u[W]=xe=new nn(u)),g=xe.add(f,g,w,H,M),g.proxy)return g;if(w=ke(),g.proxy=w,w.src=u,w.listener=g,u.addEventListener)$t||(L=H),L===void 0&&(L=!1),u.addEventListener(f.toString(),w,L);else if(u.attachEvent)u.attachEvent(rn(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ke(){function u(g){return f.call(u.src,u.listener,g)}const f=hi;return u}function di(u,f,g,w,L){if(Array.isArray(f))for(var M=0;M<f.length;M++)di(u,f[M],g,w,L);else w=c(w)?!!w.capture:!!w,g=iy(g),u&&u[Dt]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],g=O(M,g,w,L),-1<g&&(q(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=mr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=O(f,g,w,L)),(g=-1<u?f[u]:null)&&An(g))}function An(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Dt])F(f.i,u);else{var g=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(g,w,u.capture):f.detachEvent?f.detachEvent(rn(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=mr(f))?(F(g,u),g.h==0&&(g.src=null,f[W]=null)):q(u)}}}function rn(u){return u in se?se[u]:se[u]="on"+u}function hi(u,f){if(u.da)u=!0;else{f=new Wt(f,this);var g=u.listener,w=u.ha||u.src;u.fa&&An(u),u=g.call(w,f)}return u}function mr(u){return u=u[W],u instanceof nn?u:null}var fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function iy(u){return typeof u=="function"?u:(u[fi]||(u[fi]=function(f){return u.handleEvent(f)}),u[fi])}function ht(){pe.call(this),this.i=new nn(this),this.M=this,this.F=null}E(ht,pe),ht.prototype[Dt]=!0,ht.prototype.removeEventListener=function(u,f,g,w){di(this,u,f,g,w)};function Pt(u,f){var g,w=u.F;if(w)for(g=[];w;w=w.F)g.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new we(f,u);else if(f instanceof we)f.target=f.target||u;else{var L=f;f=new we(w,u),k(f,L)}if(L=!0,g)for(var M=g.length-1;0<=M;M--){var H=f.g=g[M];L=Il(H,w,!0,f)&&L}if(H=f.g=u,L=Il(H,w,!0,f)&&L,L=Il(H,w,!1,f)&&L,g)for(M=0;M<g.length;M++)H=f.g=g[M],L=Il(H,w,!1,f)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],w=0;w<g.length;w++)q(g[w]);delete u.g[f],u.h--}}this.F=null},ht.prototype.K=function(u,f,g,w){return this.i.add(String(u),f,!1,g,w)},ht.prototype.L=function(u,f,g,w){return this.i.add(String(u),f,!0,g,w)};function Il(u,f,g,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,M=0;M<f.length;++M){var H=f[M];if(H&&!H.da&&H.capture==g){var xe=H.listener,nt=H.ha||H.src;H.fa&&F(u.i,H),L=xe.call(nt,w)!==!1&&L}}return L&&!w.defaultPrevented}function sy(u,f,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function oy(u){u.g=sy(()=>{u.g=null,u.i&&(u.i=!1,oy(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class y1 extends pe{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:oy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(u){pe.call(this),this.h=u,this.g={}}E(_o,pe);var ay=[];function ly(u){D(u.g,function(f,g){this.g.hasOwnProperty(g)&&An(f)},u),u.g={}}_o.prototype.N=function(){_o.aa.N.call(this),ly(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nd=a.JSON.stringify,v1=a.JSON.parse,x1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Rd(){}Rd.prototype.h=null;function uy(u){return u.h||(u.h=u.i())}function cy(){}var wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jd(){we.call(this,"d")}E(jd,we);function Dd(){we.call(this,"c")}E(Dd,we);var pi={},dy=null;function Sl(){return dy=dy||new ht}pi.La="serverreachability";function hy(u){we.call(this,pi.La,u)}E(hy,we);function Eo(u){const f=Sl();Pt(f,new hy(f))}pi.STAT_EVENT="statevent";function fy(u,f){we.call(this,pi.STAT_EVENT,u),this.stat=f}E(fy,we);function Ct(u){const f=Sl();Pt(f,new fy(f,u))}pi.Ma="timingevent";function py(u,f){we.call(this,pi.Ma,u),this.size=f}E(py,we);function To(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function bo(){this.g=!0}bo.prototype.xa=function(){this.g=!1};function _1(u,f,g,w,L,M){u.info(function(){if(u.g)if(M)for(var H="",xe=M.split("&"),nt=0;nt<xe.length;nt++){var he=xe[nt].split("=");if(1<he.length){var ft=he[0];he=he[1];var pt=ft.split("_");H=2<=pt.length&&pt[1]=="type"?H+(ft+"="+he+"&"):H+(ft+"=redacted&")}}else H=null;else H=M;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+f+`
`+g+`
`+H})}function w1(u,f,g,w,L,M,H){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+f+`
`+g+`
`+M+" "+H})}function es(u,f,g,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+T1(u,g)+(w?" "+w:"")})}function E1(u,f){u.info(function(){return"TIMEOUT: "+f})}bo.prototype.info=function(){};function T1(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var w=g[u];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return Nd(g)}catch{return f}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},my={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vd;function Pl(){}E(Pl,Rd),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Vd=new Pl;function gr(u,f,g,w){this.j=u,this.i=f,this.l=g,this.R=w||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gy}function gy(){this.i=null,this.g="",this.h=!1}var yy={},Ld={};function Od(u,f,g){u.L=1,u.v=Rl(zn(f)),u.m=g,u.P=!0,vy(u,null)}function vy(u,f){u.F=Date.now(),Cl(u),u.A=zn(u.v);var g=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Ry(g.i,"t",w),u.C=0,g=u.j.J,u.h=new gy,u.g=Yy(u.j,g?f:null,!u.m),0<u.O&&(u.M=new y1(m(u.Y,u,u.g),u.O)),f=u.U,g=u.g,w=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ay[0]=L.toString()),L=ay);for(var M=0;M<L.length;M++){var H=$e(g,L[M],w||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Eo(),_1(u.i,u.u,u.A,u.l,u.R,u.m)}gr.prototype.ca=function(u){u=u.target;const f=this.M;f&&$n(u)==3?f.j():this.Y(u)},gr.prototype.Y=function(u){try{if(u==this.g)e:{const pt=$n(this.g);var f=this.g.Ba();const rs=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Fy(this.g)))){this.J||pt!=4||f==7||(f==8||0>=rs?Eo(3):Eo(2)),Md(this);var g=this.g.Z();this.X=g;t:if(xy(this)){var w=Fy(this.g);u="";var L=w.length,M=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Io(this);var H="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(M&&f==L-1)});w.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=g==200,w1(this.i,this.u,this.A,this.l,this.R,pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,nt=this.g;if((xe=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(xe)){var he=xe;break t}}he=null}if(g=he)es(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fd(this,g);else{this.o=!1,this.s=3,Ct(12),mi(this),Io(this);break e}}if(this.P){g=!0;let pn;for(;!this.J&&this.C<H.length;)if(pn=b1(this,H),pn==Ld){pt==4&&(this.s=4,Ct(14),g=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==yy){this.s=4,Ct(15),es(this.i,this.l,H,"[Invalid Chunk]"),g=!1;break}else es(this.i,this.l,pn,null),Fd(this,pn);if(xy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||H.length!=0||this.h.h||(this.s=1,Ct(16),g=!1),this.o=this.o&&g,!g)es(this.i,this.l,H,"[Invalid Chunked Response]"),mi(this),Io(this);else if(0<H.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Hd(ft),ft.M=!0,Ct(11))}}else es(this.i,this.l,H,null),Fd(this,H);pt==4&&mi(this),this.o&&!this.J&&(pt==4?qy(this.j,this):(this.o=!1,Cl(this)))}else B1(this.g),g==400&&0<H.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),mi(this),Io(this)}}}catch{}finally{}};function xy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function b1(u,f){var g=u.C,w=f.indexOf(`
`,g);return w==-1?Ld:(g=Number(f.substring(g,w)),isNaN(g)?yy:(w+=1,w+g>f.length?Ld:(f=f.slice(w,w+g),u.C=w+g,f)))}gr.prototype.cancel=function(){this.J=!0,mi(this)};function Cl(u){u.S=Date.now()+u.I,_y(u,u.I)}function _y(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=To(m(u.ba,u),f)}function Md(u){u.B&&(a.clearTimeout(u.B),u.B=null)}gr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(E1(this.i,this.A),this.L!=2&&(Eo(),Ct(17)),mi(this),this.s=2,Io(this)):_y(this,this.S-u)};function Io(u){u.j.G==0||u.J||qy(u.j,u)}function mi(u){Md(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,ly(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Fd(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Ud(g.h,u))){if(!u.K&&Ud(g.h,u)&&g.G==3){try{var w=g.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Ml(g),Ll(g);else break e;Wd(g),Ct(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=To(m(g.Za,g),6e3));if(1>=Ty(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else yi(g,11)}else if((u.K||g.g==u)&&Ml(g),!x(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let he=L[f];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const ft=he[3];ft!=null&&(g.la=ft,g.j.info("VER="+g.la));const pt=he[4];pt!=null&&(g.Aa=pt,g.j.info("SVER="+g.Aa));const rs=he[5];rs!=null&&typeof rs=="number"&&0<rs&&(w=1.5*rs,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const pn=u.g;if(pn){const Ul=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var M=w.h;M.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Bd(M,M.h),M.h=null))}if(w.D){const qd=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(w.ya=qd,Ee(w.I,w.D,qd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var H=u;if(w.qa=Qy(w,w.J?w.ia:null,w.W),H.K){by(w.h,H);var xe=H,nt=w.L;nt&&(xe.I=nt),xe.B&&(Md(xe),Cl(xe)),w.g=H}else Wy(w);0<g.i.length&&Ol(g)}else he[0]!="stop"&&he[0]!="close"||yi(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?yi(g,7):$d(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}Eo(4)}catch{}}var I1=class{constructor(u,f){this.g=u,this.map=f}};function wy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ey(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ty(u){return u.h?1:u.g?u.g.size:0}function Ud(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Bd(u,f){u.g?u.g.add(f):u.h=f}function by(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}wy.prototype.cancel=function(){if(this.i=Iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Iy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return I(u.i)}function S1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,w=0;w<g;w++)f.push(u[w]);return f}f=[],g=0;for(w in u)f[g++]=u[w];return f}function A1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const w in u)f[g++]=w;return f}}}function Sy(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=A1(u),w=S1(u),L=w.length,M=0;M<L;M++)f.call(void 0,w[M],g&&g[M],u)}var Ay=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function P1(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var w=u[g].indexOf("="),L=null;if(0<=w){var M=u[g].substring(0,w);L=u[g].substring(w+1)}else M=u[g];f(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gi){this.h=u.h,kl(this,u.j),this.o=u.o,this.g=u.g,Nl(this,u.s),this.l=u.l;var f=u.i,g=new Po;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Py(this,g),this.m=u.m}else u&&(f=String(u).match(Ay))?(this.h=!1,kl(this,f[1]||"",!0),this.o=So(f[2]||""),this.g=So(f[3]||"",!0),Nl(this,f[4]),this.l=So(f[5]||"",!0),Py(this,f[6]||"",!0),this.m=So(f[7]||"")):(this.h=!1,this.i=new Po(null,this.h))}gi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ao(f,Cy,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ao(f,Cy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ao(g,g.charAt(0)=="/"?N1:k1,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ao(g,j1)),u.join("")};function zn(u){return new gi(u)}function kl(u,f,g){u.j=g?So(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Nl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Py(u,f,g){f instanceof Po?(u.i=f,D1(u.i,u.h)):(g||(f=Ao(f,R1)),u.i=new Po(f,u.h))}function Ee(u,f,g){u.i.set(f,g)}function Rl(u){return Ee(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function So(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ao(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,C1),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function C1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cy=/[#\/\?@]/g,k1=/[#\?:]/g,N1=/[#\?]/g,R1=/[#\?@]/g,j1=/#/g;function Po(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function yr(u){u.g||(u.g=new Map,u.h=0,u.i&&P1(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Po.prototype,t.add=function(u,f){yr(this),this.i=null,u=ts(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function ky(u,f){yr(u),f=ts(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ny(u,f){return yr(u),f=ts(u,f),u.g.has(f)}t.forEach=function(u,f){yr(this),this.g.forEach(function(g,w){g.forEach(function(L){u.call(f,L,w,this)},this)},this)},t.na=function(){yr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let w=0;w<f.length;w++){const L=u[w];for(let M=0;M<L.length;M++)g.push(f[w])}return g},t.V=function(u){yr(this);let f=[];if(typeof u=="string")Ny(this,u)&&(f=f.concat(this.g.get(ts(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return yr(this),this.i=null,u=ts(this,u),Ny(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Ry(u,f,g){ky(u,f),0<g.length&&(u.i=null,u.g.set(ts(u,f),I(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var w=f[g];const M=encodeURIComponent(String(w)),H=this.V(w);for(w=0;w<H.length;w++){var L=M;H[w]!==""&&(L+="="+encodeURIComponent(String(H[w]))),u.push(L)}}return this.i=u.join("&")};function ts(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function D1(u,f){f&&!u.j&&(yr(u),u.i=null,u.g.forEach(function(g,w){var L=w.toLowerCase();w!=L&&(ky(this,w),Ry(this,L,g))},u)),u.j=f}function V1(u,f){const g=new bo;if(a.Image){const w=new Image;w.onload=y(vr,g,"TestLoadImage: loaded",!0,f,w),w.onerror=y(vr,g,"TestLoadImage: error",!1,f,w),w.onabort=y(vr,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=y(vr,g,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function L1(u,f){const g=new bo,w=new AbortController,L=setTimeout(()=>{w.abort(),vr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(M=>{clearTimeout(L),M.ok?vr(g,"TestPingServer: ok",!0,f):vr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),vr(g,"TestPingServer: error",!1,f)})}function vr(u,f,g,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(g)}catch{}}function O1(){this.g=new x1}function M1(u,f,g){const w=g||"";try{Sy(u,function(L,M){let H=L;c(L)&&(H=Nd(L)),f.push(w+M+"="+encodeURIComponent(H))})}catch(L){throw f.push(w+"type="+encodeURIComponent("_badmap")),L}}function jl(u){this.l=u.Ub||null,this.j=u.eb||!1}E(jl,Rd),jl.prototype.g=function(){return new Dl(this.l,this.j)},jl.prototype.i=function(u){return function(){return u}}({});function Dl(u,f){ht.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Dl,ht),t=Dl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ko(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Co(this):ko(this),this.readyState==3&&jy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Co(this))},t.Qa=function(u){this.g&&(this.response=u,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ko(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function ko(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dy(u){let f="";return D(u,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function zd(u,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Dy(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ee(u,f,g))}function Oe(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Oe,ht);var F1=/^https?$/i,U1=["POST","PUT"];t=Oe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vd.g(),this.v=this.o?uy(this.o):uy(Vd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){Vy(this,M);return}if(u=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)g.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const M of w.keys())g.set(M,w.get(M));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U1,f,void 0))||w||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of g)this.g.setRequestHeader(M,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{My(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){Vy(this,M)}};function Vy(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ly(u),Vl(u)}function Ly(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),Vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Oy(this):this.bb())},t.bb=function(){Oy(this)};function Oy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)sy(u.Ea,0,u);else if(Pt(u,"readystatechange"),$n(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=H===0){var L=String(u.D).match(Ay)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),w=!F1.test(L?L.toLowerCase():"")}g=w}if(g)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var M=2<$n(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",Ly(u)}}finally{Vl(u)}}}}function Vl(u,f){if(u.g){My(u);const g=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Pt(u,"ready");try{g.onreadystatechange=w}catch{}}}function My(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),v1(f)}};function Fy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function B1(u){const f={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(x(u[w]))continue;var g=R(u[w]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=f[L]||[];f[L]=M,M.push(g)}T(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Uy(u){this.Aa=0,this.i=[],this.j=new bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,u),this.cb=No("retryDelaySeedMs",1e4,u),this.Wa=No("forwardChannelMaxRetries",2,u),this.wa=No("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new wy(u&&u.concurrentRequestLimit),this.Da=new O1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uy.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,w){Ct(0),this.W=u,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Qy(this,null,this.W),Ol(this)};function $d(u){if(By(u),u.G==3){var f=u.U++,g=zn(u.I);if(Ee(g,"SID",u.K),Ee(g,"RID",f),Ee(g,"TYPE","terminate"),Ro(u,g),f=new gr(u,u.j,f),f.L=2,f.v=Rl(zn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Cl(f)}Gy(u)}function Ll(u){u.g&&(Hd(u),u.g.cancel(),u.g=null)}function By(u){Ll(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ml(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ol(u){if(!Ey(u.h)&&!u.s){u.s=!0;var f=u.Ga;ue||Z(),$||(ue(),$=!0),X.add(f,u),u.B=0}}function z1(u,f){return Ty(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=To(m(u.Ga,u,f),Ky(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new gr(this,this.j,u);let M=this.o;if(this.S&&(M?(M=v(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$y(this,L,f),g=zn(this.I),Ee(g,"RID",u),Ee(g,"CVER",22),this.D&&Ee(g,"X-HTTP-Session-Id",this.D),Ro(this,g),M&&(this.O?f="headers="+encodeURIComponent(String(Dy(M)))+"&"+f:this.m&&zd(g,this.m,M)),Bd(this.h,L),this.Ua&&Ee(g,"TYPE","init"),this.P?(Ee(g,"$req",f),Ee(g,"SID","null"),L.T=!0,Od(L,g,null)):Od(L,g,f),this.G=2}}else this.G==3&&(u?zy(this,u):this.i.length==0||Ey(this.h)||zy(this))};function zy(u,f){var g;f?g=f.l:g=u.U++;const w=zn(u.I);Ee(w,"SID",u.K),Ee(w,"RID",g),Ee(w,"AID",u.T),Ro(u,w),u.m&&u.o&&zd(w,u.m,u.o),g=new gr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$y(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Bd(u.h,g),Od(g,w,f)}function Ro(u,f){u.H&&D(u.H,function(g,w){Ee(f,w,g)}),u.l&&Sy({},function(g,w){Ee(f,w,g)})}function $y(u,f,g){g=Math.min(u.i.length,g);var w=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let M=-1;for(;;){const H=["count="+g];M==-1?0<g?(M=L[0].g,H.push("ofs="+M)):M=0:H.push("ofs="+M);let xe=!0;for(let nt=0;nt<g;nt++){let he=L[nt].g;const ft=L[nt].map;if(he-=M,0>he)M=Math.max(0,L[nt].g-100),xe=!1;else try{M1(ft,H,"req"+he+"_")}catch{w&&w(ft)}}if(xe){w=H.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,w}function Wy(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ue||Z(),$||(ue(),$=!0),X.add(f,u),u.v=0}}function Wd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=To(m(u.Fa,u),Ky(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Hy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=To(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Ll(this),Hy(this))};function Hd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Hy(u){u.g=new gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=zn(u.qa);Ee(f,"RID","rpc"),Ee(f,"SID",u.K),Ee(f,"AID",u.T),Ee(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ee(f,"TO",u.ja),Ee(f,"TYPE","xmlhttp"),Ro(u,f),u.m&&u.o&&zd(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Rl(zn(f)),g.m=null,g.P=!0,vy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Ll(this),Wd(this),Ct(19))};function Ml(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qy(u,f){var g=null;if(u.g==f){Ml(u),Hd(u),u.g=null;var w=2}else if(Ud(u.h,f))g=f.D,by(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;w=Sl(),Pt(w,new py(w,g)),Ol(u)}else Wy(u);else if(L=f.s,L==3||L==0&&0<f.X||!(w==1&&z1(u,f)||w==2&&Wd(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),L){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function Ky(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function yi(u,f){if(u.j.info("Error code "+f),f==2){var g=m(u.fb,u),w=u.Xa;const L=!w;w=new gi(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kl(w,"https"),Rl(w),L?V1(w.toString(),g):L1(w.toString(),g)}else Ct(2);u.G=0,u.l&&u.l.sa(f),Gy(u),By(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Gy(u){if(u.G=0,u.ka=[],u.l){const f=Iy(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function Qy(u,f,g){var w=g instanceof gi?zn(g):new gi(g);if(w.g!="")f&&(w.g=f+"."+w.g),Nl(w,w.s);else{var L=a.location;w=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var M=new gi(null);w&&kl(M,w),f&&(M.g=f),L&&Nl(M,L),g&&(M.l=g),w=M}return g=u.D,f=u.ya,g&&f&&Ee(w,g,f),Ee(w,"VER",u.la),Ro(u,w),w}function Yy(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Oe(new jl({eb:g})):new Oe(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xy(){}t=Xy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fl(){}Fl.prototype.g=function(u,f){return new Ht(u,f)};function Ht(u,f){ht.call(this),this.g=new Uy(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!x(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!x(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ns(this)}E(Ht,ht),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){$d(this.g)},Ht.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Nd(u),u=g);f.i.push(new I1(f.Ya++,u)),f.G==3&&Ol(f)},Ht.prototype.N=function(){this.g.l=null,delete this.j,$d(this.g),delete this.g,Ht.aa.N.call(this)};function Jy(u){jd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(Jy,jd);function Zy(){Dd.call(this),this.status=1}E(Zy,Dd);function ns(u){this.g=u}E(ns,Xy),ns.prototype.ua=function(){Pt(this.g,"a")},ns.prototype.ta=function(u){Pt(this.g,new Jy(u))},ns.prototype.sa=function(u){Pt(this.g,new Zy)},ns.prototype.ra=function(){Pt(this.g,"b")},Fl.prototype.createWebChannel=Fl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,wb=function(){return new Fl},_b=function(){return Sl()},xb=pi,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Nu=Al,my.COMPLETE="complete",vb=my,cy.EventType=wo,wo.OPEN="a",wo.CLOSE="b",wo.ERROR="c",wo.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Qo=cy,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,yb=Oe}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});const G0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Pm("@firebase/firestore");function Bo(){return $i.logLevel}function Q(t,...e){if($i.logLevel<=le.DEBUG){const n=e.map(Um);$i.debug(`Firestore (${ho}): ${t}`,...n)}}function lr(t,...e){if($i.logLevel<=le.ERROR){const n=e.map(Um);$i.error(`Firestore (${ho}): ${t}`,...n)}}function Qs(t,...e){if($i.logLevel<=le.WARN){const n=e.map(Um);$i.warn(`Firestore (${ho}): ${t}`,...n)}}function Um(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function ye(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class vj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xj{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Eb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new wt(e)}}class _j{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _j(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ej{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new Ej(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ye(0,0))}static max(){return new ne(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends za{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new be(n)}static emptyPath(){return new be([])}}const Ij=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends za{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return Ij.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(be.fromString(e))}static fromName(e){return new Y(be.fromString(e).popFirst(5))}static empty(){return new Y(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new be(e.slice()))}}function Sj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Xr(i,Y.empty(),e)}function Aj(t){return new Xr(t.readTime,t.key,-1)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(ne.min(),Y.empty(),-1)}static max(){return new Xr(ne.max(),Y.empty(),-1)}}function Pj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Cj)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Nj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bm.oe=-1;function id(t){return t==null}function _c(t){return t===0&&1/t==-1/0}function Rj(t){return typeof t=="number"&&Number.isInteger(t)&&!_c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new ut(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ib("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const jj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=jj.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $m(t){const e=t.mapValue.fields.__previous_value__;return zm(e)?$m(e):e}function $a(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au={mapValue:{}};function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zm(t)?4:Lj(t)?9007199254740991:Vj(t)?10:11:te()}function Un(t,e){if(t===e)return!0;const n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $a(t).isEqual($a(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),a=Jr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Be(i.doubleValue),a=Be(s.doubleValue);return o===a?_c(o)===_c(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ys(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Q0(o)!==Q0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function Ha(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Xs(t,e){if(t===e)return 0;const n=Hi(t),r=Hi(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0($a(t),$a(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wi(s),l=Wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=fe(a[c],l[c]);if(h!==0)return h}return fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=fe(Be(s.latitude),Be(o.latitude));return a!==0?a:fe(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=fe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:J0(y,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===au.mapValue&&o===au.mapValue)return 0;if(s===au.mapValue)return 1;if(o===au.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=fe(l[p],h[p]);if(m!==0)return m;const y=Xs(a[l[p]],c[h[p]]);if(y!==0)return y}return fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Jr(t),r=Jr(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function J0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Xs(n[i],r[i]);if(s)return s}return fe(n.length,r.length)}function Js(t){return Xf(t)}function Xf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xf(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function Z0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jf(t){return!!t&&"integerValue"in t}function Wm(t){return!!t&&"arrayValue"in t}function ex(t){return!!t&&"nullValue"in t}function tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function Vj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Lj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=at.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ru(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(ha(this.value))}}function Sb(t){const e=[];return Xi(t.fields,(n,r)=>{const i=new at([n]);if(Ru(r)){const s=Sb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,ne.min(),ne.min(),ne.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new Tt(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new Tt(e,2,n,ne.min(),ne.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ne.min(),ne.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.position=e,this.inclusive=n}}function nx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Xs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function Oj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{}class qe extends Ab{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fj(e,n,r):n==="array-contains"?new zj(e,r):n==="in"?new $j(e,r):n==="not-in"?new Wj(e,r):n==="array-contains-any"?new Hj(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uj(e,r):new Bj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xs(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(Xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends Ab{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new In(e,n)}matches(e){return Pb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pb(t){return t.op==="and"}function Cb(t){return Mj(t)&&Pb(t)}function Mj(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function Zf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Js(t.value);if(Cb(t))return t.filters.map(e=>Zf(e)).join(",");{const e=t.filters.map(n=>Zf(n)).join(",");return`${t.op}(${e})`}}function kb(t,e){return t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(t,e):t instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kb(o,i.filters[a]),!0):!1}(t,e):void te()}function Nb(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Js(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(Nb).join(" ,")+"}"}(t):"Filter"}class Fj extends qe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class Uj extends qe{constructor(e,n){super(e,"in",n),this.keys=Rb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Bj extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Rb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class zj extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wm(n)&&Ha(n.arrayValue,this.value)}}class $j extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ha(this.value.arrayValue,n)}}class Wj extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ha(this.value.arrayValue,n)}}class Hj extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ix(t,e=null,n=[],r=[],i=null,s=null,o=null){return new qj(t,e,n,r,i,s,o)}function Hm(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Js(r)).join(",")),e.ue=n}return e.ue}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Oj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rx(t.startAt,e.startAt)&&rx(t.endAt,e.endAt)}function ep(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Kj(t,e,n,r,i,s,o,a){return new fo(t,e,n,r,i,s,o,a)}function sd(t){return new fo(t)}function sx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jb(t){return t.collectionGroup!==null}function fa(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qa(s,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new qa(at.keyField(),r))}return e.ce}function Ln(t){const e=re(t);return e.le||(e.le=Gj(e,fa(t))),e.le}function Gj(t,e){if(t.limitType==="F")return ix(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qa(i.field,s)});const n=t.endAt?new wc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wc(t.startAt.position,t.startAt.inclusive):null;return ix(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tp(t,e){const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function np(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return qm(Ln(t),Ln(e))&&t.limitType===e.limitType}function Db(t){return`${Hm(Ln(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Nb(i)).join(", ")}]`),id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Js(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Js(i)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=nx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fa(r),i)||r.endAt&&!function(o,a,l){const c=nx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fa(r),i))}(t,e)}function Qj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Vb(t){return(e,n)=>{let r=!1;for(const i of fa(t)){const s=Yj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Yj(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Xs(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new Le(Y.comparator);function ur(){return Xj}const Lb=new Le(Y.comparator);function Yo(...t){let e=Lb;for(const n of t)e=e.insert(n.key,n);return e}function Ob(t){let e=Lb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pi(){return pa()}function Mb(){return pa()}function pa(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const Jj=new Le(Y.comparator),Zj=new ut(Y.comparator);function ae(...t){let e=Zj;for(const n of t)e=e.add(n);return e}const e5=new ut(fe);function t5(){return e5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function Fb(t){return{integerValue:""+t}}function n5(t,e){return Rj(e)?Fb(e):Km(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function r5(t,e,n){return t instanceof Ka?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zm(s)&&(s=$m(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ga?Bb(t,e):t instanceof Qa?zb(t,e):function(i,s){const o=Ub(i,s),a=ox(o)+ox(i.Pe);return Jf(o)&&Jf(i.Pe)?Fb(a):Km(i.serializer,a)}(t,e)}function i5(t,e,n){return t instanceof Ga?Bb(t,e):t instanceof Qa?zb(t,e):n}function Ub(t,e){return t instanceof Ec?function(r){return Jf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ka extends ld{}class Ga extends ld{constructor(e){super(),this.elements=e}}function Bb(t,e){const n=$b(e);for(const r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qa extends ld{constructor(e){super(),this.elements=e}}function zb(t,e){let n=$b(e);for(const r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}class Ec extends ld{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ox(t){return Be(t.integerValue||t.doubleValue)}function $b(t){return Wm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n){this.field=e,this.transform=n}}function o5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ga&&i instanceof Ga||r instanceof Qa&&i instanceof Qa?Ys(r.elements,i.elements,Un):r instanceof Ec&&i instanceof Ec?Un(r.Pe,i.Pe):r instanceof Ka&&i instanceof Ka}(t.transform,e.transform)}class a5{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function Wb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gm(t.key,dn.none()):new gl(t.key,t.data,dn.none());{const n=t.data,r=Lt.empty();let i=new ut(at.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new li(t.key,r,new Gt(i.toArray()),dn.none())}}function l5(t,e,n){t instanceof gl?function(i,s,o){const a=i.value.clone(),l=lx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,o){if(!ju(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=lx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Hb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof gl?function(s,o,a,l){if(!ju(s.precondition,o))return a;const c=s.value.clone(),h=ux(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,o,a,l){if(!ju(s.precondition,o))return a;const c=ux(s.fieldTransforms,l,o),h=o.data;return h.setAll(Hb(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return ju(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function u5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Ub(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function ax(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ys(r,i,(s,o)=>o5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gl extends ud{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends ud{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Hb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lx(t,e,n){const r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i5(o,a,n[i]))}return r}function ux(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,r5(s,o,e))}return r}class Gm extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c5 extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&l5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Mb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Wb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(n,r)=>ax(n,r))&&Ys(this.baseMutations,e.baseMutations,(n,r)=>ax(n,r))}}class Qm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=function(){return Jj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Qm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ce;function p5(t){switch(t){default:return te();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function qb(t){if(t===void 0)return lr("GRPC error has no .code"),U.UNKNOWN;switch(t){case We.OK:return U.OK;case We.CANCELLED:return U.CANCELLED;case We.UNKNOWN:return U.UNKNOWN;case We.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case We.INTERNAL:return U.INTERNAL;case We.UNAVAILABLE:return U.UNAVAILABLE;case We.UNAUTHENTICATED:return U.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case We.NOT_FOUND:return U.NOT_FOUND;case We.ALREADY_EXISTS:return U.ALREADY_EXISTS;case We.PERMISSION_DENIED:return U.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case We.ABORTED:return U.ABORTED;case We.OUT_OF_RANGE:return U.OUT_OF_RANGE;case We.UNIMPLEMENTED:return U.UNIMPLEMENTED;case We.DATA_LOSS:return U.DATA_LOSS;default:return te()}}(ce=We||(We={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=new ji([4294967295,4294967295],0);function cx(t){const e=m5().encode(t),n=new gb;return n.update(e),new Uint8Array(n.digest())}function dx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ji([n,r],0),new ji([i,s],0)]}class Ym{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ji.fromNumber(r)));return i.compare(g5)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cx(e),[r,i]=dx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ym(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=cx(e),[r,i]=dx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cd(ne.min(),i,new Le(fe),ur(),ae())}}class yl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yl(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Kb{constructor(e,n){this.targetId=e,this.me=n}}class Gb{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hx{constructor(){this.fe=0,this.ge=px(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new yl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=px()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class y5{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=fx(),this.Qe=new Le(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(ep(s))if(r===0){const o=new Y(s.path);this.Ue(n,o,Tt.newNoDocument(o,ne.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Wi(r).toUint8Array()}catch(l){if(l instanceof Ib)return Qs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ym(o,i,s)}catch(l){return Qs(l instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ep(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Tt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new cd(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=fx(),this.Qe=new Le(fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fx(){return new Le(Y.comparator)}function px(){return new Le(Y.comparator)}const v5={asc:"ASCENDING",desc:"DESCENDING"},x5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_5={and:"AND",or:"OR"};class w5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rp(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E5(t,e){return Tc(t,e.toTimestamp())}function On(t){return ye(!!t),ne.fromTimestamp(function(n){const r=Jr(n);return new Ye(r.seconds,r.nanos)}(t))}function Xm(t,e){return ip(t,e).canonicalString()}function ip(t,e){const n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yb(t){const e=be.fromString(t);return ye(tI(e)),e}function sp(t,e){return Xm(t.databaseId,e.path)}function Ah(t,e){const n=Yb(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(Jb(n))}function Xb(t,e){return Xm(t.databaseId,e)}function T5(t){const e=Yb(t);return e.length===4?be.emptyPath():Jb(e)}function op(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jb(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mx(t,e,n){return{name:sp(t,e),fields:n.value.mapValue.fields}}function b5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ye(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:qb(c.code);return new K(h,c.message||"")}(o);n=new Gb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ah(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ne.min(),a=new Lt({mapValue:{fields:r.document.fields}}),l=Tt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Du(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ah(t,r.document),s=r.readTime?On(r.readTime):ne.min(),o=Tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Du([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ah(t,r.document),s=r.removedTargetIds||[];n=new Du([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new f5(i,s),a=r.targetId;n=new Kb(a,o)}}return n}function I5(t,e){let n;if(e instanceof gl)n={update:mx(t,e.key,e.value)};else if(e instanceof Gm)n={delete:sp(t,e.key)};else if(e instanceof li)n={update:mx(t,e.key,e.data),updateMask:D5(e.fieldMask)};else{if(!(e instanceof c5))return te();n={verify:sp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ka)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ec)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:E5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function S5(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?On(i.updateTime):On(s);return o.isEqual(ne.min())&&(o=On(s)),new a5(o,i.transformResults||[])}(n,e))):[]}function A5(t,e){return{documents:[Xb(t,e.path)]}}function P5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xb(t,i);const s=function(c){if(c.length!==0)return eI(In.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:as(m.field),direction:N5(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function C5(t){let e=T5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=Zb(p);return m instanceof In&&Cb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(E){return new qa(ls(E.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,id(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new wc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,y=p.values||[];return new wc(y,m)}(n.endAt)),Kj(e,i,o,s,a,"F",l,c)}function k5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ls(n.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ls(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>Zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function N5(t){return v5[t]}function R5(t){return x5[t]}function j5(t){return _5[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return at.fromServerFormat(t.fieldPath)}function eI(t){return t instanceof qe?function(n){if(n.op==="=="){if(tx(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(ex(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tx(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(ex(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:R5(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(i=>eI(i));return r.length===1?r[0]:{compositeFilter:{op:j5(n.op),filters:r}}}(t):te()}function D5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.ct=e}}function L5(t){const e=C5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.un=new M5}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Xr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class M5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zs(0)}static kn(){return new Zs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ma(r.mutation,i,Gt.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const i=Pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ur();const o=pa(),a=function(){return pa()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof li)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ma(h.mutation,c,h.mutation.getFieldMask(),Ye.now())):o.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new U5(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pa();let i=new Le((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Gt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||ae()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=Mb();h.forEach(m=>{if(!s.has(m)){const y=Wb(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Pi());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ae())).next(h=>({batchId:a,changes:Ob(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Yo();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(p,m){return new fo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let a=Yo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ma(h.mutation,c,Gt.empty(),Ye.now()),ad(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:L5(i.bundledQuery),readTime:On(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.overlays=new Le(Y.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pi();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Pi(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Pi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Pi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new h5(n,r));let s=this.Ir.get(n);s===void 0&&(s=ae(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Tr=new ut(Ze.Er),this.dr=new ut(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new be([])),r=new Ze(n,e),i=new Ze(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new be([])),r=new Ze(n,e),i=new Ze(n,e+1);let s=ae();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ze.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new d5(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),i=new Ze(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(fe);return n.forEach(i=>{const s=new Ze(i,0),o=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new Ze(new Y(s),0);let a=new ut(fe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new Ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ze(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.Mr=e,this.docs=function(){return new Le(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Pj(Aj(h),r)<=0||(i.has(h.key)||ad(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K5(this)}getSize(e){return B.resolve(this.size)}}class K5 extends F5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.persistence=e,this.Nr=new po(n=>Hm(n),qm),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jm,this.targetCount=0,this.kr=Zs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Bm(0),this.Kr=!1,this.Kr=!0,this.$r=new W5,this.referenceDelegate=e(this),this.Ur=new G5(this),this.indexManager=new O5,this.remoteDocumentCache=function(i){return new q5(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new V5(n),this.Gr=new z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new H5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new Y5(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Y5 extends kj{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Jr=new Jm,this.Yr=null}static Zr(e){return new Zm(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ae(),i=ae();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new eg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return F2()?8:Nj(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new X5;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bo()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Bo()<=le.DEBUG&&Q("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bo()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):B.resolve())}Yi(e,n){if(sx(n))return B.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=np(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ae(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,np(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return sx(n)||i.isEqual(ne.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(Bo()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.rs(e,o,n,Sj(i,-1)).next(a=>a))})}ts(e,n){let r=new ut(Vb(e));return n.forEach((i,s)=>{ad(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bo()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",os(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Le(fe),this._s=new po(s=>Hm(s),qm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eD(t,e,n,r){return new Z5(t,e,n,r)}async function nI(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ae();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function tD(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let y=B.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(I=>{const P=c.docVersions.get(E);ye(P!==null),I.version.compareTo(P)<0&&(p.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rI(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nD(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(dt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(I,P,_){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let l=ur(),c=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(rD(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ne.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function rD(t,e,n){let r=ae(),i=ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function iD(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sD(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ap(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ml(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function gx(t,e,n){const r=re(t);let i=ne.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=re(l),m=p._s.get(h);return m!==void 0?B.resolve(p.os.get(m)):p.Ur.getTargetData(c,h)}(r,o,Ln(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:ae())).next(a=>(oD(r,Qj(e),a),{documents:a,Ts:s})))}function oD(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class yx{constructor(){this.activeTargetIds=t5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aD{constructor(){this.so=new yx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function Ph(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class dD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Ph(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Qs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=uD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Ph();return new Promise((o,a)=>{const l=new yb;l.setWithCredentials(!0),l.listenOnce(vb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nu.NO_ERROR:const h=l.getResponseJson();Q(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Nu.TIMEOUT:Q(yt,`RPC '${e}' ${s} timed out`),a(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const p=l.getStatus();if(Q(yt,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const E=function(P){const _=P.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(y.status);a(new K(E,y.message))}else a(new K(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(U.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Q(yt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(yt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Ph(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wb(),a=_b(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Q(yt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let m=!1,y=!1;const E=new cD({Io:P=>{y?Q(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(Q(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Q(yt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},To:()=>p.close()}),I=(P,_,x)=>{P.listen(_,b=>{try{x(b)}catch(S){setTimeout(()=>{throw S},0)}})};return I(p,Qo.EventType.OPEN,()=>{y||(Q(yt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),I(p,Qo.EventType.CLOSE,()=>{y||(y=!0,Q(yt,`RPC '${e}' stream ${i} transport closed`),E.So())}),I(p,Qo.EventType.ERROR,P=>{y||(y=!0,Qs(yt,`RPC '${e}' stream ${i} transport errored:`,P),E.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),I(p,Qo.EventType.MESSAGE,P=>{var _;if(!y){const x=P.data[0];ye(!!x);const b=x,S=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(S){Q(yt,`RPC '${e}' stream ${i} received error:`,S);const j=S.status;let D=function(A){const k=We[A];if(k!==void 0)return qb(k)}(j),T=S.message;D===void 0&&(D=U.INTERNAL,T="Unknown error status: "+j+" with message "+S.message),y=!0,E.So(new K(D,T)),p.close()}else Q(yt,`RPC '${e}' stream ${i} received:`,x),E.bo(x)}}),I(a,xb.STAT_EVENT,P=>{P.stat===Yf.PROXY?Q(yt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Yf.NOPROXY&&Q(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function Ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new w5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hD extends sI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=b5(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?On(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=op(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ep(l)?{documents:A5(s,l)}:{query:P5(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Qb(s,o.resumeToken);const c=rp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=Tc(s,o.snapshotVersion.toTimestamp());const c=rp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=k5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=op(this.serializer),n.removeTarget=e,this.a_(n)}}class fD extends sI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=S5(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=op(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>I5(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ip(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ip(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ji(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=re(l);c.L_.add(4),await vl(c),c.q_.set("Unknown"),c.L_.delete(4),await hd(c)}(this))})}),this.q_=new mD(r,i)}}async function hd(t){if(Ji(t))for(const e of t.B_)await e(!0)}async function vl(t){for(const e of t.B_)await e(!1)}function oI(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ig(n)?rg(n):mo(n).r_()&&ng(n,e))}function tg(t,e){const n=re(t),r=mo(n);n.N_.delete(e),r.r_()&&aI(n,e),n.N_.size===0&&(r.r_()?r.o_():Ji(n)&&n.q_.set("Unknown"))}function ng(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(t).A_(e)}function aI(t,e){t.Q_.xe(e),mo(t).R_(e)}function rg(t){t.Q_=new y5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.q_.v_()}function ig(t){return Ji(t)&&!mo(t).n_()&&t.N_.size>0}function Ji(t){return re(t).L_.size===0}function lI(t){t.Q_=void 0}async function yD(t){t.q_.set("Online")}async function vD(t){t.N_.forEach((e,n)=>{ng(t,e)})}async function xD(t,e){lI(t),ig(t)?(t.q_.M_(e),rg(t)):t.q_.set("Unknown")}async function _D(t,e,n){if(t.q_.set("Online"),e instanceof Gb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Du?t.Q_.Ke(e):e instanceof Kb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await rI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),aI(s,l);const p=new Vr(h.target,l,c,h.sequenceNumber);ng(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!ml(e))throw e;t.L_.add(1),await vl(t),t.q_.set("Offline"),n||(n=()=>rI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hd(t)})}function uI(t,e){return e().catch(n=>bc(t,n,e))}async function fd(t){const e=re(t),n=Zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wD(e);)try{const i=await iD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ED(e,i)}catch(i){await bc(e,i)}cI(e)&&dI(e)}function wD(t){return Ji(t)&&t.O_.length<10}function ED(t,e){t.O_.push(e);const n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cI(t){return Ji(t)&&!Zr(t).n_()&&t.O_.length>0}function dI(t){Zr(t).start()}async function TD(t){Zr(t).p_()}async function bD(t){const e=Zr(t);for(const n of t.O_)e.m_(n.mutations)}async function ID(t,e,n){const r=t.O_.shift(),i=Qm.from(r,e,n);await uI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fd(t)}async function SD(t,e){e&&Zr(t).V_&&await async function(r,i){if(function(o){return p5(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();Zr(r).s_(),await uI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fd(r)}}(t,e),cI(t)&&dI(t)}async function xx(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Ji(n);n.L_.add(3),await vl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hd(n)}async function AD(t,e){const n=re(t);e?(n.L_.delete(2),await hd(n)):e||(n.L_.add(2),await vl(n),n.q_.set("Unknown"))}function mo(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new hD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yD.bind(null,t),Ro:vD.bind(null,t),mo:xD.bind(null,t),d_:_D.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ig(t)?rg(t):t.q_.set("Unknown")):(await t.K_.stop(),lI(t))})),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new fD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TD.bind(null,t),mo:SD.bind(null,t),f_:bD.bind(null,t),g_:ID.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fd(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new sg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(t,e){if(lr("AsyncQueue",`${e}: ${t}`),ml(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.W_=new Le(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class eo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new eo(e,n,Ms.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class CD{constructor(){this.queries=wx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=wx(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function wx(){return new po(t=>Db(t),od)}async function ag(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new PD,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=og(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ug(n)}async function lg(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kD(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ug(n)}function ND(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ug(t){t.Y_.forEach(e=>{e.next()})}var lp,Ex;(Ex=lp||(lp={})).ea="default",Ex.Cache="cache";class cg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.key=e}}class fI{constructor(e){this.key=e}}class RD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=Vb(e),this.Ra=new Ms(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _x,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),y=ad(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?E!==I&&(r.track({type:3,doc:y}),P=!0):this.ga(m,y)||(r.track({type:2,doc:y}),P=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(l||c)&&(a=!0)),P&&(y?(o=o.add(y),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(y,E){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(y)-I(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new eo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _x,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class jD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DD{constructor(e){this.key=e,this.va=!1}}class VD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new po(a=>Db(a),od),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(Y.comparator),this.Na=new Map,this.La=new Jm,this.Ba={},this.ka=new Map,this.qa=Zs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LD(t,e,n=!0){const r=xI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await pI(r,e,n,!0),i}async function OD(t,e){const n=xI(t);await pI(n,e,!0,!1)}async function pI(t,e,n,r){const i=await sD(t.localStore,Ln(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await MD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&oI(t.remoteStore,i),a}async function MD(t,e,n,r,i){t.Ka=(p,m,y)=>async function(I,P,_,x){let b=P.view.ma(_);b.ns&&(b=await gx(I.localStore,P.query,!1).then(({documents:T})=>P.view.ma(T,b)));const S=x&&x.targetChanges.get(P.targetId),j=x&&x.targetMismatches.get(P.targetId)!=null,D=P.view.applyChanges(b,I.isPrimaryClient,S,j);return bx(I,P.targetId,D.wa),D.snapshot}(t,p,m,y);const s=await gx(t.localStore,e,!0),o=new RD(e,s.Ts),a=o.ma(s.documents),l=yl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);bx(t,n,c.wa);const h=new jD(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FD(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!od(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ap(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tg(r.remoteStore,i.targetId),up(r,i.targetId)}).catch(pl)):(up(r,i.targetId),await ap(r.localStore,i.targetId,!0))}async function UD(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tg(n.remoteStore,r.targetId))}async function BD(t,e,n){const r=GD(t);try{const i=await function(o,a){const l=re(o),c=Ye.now(),h=a.reduce((y,E)=>y.add(E.key),ae());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=ur(),I=ae();return l.cs.getEntries(y,h).next(P=>{E=P,E.forEach((_,x)=>{x.isValidDocument()||(I=I.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(P=>{p=P;const _=[];for(const x of a){const b=u5(x,p.get(x.key).overlayedDocument);b!=null&&_.push(new li(x.key,b,Sb(b.value.mapValue),dn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,_,a)}).next(P=>{m=P;const _=P.applyToLocalDocumentSet(p,I);return l.documentOverlayCache.saveOverlays(y,P.batchId,_)})}).then(()=>({batchId:m.batchId,changes:Ob(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Le(fe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await xl(r,i.changes),await fd(r.remoteStore)}catch(i){const s=og(i,"Failed to persist write");n.reject(s)}}async function mI(t,e){const n=re(t);try{const r=await nD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ye(o.va):i.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await xl(n,r,e)}catch(r){await pl(r)}}function Tx(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(a)&&(c=!0)}),c&&ug(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zD(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Le(Y.comparator);o=o.insert(s,Tt.newNoDocument(s,ne.min()));const a=ae().add(s),l=new cd(ne.min(),new Map,new Le(fe),o,a);await mI(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),dg(r)}else await ap(r.localStore,e,!1).then(()=>up(r,e,n)).catch(pl)}async function $D(t,e){const n=re(t),r=e.batch.batchId;try{const i=await tD(n.localStore,e);yI(n,r,null),gI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xl(n,i)}catch(i){await pl(i)}}async function WD(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(ye(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);yI(r,e,n),gI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xl(r,i)}catch(i){await pl(i)}}function gI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yI(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vI(t,r)})}function vI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(tg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),dg(t))}function bx(t,e,n){for(const r of n)r instanceof hI?(t.La.addReference(r.key,e),HD(t,r)):r instanceof fI?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vI(t,r.key)):te()}function HD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),dg(t))}function dg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(be.fromString(e)),r=t.qa.next();t.Na.set(r,new DD(n)),t.Oa=t.Oa.insert(n,r),oI(t.remoteStore,new Vr(Ln(sd(n.path)),r,"TargetPurposeLimboResolution",Bm.oe))}}async function xl(t,e,n){const r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=eg.Wi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(c,m=>B.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>B.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ml(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const y=h.os.get(m),E=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,I)}}}(r.localStore,s))}async function qD(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await nI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xl(n,r.hs)}}function KD(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let i=ae();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function xI(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zD.bind(null,e),e.Ca.d_=kD.bind(null,e.eventManager),e.Ca.$a=ND.bind(null,e.eventManager),e}function GD(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WD.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eD(this.persistence,new J5,e.initialUser,this.serializer)}Ga(e){return new Q5(Zm.Zr,this.serializer)}Wa(e){return new aD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qD.bind(null,this.syncEngine),await AD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CD}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=function(s){return new dD(s)}(e.databaseInfo);return function(s,o,a,l){return new pD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Tx(this.syncEngine,n,0),function(){return vx.D()?new vx:new lD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const p=new VD(i,s,o,a,l,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await vl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=Tb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=og(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kh(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ix(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YD(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xx(e.remoteStore,i)),t._onlineComponents=e}async function YD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await kh(t,new Ic)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await kh(t,new Ic);return t._offlineComponents}async function _I(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Ix(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Ix(t,new cp))),t._onlineComponents}function XD(t){return _I(t).then(e=>e.syncEngine)}async function Sc(t){const e=await _I(t),n=e.eventManager;return n.onListen=LD.bind(null,e.syncEngine),n.onUnlisten=FD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UD.bind(null,e.syncEngine),n}function JD(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new hg({next:m=>{h.Za(),o.enqueueAndForget(()=>lg(s,p));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new cg(sd(a.path),h,{includeMetadataChanges:!0,_a:!0});return ag(s,p)}(await Sc(t),t.asyncQueue,e,n,r)),r.promise}function ZD(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new hg({next:m=>{h.Za(),o.enqueueAndForget(()=>lg(s,p)),m.fromCache&&l.source==="server"?c.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new cg(a,h,{includeMetadataChanges:!0,_a:!0});return ag(s,p)}(await Sc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eV(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ax(t){if(!Y.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Px(t){if(Y.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pd(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yj;switch(r.type){case"firstParty":return new wj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sx.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Sx.delete(n),r.terminate())}(this),Promise.resolve()}}function tV(t,e,n,r={}){var i;const s=(t=Bt(t,md))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=R2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(c)}t._authCredentials=new vj(new Eb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Gr extends ui{constructor(e,n,r){super(e,n,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Y(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function vt(t,e,...n){if(t=Xe(t),EI("collection","path",e),t instanceof md){const r=be.fromString(e,...n);return Px(r),new Gr(t,null,r)}{if(!(t instanceof It||t instanceof Gr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Px(r),new Gr(t.firestore,null,r)}}function xt(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Tb.newId()),EI("doc","path",e),t instanceof md){const r=be.fromString(e,...n);return Ax(r),new It(t,null,new Y(r))}{if(!(t instanceof It||t instanceof Gr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Ax(r),new It(t.firestore,t instanceof Gr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iI(this,"async_queue_retry"),this.Vu=()=>{const r=Ch();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ch();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ml(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw lr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=sg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Nx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class cr extends md{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new kx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kx(e),this._firestoreClient=void 0,await e}}}function nV(t,e){const n=typeof t=="object"?t:jT(),r=typeof t=="string"?t:"(default)",i=km(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=k2("firestore");s&&tV(i,...s)}return i}function gd(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rV(t),t._firestoreClient}function rV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new Dj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new QD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(dt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new to(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=/^__.*__$/;class sV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new gl(e,this.data,n,this.fieldTransforms)}}class TI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class mg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ac(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bI(this.Cu)&&iV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}Qu(e,n,r,i=!1){return new mg({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new oV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function II(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);yg("Data must be an object, but it was:",o,r);const a=SI(r,o);let l,c;if(s.merge)l=new Gt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=dp(e,p,n);if(!o.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PI(h,m)||h.push(m)}l=new Gt(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new sV(new Lt(a),l,c)}class _d extends vd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}class gg extends vd{_toFieldTransform(e){return new s5(e.path,new Ka)}isEqual(e){return e instanceof gg}}function aV(t,e,n,r){const i=t.Qu(1,e,n);yg("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();Xi(r,(l,c)=>{const h=vg(e,l,n);c=Xe(c);const p=i.Nu(h);if(c instanceof _d)s.push(h);else{const m=_l(c,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Gt(s);return new TI(o,a,i.fieldTransforms)}function lV(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[dp(e,r,n)],l=[i];if(s.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(dp(e,s[m])),l.push(s[m+1]);const c=[],h=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!PI(c,a[m])){const y=a[m];let E=l[m];E=Xe(E);const I=o.Nu(y);if(E instanceof _d)c.push(y);else{const P=_l(E,I);P!=null&&(c.push(y),h.set(y,P))}}const p=new Gt(c);return new TI(h,p,o.fieldTransforms)}function uV(t,e,n,r=!1){return _l(n,t.Qu(r?4:3,e))}function _l(t,e){if(AI(t=Xe(t)))return yg("Unsupported field value:",e,t),SI(t,e);if(t instanceof vd)return function(r,i){if(!bI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=_l(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:Tc(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tc(i.serializer,s)}}if(r instanceof fg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof to)return{bytesValue:Qb(i.serializer,r._byteString)};if(r instanceof It){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Km(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${pd(r)}`)}(t,e)}function SI(t,e){const n={};return bb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(r,i)=>{const s=_l(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function AI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof fg||t instanceof to||t instanceof It||t instanceof vd||t instanceof pg)}function yg(t,e,n){if(!AI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=pd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function dp(t,e,n){if((e=Xe(e))instanceof yd)return e._internalPath;if(typeof e=="string")return vg(t,e);throw Ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const cV=new RegExp("[~\\*/\\[\\]]");function vg(t,e,n){if(e.search(cV)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ac(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K(U.INVALID_ARGUMENT,a+t+l)}function PI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dV extends CI{data(){return super.data()}}function wd(t,e){return typeof e=="string"?vg(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class NI extends xg{}function uu(t,e,...n){let r=[];e instanceof xg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof _g).length,a=s.filter(l=>l instanceof Ed).length;if(o>1||o>0&&a>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ed extends NI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ed(e,n,r)}_apply(e){const n=this._parse(e);return RI(e._query,n),new ui(e.firestore,e.converter,tp(e._query,n))}_parse(e){const n=xd(e.firestore);return function(s,o,a,l,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jx(p,h);const y=[];for(const E of p)y.push(Rx(l,s,E));m={arrayValue:{values:y}}}else m=Rx(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jx(p,h),m=uV(a,o,p,h==="in"||h==="not-in");return qe.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hV(t,e,n){const r=e,i=wd("where",t);return Ed._create(i,r,n)}class _g extends xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _g(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)RI(o,l),o=tp(o,l)}(e._query,n),new ui(e.firestore,e.converter,tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends NI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qa(s,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function fV(t,e="asc"){const n=e,r=wd("orderBy",t);return wg._create(r,n)}function Rx(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jb(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!Y.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z0(t,new Y(r))}if(n instanceof It)return Z0(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(n)}.`)}function jx(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pV{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Be(o.doubleValue));return new pg(s)}convertGeoPoint(e){return new fg(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ye(tI(r));const i=new Wa(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DI extends CI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vu extends DI{data(e={}){return super.data(e)}}class VI{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:mV(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){t=Bt(t,It);const e=Bt(t.firestore,cr);return JD(gd(e),t._key).then(n=>LI(e,t,n))}class Eg extends pV{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function Vx(t){t=Bt(t,ui);const e=Bt(t.firestore,cr),n=gd(e),r=new Eg(e);return kI(t._query),ZD(n,t._query).then(i=>new VI(e,r,t,i))}function gV(t,e,n){t=Bt(t,It);const r=Bt(t.firestore,cr),i=jI(t.converter,e);return Td(r,[II(xd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dn.none())])}function wr(t,e,n,...r){t=Bt(t,It);const i=Bt(t.firestore,cr),s=xd(i);let o;return o=typeof(e=Xe(e))=="string"||e instanceof yd?lV(s,"updateDoc",t._key,e,n,r):aV(s,"updateDoc",t._key,e),Td(i,[o.toMutation(t._key,dn.exists(!0))])}function cu(t){return Td(Bt(t.firestore,cr),[new Gm(t._key,dn.none())])}function vi(t,e){const n=Bt(t.firestore,cr),r=xt(t),i=jI(t.converter,e);return Td(n,[II(xd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function ss(t,...e){var n,r,i;t=Xe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nx(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Nx(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,h;if(t instanceof It)c=Bt(t.firestore,cr),h=sd(t._key.path),l={next:p=>{e[o]&&e[o](LI(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Bt(t,ui);c=Bt(p.firestore,cr),h=p._query;const m=new Eg(c);l={next:y=>{e[o]&&e[o](new VI(c,m,p,y))},error:e[o+1],complete:e[o+2]},kI(t._query)}return function(m,y,E,I){const P=new hg(I),_=new cg(y,P,E);return m.asyncQueue.enqueueAndForget(async()=>ag(await Sc(m),_)),()=>{P.Za(),m.asyncQueue.enqueueAndForget(async()=>lg(await Sc(m),_))}}(gd(c),h,a,l)}function Td(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget(async()=>BD(await XD(r),i,s)),s.promise}(gd(t),e)}function LI(t,e,n){const r=n.docs.get(e._key),i=new Eg(t);return new DI(t,i,e._key,r,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}function rt(){return new gg("serverTimestamp")}(function(e,n=!0){(function(i){ho=i})(uo),Gs(new Ui("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new cr(new xj(r.getProvider("auth-internal")),new Tj(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kr(G0,"4.7.3",e),Kr(G0,"4.7.3","esm2017")})();const Fs={apiKey:"AIzaSyChItXpa02_QJXSJV3ohKjUNNi8xdW8Unw",authDomain:"budget-6378f.firebaseapp.com",projectId:"budget-6378f",storageBucket:"budget-6378f.firebasestorage.app",messagingSenderId:"267770745885",appId:"1:267770745885:web:a15384f0d1782c4c3222f4"};console.log("🔧 Initializing Firebase...");console.log("Config check:",{hasApiKey:!!Fs.apiKey,hasProjectId:!!Fs.projectId,projectId:Fs.projectId});if(!Fs.apiKey||!Fs.projectId)throw console.error("❌ Firebase configuration is incomplete. Please check your firebaseConfig."),new Error("Firebase configuration is incomplete");let Lu,Es,me;try{console.log("🚀 Creating Firebase app..."),Lu=RT(Fs),console.log("🔐 Initializing Auth..."),Es=mj(Lu),console.log("🗄️ Initializing Firestore..."),me=nV(Lu),console.log("✅ Firebase initialized successfully")}catch(t){throw console.error("❌ Firebase initialization error:",t),t.code==="auth/network-request-failed"?console.error("🚫 Network error - check your internet connection"):t.code==="auth/app-not-authorized"&&console.error("🚫 App not authorized - check Firebase config"),new Error(`Failed to initialize Firebase: ${t.message}`)}const yV=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Lu},get auth(){return Es},get db(){return me}},Symbol.toStringTag,{value:"Module"})),OI=N.createContext(null);function vV({children:t}){console.log("🔐 AuthProvider initializing...");const[e,n]=N.useState(null),[r,i]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>{console.log("🔐 Setting up auth state listener...");try{const p=rR(Es,m=>{console.log("🔐 Auth state changed:",m?`User: ${m.email}`:"No user"),n(m),i(!1),o(null)},m=>{console.error("❌ Auth state change error:",m),o(m.message),i(!1)});return()=>{console.log("🔐 Cleaning up auth listener"),p()}}catch(p){console.error("❌ Auth initialization error:",p),o("Ошибка инициализации аутентификации"),i(!1)}},[]);const a=async(p,m)=>{try{return o(null),await eR(Es,p,m)}catch(y){throw o(y.message),y}},l=async(p,m)=>{try{return o(null),await ZN(Es,p,m)}catch(y){throw o(y.message),y}},c=async()=>{try{return o(null),localStorage.clear(),await iR(Es)}catch(p){throw o(p.message),p}};if(s)return d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"card p-8 max-w-md text-center space-y-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"Ошибка подключения"}),d.jsx("p",{className:"text-zinc-400",children:s}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Попробовать снова"})]})});const h={user:e,loading:r,error:s,login:a,register:l,logout:c};return d.jsx(OI.Provider,{value:h,children:t})}function Bn(){return N.useContext(OI)}const MI=N.createContext(null);function xV({children:t}){const{user:e}=Bn(),[n,r]=N.useState(localStorage.getItem("budgetId")||null),[i,s]=N.useState(localStorage.getItem("budgetCode")||""),[o,a]=N.useState([]),[l,c]=N.useState([]),[h,p]=N.useState([]),[m,y]=N.useState([]);N.useEffect(()=>{if(!e||!n)return;const F=o.find(hi=>hi.userId===e.uid);if(!F)return;let O=0;const W=3e5;let se=!0;const $e=async(hi=!1)=>{const mr=Date.now();if(!(!hi&&mr-O<W))try{const fi=xt(me,"budgets",n,"profiles",F.id);se&&(await wr(fi,{online:!0,lastSeen:rt(),...O===0?{lastLogin:rt()}:{}}),O=mr)}catch(fi){console.error("Failed to update online status:",fi)}};$e(!0);const Pe=()=>{console.log("🟢 Пользователь онлайн"),se=!0,$e(!0)},ke=async()=>{if(console.log("🔴 Пользователь оффлайн"),se=!1,F){const hi=xt(me,"budgets",n,"profiles",F.id);try{await wr(hi,{online:!1,lastSeen:rt()})}catch(mr){console.error("Error updating offline status:",mr)}}};window.addEventListener("online",Pe),window.addEventListener("offline",ke);const di=setInterval(()=>{se&&$e()},W);let An;const rn=()=>{clearTimeout(An),An=setTimeout(ke,5e3)};return window.addEventListener("beforeunload",rn),()=>{window.removeEventListener("online",Pe),window.removeEventListener("offline",ke),window.removeEventListener("beforeunload",rn),clearInterval(di),clearTimeout(An),window.closed&&ke()}},[e,n,o]);const[E,I]=N.useState(localStorage.getItem("currency")||"PLN"),[P,_]=N.useState(localStorage.getItem("theme")||"dark"),[x,b]=N.useState({PLN:1,USD:.25,UAH:10.5});N.useEffect(()=>{document.documentElement.classList.toggle("dark",P==="dark"),localStorage.setItem("theme",P)},[P]);const S=()=>_(F=>F==="dark"?"light":"dark");N.useEffect(()=>{localStorage.setItem("currency",E)},[E]),N.useEffect(()=>{console.log("💱 Using default exchange rates (external API disabled)")},[]),N.useEffect(()=>{if(!e||!n)return;console.log("Loading budget data...");const F=ss(uu(vt(me,"budgets",n,"profiles")),W=>{const se=W.docs.map($e=>({id:$e.id,...$e.data()}));console.log("Profiles loaded:",se.length),a(se)},W=>console.error("Error loading profiles:",W)),O=ss(uu(vt(me,"budgets",n,"categories")),W=>{const se=W.docs.map($e=>({id:$e.id,...$e.data()}));console.log("Categories loaded:",se.length),c(se)},W=>console.error("Error loading categories:",W));return()=>{F(),O()}},[e,n]),N.useEffect(()=>{if(!e||!n)return;(async()=>{try{const O=xt(me,"budgets",n);if(!(await Dx(O)).exists()){console.error("Budget not found"),localStorage.removeItem("budgetId"),localStorage.removeItem("budgetCode"),r(null),s("");return}const se=vt(me,"budgets",n,"profiles");if(!(await Vx(se)).docs.some(ke=>ke.data().userId===e.uid)){console.error("User has no access to this budget"),localStorage.removeItem("budgetId"),localStorage.removeItem("budgetCode"),r(null),s("");return}}catch(O){console.error("Error checking budget access:",O);return}})();try{const O=ss(vt(me,"budgets",n,"profiles"),Pe=>{a(Pe.docs.map(ke=>({id:ke.id,...ke.data()})))},Pe=>console.error("Profiles subscription error:",Pe)),W=ss(vt(me,"budgets",n,"categories"),Pe=>{c(Pe.docs.map(ke=>({id:ke.id,...ke.data()})))},Pe=>console.error("Categories subscription error:",Pe)),se=ss(vt(me,"budgets",n,"goals"),Pe=>{p(Pe.docs.map(ke=>({id:ke.id,...ke.data()})))},Pe=>console.error("Goals subscription error:",Pe)),$e=ss(uu(vt(me,"budgets",n,"operations"),fV("date","desc")),Pe=>y(Pe.docs.map(ke=>({id:ke.id,...ke.data()}))),Pe=>console.error("Operations subscription error:",Pe));return()=>{O(),W(),se(),$e()}}catch(O){console.error("Subscription setup error:",O)}},[e,n]);const j=N.useMemo(()=>{const F={};return o.forEach(O=>{F[O.id]=0}),m.forEach(O=>{const W=Number(O.amount||0);O.type==="income"&&O.profileId&&(F[O.profileId]+=W),O.type==="expense"&&O.profileId&&(F[O.profileId]-=W),O.type==="transfer"&&O.fromProfileId&&O.toProfileId&&(F[O.fromProfileId]-=W,F[O.toProfileId]+=W),O.type==="goal"&&O.profileId&&(F[O.profileId]-=W)}),F},[m,o]),D=N.useMemo(()=>{let F=0,O=0;return m.forEach(W=>{const se=Number(W.amount||0);W.type==="income"&&(F+=se),(W.type==="expense"||W.type==="goal")&&(O+=se)}),{income:F,expense:O,balance:F-O}},[m]),T=N.useMemo(()=>{const F={};return o.forEach(O=>F[O.id]={income:0,expense:0,balance:0}),m.forEach(O=>{const W=Number(O.amount||0);O.type==="income"&&O.profileId&&(F[O.profileId].income+=W,F[O.profileId].balance+=W),O.type==="expense"&&O.profileId&&(F[O.profileId].expense+=W,F[O.profileId].balance-=W),O.type==="transfer"&&O.fromProfileId&&O.toProfileId&&(F[O.fromProfileId].expense+=W,F[O.fromProfileId].balance-=W,F[O.toProfileId].income+=W,F[O.toProfileId].balance+=W),O.type==="goal"&&O.profileId&&(F[O.profileId].expense+=W,F[O.profileId].balance-=W)}),F},[m,o]),v=N.useMemo(()=>{const F={};return m.forEach(O=>{O.type==="expense"&&O.categoryId&&(F[O.categoryId]=(F[O.categoryId]||0)+Number(O.amount||0))}),F},[m]),A=N.useMemo(()=>{const F={};return m.forEach(O=>{O.type==="goal"&&O.goalId&&(F[O.goalId]=(F[O.goalId]||0)+Number(O.amount||0))}),F},[m]);function k(F){return A[F]||0}async function R(F,O){if(n)try{const W=xt(me,"budgets",n,"goals",F);await wr(W,{...O,updatedAt:rt()})}catch(W){throw console.error("Error editing goal:",W),W}}async function V(F){if(n)try{const O=xt(me,"budgets",n,"goals",F);await cu(O)}catch(O){throw console.error("Error deleting goal:",O),O}}function C(F){const O=x[E]||1;return Number(F)*O}function Ae(F=6){const O="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let W="";for(let se=0;se<F;se++)W+=O[Math.floor(Math.random()*O.length)];return W}async function tn(){try{if(!e)throw new Error("Необходима авторизация");const F=Ae(6),O=xt(vt(me,"budgets"));console.log("Creating budget...",{userId:e.uid,budgetId:O.id}),await gV(O,{owner:e.uid,createdAt:rt(),currency:"PLN",code:F,members:{[e.uid]:!0}}),console.log("Budget created, creating profile..."),await vi(vt(O,"profiles"),{name:e.email.split("@")[0],userId:e.uid,createdAt:rt(),online:!0,lastSeen:rt(),lastLogin:rt()}),console.log("Profile created, creating categories...");const W=[{name:"Зарплата",emoji:"💰",type:"income",limit:0},{name:"Фриланс",emoji:"💻",type:"income",limit:0},{name:"Подарки",emoji:"🎁",type:"income",limit:0},{name:"Еда",emoji:"🍕",type:"expense",limit:0},{name:"Транспорт",emoji:"🚗",type:"expense",limit:0},{name:"Развлечения",emoji:"🎮",type:"expense",limit:0},{name:"Покупки",emoji:"🛒",type:"expense",limit:0},{name:"Здоровье",emoji:"🏥",type:"expense",limit:0},{name:"Прочее",emoji:"📝",type:"both",limit:0}];for(const se of W)await vi(vt(O,"categories"),{...se,createdAt:rt()});return console.log("Categories created, saving budget ID..."),r(O.id),s(F),localStorage.setItem("budgetId",O.id),localStorage.setItem("budgetCode",F),console.log("Budget creation completed successfully"),O.id}catch(F){throw console.error("Error creating budget:",F),F}}async function zt(F){var Pe,ke,di,An;const O=(F||"").trim();if(!O)throw new Error("Пустой ID/код бюджета");const W=await Dx(xt(me,"budgets",O));if(W.exists())return r(W.id),s(((Pe=W.data())==null?void 0:Pe.code)||""),localStorage.setItem("budgetId",W.id),(ke=W.data())!=null&&ke.code&&localStorage.setItem("budgetCode",W.data().code),W.id;const se=uu(vt(me,"budgets"),hV("code","==",O.toUpperCase())),$e=await Vx(se);if(!$e.empty){const rn=$e.docs[0];return r(rn.id),s(((di=rn.data())==null?void 0:di.code)||""),localStorage.setItem("budgetId",rn.id),(An=rn.data())!=null&&An.code&&localStorage.setItem("budgetCode",rn.data().code),rn.id}throw new Error("Бюджет не найден")}async function ue(F){if(!n)throw new Error("Нет активного бюджета");const O=(F||"").toUpperCase().replace(/\\s+/g,"");if(!O||O.length<4)throw new Error("Код слишком короткий");await wr(xt(me,"budgets",n),{code:O}),s(O),localStorage.setItem("budgetCode",O)}async function $(F){const O={name:F.name,emoji:F.emoji||"📂",limit:F.limit?Number(F.limit):0,createdAt:rt()};await vi(vt(me,"budgets",n,"categories"),O)}async function X(F,O){const W={};O.name!==void 0&&(W.name=O.name),O.emoji!==void 0&&(W.emoji=O.emoji),O.limit!==void 0&&(W.limit=Number(O.limit)||0),await wr(xt(me,"budgets",n,"categories",F),W)}async function Z(F){await cu(xt(me,"budgets",n,"categories",F))}async function ve(F,O){await wr(xt(me,"budgets",n,"categories",F),{limit:Number(O)||0})}async function pe(F){const O={name:F.name,emoji:F.emoji||"🎯",amount:Number(F.amount||F.target||0),deadline:F.deadline||"",createdAt:rt()};await vi(vt(me,"budgets",n,"goals"),O)}async function we(F,O,W,se=""){await vi(vt(me,"budgets",n,"operations"),{type:"goal",goalId:F,profileId:O,amount:Number(W),note:se,date:new Date().toISOString(),createdBy:(e==null?void 0:e.uid)||null,createdAt:rt()})}async function $t(F){await vi(vt(me,"budgets",n,"operations"),{...F,amount:Number(F.amount),date:F.date||new Date().toISOString(),createdBy:(e==null?void 0:e.uid)||null,createdAt:rt()})}async function Wt(F){await cu(xt(me,"budgets",n,"operations",F))}const Je=()=>{if(!e)return null;let F=o.find(W=>W.userId===e.uid);if(F)return F;console.log("🔍 Profile not found for user:",e.uid,e.email);const O=o.find(W=>!W.userId);return O?(console.log("🎯 Found unclaimed profile:",O.name),Dt(O.id,e.uid),{...O,userId:e.uid}):(console.log("➕ Creating new profile for user"),null)};async function Dt(F,O){try{await wr(xt(me,"budgets",n,"profiles",F),{userId:O,lastLogin:rt()}),console.log(`✅ Profile ${F} assigned to user ${O}`)}catch(W){console.error("❌ Failed to assign profile:",W)}}async function vo(F=null){var O;if(!e||!n)return null;try{const W=F||((O=e.email)==null?void 0:O.split("@")[0])||"Новый пользователь",se={name:W,userId:e.uid,createdAt:rt(),lastLogin:rt(),online:!1,lastSeen:null},$e=await vi(vt(me,"budgets",n,"profiles"),se);return console.log(`✅ Created new profile: ${W} for user ${e.uid}`),{id:$e.id,...se}}catch(W){return console.error("❌ Failed to create profile:",W),null}}async function xo(F,O,W="desktop"){try{await wr(xt(me,"budgets",n,"profiles",F),{online:O,deviceType:W,lastSeen:rt(),userId:(e==null?void 0:e.uid)||null}),console.log(`🟢 Profile ${F} status: ${O?"online":"offline"} on ${W}`)}catch(se){console.error("❌ Failed to update online status:",se)}}async function q(){if(!n||!e)return console.error("❌ Cannot leave family: no budget or user"),!1;try{const F=Je();return F?(await cu(xt(me,"budgets",n,"profiles",F.id)),r(null),s(""),localStorage.removeItem("budgetId"),localStorage.removeItem("budgetCode"),a([]),c([]),p([]),y([]),console.log("✅ Successfully left family"),!0):(console.error("❌ Cannot leave family: profile not found"),!1)}catch(F){return console.error("❌ Failed to leave family:",F),!1}}const nn={budgetId:n,setBudgetId:r,budgetCode:i,updateBudgetCode:ue,createBudget:tn,joinBudget:zt,leaveFamily:q,profiles:o,categories:l,goals:h,operations:m,getCurrentUserProfile:Je,assignProfileToUser:Dt,createProfileForUser:vo,addCategory:$,updateCategory:X,deleteCategory:Z,setLimitForCategory:ve,addGoal:pe,editGoal:R,deleteGoal:V,contributeToGoal:we,getGoalSaved:k,addOperation:$t,deleteOperation:Wt,balances:j,totals:D,totalsByProfile:T,spentByCategory:v,savedByGoal:A,currency:E,setCurrency:I,theme:P,setTheme:_,toggleTheme:S,rates:x,convert:C,setOnlineStatus:xo};return d.jsx(MI.Provider,{value:nn,children:t})}function Sn(){return N.useContext(MI)}function _V(){var m,y,E;const{user:t,logout:e}=Bn(),{budgetId:n,theme:r,toggleTheme:i}=Sn(),[s,o]=N.useState(!1),a=al(),l=Qi(),c=l.pathname==="/login"||l.pathname==="/register";N.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const h=async()=>{try{await e(),a("/login")}catch(I){console.error("Logout error:",I)}},p=[{to:"/",label:"Главная"},{to:"/categories",label:"Категории"},{to:"/limits",label:"Лимиты"},{to:"/goals",label:"Цели"},{to:"/operations",label:"Операции"},{to:"/budget",label:"Семья"},{to:"/settings",label:"Настройки"}];return d.jsxs(d.Fragment,{children:[d.jsx("header",{className:"sticky top-0 z-[100] transition-all duration-300",style:{background:`
          linear-gradient(to bottom, 
            rgba(10, 10, 15, 0.95) 0%, 
            rgba(10, 10, 15, 0.8) 100%
          )
        `,backdropFilter:"blur(20px) saturate(150%)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsxs("div",{className:"container-custom flex items-center justify-between py-4",children:[d.jsxs(Ds,{to:"/",className:"flex items-center gap-3 text-xl font-bold group",children:[d.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-primary flex items-center justify-center text-white shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-300",children:"💸"}),d.jsx("span",{className:"hidden sm:inline bg-gradient-primary bg-clip-text text-transparent group-hover:scale-105 transition-transform duration-300",children:"Budget Buddy"})]}),!c&&d.jsx("nav",{className:"hidden lg:flex items-center gap-2 p-2 rounded-2xl bg-white/5 backdrop-blur-lg border border-white/10",children:p.map(I=>d.jsxs(g0,{to:I.to,className:({isActive:P})=>`relative h-10 flex items-center px-4 rounded-xl font-medium transition-all duration-300 ${P?"text-white bg-gradient-to-r from-indigo-500/30 to-purple-500/30 shadow-lg shadow-indigo-500/20":"text-zinc-400 hover:text-white hover:bg-white/5"}`,children:[d.jsx("span",{className:"relative z-10",children:I.label}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]},I.to))}),d.jsxs("div",{className:"flex items-center gap-3",children:[t&&n&&!c&&d.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-2 rounded-xl text-sm",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),d.jsx("span",{className:"text-zinc-400",children:"Семья:"}),d.jsx("span",{className:"text-white font-medium",children:n.slice(-6)})]}),!c&&d.jsx("button",{onClick:i,className:"hidden md:flex h-10 w-10 items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group bg-white/5 backdrop-blur-lg border border-white/10",children:d.jsx("span",{className:"text-lg group-hover:rotate-180 transition-transform duration-500 block",children:r==="dark"?"☀️":"🌙"})}),t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"hidden md:flex items-center h-10 gap-3 px-4 rounded-xl hover:scale-105 transition-all duration-300 group cursor-pointer bg-white/5 backdrop-blur-lg border border-white/10",children:[d.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-primary flex items-center justify-center text-white text-sm font-bold shadow-lg group-hover:rotate-12 transition-transform duration-300",children:(m=t.email)==null?void 0:m.charAt(0).toUpperCase()}),d.jsx("span",{className:"text-sm text-zinc-300 max-w-32 truncate",children:t.email})]}),d.jsx("button",{onClick:h,className:"hidden md:flex h-10 w-10 items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group hover:bg-red-500/20 bg-white/5 backdrop-blur-lg border border-white/10",title:"Выйти",children:d.jsx("span",{className:"text-lg group-hover:rotate-12 transition-transform duration-300 block",children:"🚪"})})]}):!c&&d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ds,{to:"/login",className:"px-4 py-2 rounded-xl font-medium text-zinc-300 hover:text-white transition-all duration-300 hover:scale-105",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Войти"}),d.jsx(Ds,{to:"/register",className:"px-4 py-2 rounded-xl font-medium text-white transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"},children:"Регистрация"})]}),!c&&d.jsx("button",{onClick:()=>o(!s),className:"lg:hidden h-10 w-10 flex items-center justify-center rounded-xl hover:scale-110 transition-all duration-300 group bg-white/5 backdrop-blur-lg border border-white/10",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsx("span",{className:"text-lg group-hover:rotate-180 transition-transform duration-300 block",children:s?"✕":"☰"})})]})]})}),s&&!c&&hT.createPortal(d.jsxs("div",{className:"lg:hidden fixed inset-0 z-[9999]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md",onClick:()=>o(!1)}),d.jsx("div",{className:"absolute top-0 right-0 w-80 h-full overflow-y-auto",style:{background:`
              linear-gradient(to bottom, 
                rgba(10, 10, 15, 0.98) 0%, 
                rgba(25, 25, 35, 0.95) 100%
              )
            `,backdropFilter:"blur(30px) saturate(150%)",borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-primary flex items-center justify-center text-white",children:"💸"}),d.jsx("h3",{className:"text-lg font-semibold bg-gradient-primary bg-clip-text text-transparent",children:"Budget Buddy"})]}),d.jsx("button",{onClick:()=>o(!1),className:"p-2 rounded-xl hover:scale-110 transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:d.jsx("span",{className:"text-lg",children:"✕"})})]}),t&&d.jsxs("div",{className:"p-4 rounded-2xl",style:{background:`
                    linear-gradient(135deg, 
                      rgba(255, 255, 255, 0.1) 0%, 
                      rgba(255, 255, 255, 0.05) 100%
                    )
                  `,backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg shadow-lg",children:(y=t.email)==null?void 0:y.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-white text-sm",children:t.email}),d.jsx("div",{className:"text-xs text-zinc-400",children:"Активный пользователь"})]})]}),n&&d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),d.jsx("span",{className:"text-zinc-400",children:"Семья:"}),d.jsx("span",{className:"text-white font-medium",children:n.slice(-6)})]})]}),d.jsxs("nav",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs uppercase tracking-wider text-zinc-500 font-medium px-2",children:"Навигация"}),p.map((I,P)=>d.jsxs(g0,{to:I.to,onClick:()=>o(!1),className:({isActive:_})=>`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 group relative overflow-hidden ${_?"text-white":"text-zinc-400 hover:text-white"}`,style:({isActive:_})=>_?{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3))",backdropFilter:"blur(15px)",border:"1px solid rgba(99, 102, 241, 0.3)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.2)"}:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsxs("span",{className:"relative z-10 text-lg",children:[I.to==="/"&&"🏠",I.to==="/categories"&&"📂",I.to==="/limits"&&"💰",I.to==="/goals"&&"🎯",I.to==="/operations"&&"💱",I.to==="/budget"&&"👨‍👩‍👧‍👦",I.to==="/settings"&&"⚙️"]}),d.jsx("span",{className:"relative z-10",children:I.label}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]},I.to))]}),t&&d.jsx("div",{className:"pt-4 border-t border-white/10",children:d.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-primary flex items-center justify-center text-white font-bold shadow-lg",children:(E=t.email)==null?void 0:E.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white font-medium",children:t.email}),d.jsx("span",{className:"text-sm text-zinc-400",children:"Онлайн"})]})]})})]})})]}),document.body)]})}function FI({text:t="Загрузка..."}){return d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),d.jsx("p",{className:"text-zinc-400",children:t})]})})}const Ke=(t,e,n="sine",r=.1)=>{const i=new(window.AudioContext||window.webkitAudioContext),s=i.createOscillator(),o=i.createGain();s.connect(o),o.connect(i.destination),s.frequency.setValueAtTime(t,i.currentTime),s.type=n,o.gain.setValueAtTime(0,i.currentTime),o.gain.linearRampToValueAtTime(r,i.currentTime+.01),o.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),s.start(i.currentTime),s.stop(i.currentTime+e)},Lx={success:()=>{Ke(523.25,.15,"sine",.08),setTimeout(()=>Ke(659.25,.15,"sine",.06),50),setTimeout(()=>Ke(783.99,.2,"sine",.04),100)},add:()=>{Ke(440,.1,"sine",.06),setTimeout(()=>Ke(554.37,.1,"sine",.04),80)},delete:()=>{Ke(554.37,.1,"square",.05),setTimeout(()=>Ke(440,.15,"square",.03),80)},error:()=>{Ke(220,.2,"sawtooth",.04),Ke(233.08,.2,"sawtooth",.04)},click:()=>{Ke(800,.05,"sine",.03)},notification:()=>{Ke(523.25,.1,"sine",.04),setTimeout(()=>Ke(659.25,.1,"sine",.03),100)},coin:()=>{Ke(659.25,.08,"sine",.06),setTimeout(()=>Ke(783.99,.08,"sine",.04),40),setTimeout(()=>Ke(1046.5,.12,"sine",.03),80)},goal:()=>{Ke(523.25,.1,"sine",.05),setTimeout(()=>Ke(659.25,.1,"sine",.05),60),setTimeout(()=>Ke(783.99,.1,"sine",.05),120),setTimeout(()=>Ke(1046.5,.2,"sine",.04),180)}},bd=()=>({playSound:N.useCallback(e=>{if(localStorage.getItem("soundEnabled")!=="false")try{Lx[e]&&Lx[e]()}catch(r){console.warn("Не удалось воспроизвести звук:",r)}},[])});function wV(){const{profiles:t,assignProfileToUser:e,createProfileForUser:n}=Sn(),{user:r}=Bn(),{playSound:i}=bd(),[s,o]=N.useState(!1),[a,l]=N.useState(""),c=t.filter(m=>!m.userId),h=async m=>{try{i("click"),await e(m,r.uid),i("success")}catch(y){console.error("Error assigning profile:",y),i("error")}},p=async()=>{if(!a.trim()){i("error");return}try{i("click"),await n(a.trim()),i("success"),o(!1),l("")}catch(m){console.error("Error creating profile:",m),i("error")}};return d.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full p-8 rounded-3xl",style:{background:`
            linear-gradient(145deg, 
              rgba(255, 255, 255, 0.1) 0%, 
              rgba(255, 255, 255, 0.05) 100%
            )
          `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"text-4xl mb-4",children:"👤"}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Выберите профиль"}),d.jsx("p",{className:"text-zinc-400",children:"Привяжите свой аккаунт к профилю в семье"})]}),c.length>0&&d.jsxs("div",{className:"space-y-3 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Доступные профили:"}),c.map(m=>d.jsx("button",{onClick:()=>h(m.id),className:"w-full p-4 rounded-xl text-left transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1))",border:"1px solid rgba(59, 130, 246, 0.2)"},children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:m.name.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-white font-medium",children:m.name}),m.online&&d.jsx("div",{className:"flex items-center",children:d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})})]}),d.jsx("div",{className:"text-sm text-zinc-400",children:m.lastSeen?m.online?"Онлайн":`Был(а) в сети ${new Date(m.lastSeen.toDate()).toLocaleString()}`:"Нажмите, чтобы выбрать"})]})]})},m.id)),d.jsx("div",{className:"text-center py-2",children:d.jsx("div",{className:"text-zinc-500",children:"или"})})]}),s?d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"text",value:a,onChange:m=>l(m.target.value),placeholder:"Введите имя профиля",className:"w-full p-4 rounded-xl bg-black/20 border border-white/10 text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyPress:m=>m.key==="Enter"&&p()}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:p,disabled:!a.trim(),className:"flex-1 p-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Создать"}),d.jsx("button",{onClick:()=>{o(!1),l("")},className:"flex-1 p-3 rounded-xl bg-zinc-700 hover:bg-zinc-600 text-white font-medium transition-colors",children:"Отмена"})]})]}):d.jsx("button",{onClick:()=>o(!0),className:"w-full p-4 rounded-xl transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1))",border:"1px solid rgba(34, 197, 94, 0.2)"},children:d.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[d.jsx("span",{className:"text-xl",children:"➕"}),d.jsx("span",{className:"font-medium",children:"Создать новый профиль"})]})})]})})}function EV({children:t}){const{user:e}=Bn(),{profiles:n,budgetId:r,getCurrentUserProfile:i}=Sn();return!e||!r?t:!n||n.length===0?d.jsx(FI,{text:"Загрузка профилей..."}):i()?t:d.jsx(wV,{})}const Tg=N.createContext({});function bg(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const Id=N.createContext(null),Ig=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class TV extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bV({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),i=N.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=N.useContext(Ig);return N.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),d.jsx(TV,{isPresent:e,childRef:r,sizeRef:i,children:N.cloneElement(t,{ref:r})})}const IV=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=bg(SV),l=N.useId(),c=N.useCallback(p=>{a.set(p,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),h=N.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),c]:[n,c]);return N.useMemo(()=>{a.forEach((p,m)=>a.set(m,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(bV,{isPresent:n,children:t})),d.jsx(Id.Provider,{value:h,children:t})};function SV(){return new Map}function UI(t=!0){const e=N.useContext(Id);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{t&&i(s)},[t]);const o=N.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const du=t=>t.key||"";function Ox(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const Sg=typeof window<"u",BI=Sg?N.useLayoutEffect:N.useEffect,Ya=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=UI(o),c=N.useMemo(()=>Ox(t),[t]),h=o&&!a?[]:c.map(du),p=N.useRef(!0),m=N.useRef(c),y=bg(()=>new Map),[E,I]=N.useState(c),[P,_]=N.useState(c);BI(()=>{p.current=!1,m.current=c;for(let S=0;S<P.length;S++){const j=du(P[S]);h.includes(j)?y.delete(j):y.get(j)!==!0&&y.set(j,!1)}},[P,h.length,h.join("-")]);const x=[];if(c!==E){let S=[...c];for(let j=0;j<P.length;j++){const D=P[j],T=du(D);h.includes(T)||(S.splice(j,0,D),x.push(D))}s==="wait"&&x.length&&(S=x),_(Ox(S)),I(c);return}const{forceRender:b}=N.useContext(Tg);return d.jsx(d.Fragment,{children:P.map(S=>{const j=du(S),D=o&&!a?!1:c===P||h.includes(j),T=()=>{if(y.has(j))y.set(j,!0);else return;let v=!0;y.forEach(A=>{A||(v=!1)}),v&&(b==null||b(),_(m.current),o&&(l==null||l()),r&&r())};return d.jsx(IV,{isPresent:D,initial:!p.current||n?void 0:!1,custom:D?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:D?void 0:T,children:S},j)})})},Yt=t=>t;let zI=Yt;function Ag(t){let e;return()=>(e===void 0&&(e=t()),e)}const no=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},er=t=>t*1e3,tr=t=>t/1e3,AV={useManualTiming:!1};function PV(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,p=!1)=>{const y=p&&r?e:n;return h&&s.add(c),y.has(c)||y.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const hu=["read","resolveKeyframes","update","preRender","render","postRender"],CV=40;function $I(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=hu.reduce((_,x)=>(_[x]=PV(s),_),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:p,postRender:m}=o,y=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,CV),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},E=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:hu.reduce((_,x)=>{const b=o[x];return _[x]=(S,j=!1,D=!1)=>(n||E(),b.schedule(S,j,D)),_},{}),cancel:_=>{for(let x=0;x<hu.length;x++)o[hu[x]].cancel(_)},state:i,steps:o}}const{schedule:Se,cancel:ei,state:st,steps:Nh}=$I(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yt,!0),WI=N.createContext({strict:!1}),Mx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ro={};for(const t in Mx)ro[t]={isEnabled:e=>Mx[t].some(n=>!!e[n])};function kV(t){for(const e in t)ro[e]={...ro[e],...t[e]}}const NV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||NV.has(t)}let HI=t=>!Pc(t);function RV(t){t&&(HI=e=>e.startsWith("on")?!Pc(e):t(e))}try{RV(require("@emotion/is-prop-valid").default)}catch{}function jV(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(HI(i)||n===!0&&Pc(i)||!e&&!Pc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function DV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Sd=N.createContext({});function Xa(t){return typeof t=="string"||Array.isArray(t)}function Ad(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Pg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cg=["initial",...Pg];function Pd(t){return Ad(t.animate)||Cg.some(e=>Xa(t[e]))}function qI(t){return!!(Pd(t)||t.variants)}function VV(t,e){if(Pd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Xa(n)?n:void 0,animate:Xa(r)?r:void 0}}return t.inherit!==!1?e:{}}function LV(t){const{initial:e,animate:n}=VV(t,N.useContext(Sd));return N.useMemo(()=>({initial:e,animate:n}),[Fx(e),Fx(n)])}function Fx(t){return Array.isArray(t)?t.join(" "):t}const OV=Symbol.for("motionComponentSymbol");function Ts(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function MV(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ts(n)&&(n.current=r))},[e])}const kg=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FV="framerAppearId",KI="data-"+kg(FV),{schedule:Ng}=$I(queueMicrotask,!1),GI=N.createContext({});function UV(t,e,n,r,i){var s,o;const{visualElement:a}=N.useContext(Sd),l=N.useContext(WI),c=N.useContext(Id),h=N.useContext(Ig).reducedMotion,p=N.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=p.current,y=N.useContext(GI);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&BV(p.current,n,i,y);const E=N.useRef(!1);N.useInsertionEffect(()=>{m&&E.current&&m.update(n,c)});const I=n[KI],P=N.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,I)));return BI(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Ng.render(m.render),P.current&&m.animationState&&m.animationState.animateChanges())}),N.useEffect(()=>{m&&(!P.current&&m.animationState&&m.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,I)}),P.current=!1))}),m}function BV(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:QI(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ts(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function QI(t){if(t)return t.options.allowProjection!==!1?t.projection:QI(t.parent)}function zV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&kV(t);function a(c,h){let p;const m={...N.useContext(Ig),...c,layoutId:$V(c)},{isStatic:y}=m,E=LV(c),I=r(c,y);if(!y&&Sg){WV();const P=HV(m);p=P.MeasureLayout,E.visualElement=UV(i,I,m,e,P.ProjectionNode)}return d.jsxs(Sd.Provider,{value:E,children:[p&&E.visualElement?d.jsx(p,{visualElement:E.visualElement,...m}):null,n(i,c,MV(I,E.visualElement,h),I,y,E.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[OV]=i,l}function $V({layoutId:t}){const e=N.useContext(Tg).id;return e&&t!==void 0?e+"-"+t:t}function WV(t,e){N.useContext(WI).strict}function HV(t){const{drag:e,layout:n}=ro;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const qV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rg(t){return typeof t!="string"||t.includes("-")?!1:!!(qV.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ux(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function jg(t,e,n,r){if(typeof e=="function"){const[i,s]=Ux(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Ux(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const hp=t=>Array.isArray(t),KV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),GV=t=>hp(t)?t[t.length-1]||0:t,bt=t=>!!(t&&t.getVelocity);function Ou(t){const e=bt(t)?t.get():t;return KV(e)?e.toValue():e}function QV({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:YV(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const YI=t=>(e,n)=>{const r=N.useContext(Sd),i=N.useContext(Id),s=()=>QV(t,e,r,i);return n?s():bg(s)};function YV(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Ou(s[m]);let{initial:o,animate:a}=t;const l=Pd(t),c=qI(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?a:o;if(p&&typeof p!="boolean"&&!Ad(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const E=jg(t,m[y]);if(E){const{transitionEnd:I,transition:P,..._}=E;for(const x in _){let b=_[x];if(Array.isArray(b)){const S=h?b.length-1:0;b=b[S]}b!==null&&(i[x]=b)}for(const x in I)i[x]=I[x]}}}return i}const go=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zi=new Set(go),XI=t=>e=>typeof e=="string"&&e.startsWith(t),JI=XI("--"),XV=XI("var(--"),Dg=t=>XV(t)?JV.test(t.split("/*")[0].trim()):!1,JV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ZI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,dr=(t,e,n)=>n>e?e:n<t?t:n,yo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ja={...yo,transform:t=>dr(0,1,t)},fu={...yo,default:1},wl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tr=wl("deg"),Mn=wl("%"),J=wl("px"),ZV=wl("vh"),eL=wl("vw"),Bx={...Mn,parse:t=>Mn.parse(t)/100,transform:t=>Mn.transform(t*100)},tL={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,backgroundPositionX:J,backgroundPositionY:J},nL={rotate:Tr,rotateX:Tr,rotateY:Tr,rotateZ:Tr,scale:fu,scaleX:fu,scaleY:fu,scaleZ:fu,skew:Tr,skewX:Tr,skewY:Tr,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Ja,originX:Bx,originY:Bx,originZ:J},zx={...yo,transform:Math.round},Vg={...tL,...nL,zIndex:zx,size:J,fillOpacity:Ja,strokeOpacity:Ja,numOctaves:zx},rL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iL=go.length;function sL(t,e,n){let r="",i=!0;for(let s=0;s<iL;s++){const o=go[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=ZI(a,Vg[o]);if(!l){i=!1;const h=rL[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Lg(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Zi.has(l)){o=!0;continue}else if(JI(l)){i[l]=c;continue}else{const h=ZI(c,Vg[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=sL(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const oL={offset:"stroke-dashoffset",array:"stroke-dasharray"},aL={offset:"strokeDashoffset",array:"strokeDasharray"};function lL(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?oL:aL;t[s.offset]=J.transform(-r);const o=J.transform(e),a=J.transform(n);t[s.array]=`${o} ${a}`}function $x(t,e,n){return typeof t=="string"?t:J.transform(e+n*t)}function uL(t,e,n){const r=$x(e,t.x,t.width),i=$x(n,t.y,t.height);return`${r} ${i}`}function Og(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,p){if(Lg(t,c,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:E}=t;m.transform&&(E&&(y.transform=m.transform),delete m.transform),E&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=uL(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&lL(m,o,a,l,!1)}const Mg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),eS=()=>({...Mg(),attrs:{}}),Fg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function tS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const nS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rS(t,e,n,r){tS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(nS.has(i)?i:kg(i),e.attrs[i])}const Cc={};function cL(t){Object.assign(Cc,t)}function iS(t,{layout:e,layoutId:n}){return Zi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cc[t]||t==="opacity")}function Ug(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(bt(i[o])||e.style&&bt(e.style[o])||iS(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function sS(t,e,n){const r=Ug(t,e,n);for(const i in t)if(bt(t[i])||bt(e[i])){const s=go.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function dL(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Wx=["x","y","width","height","cx","cy","r"],hL={useVisualState:YI({scrapeMotionValuesFromProps:sS,createRenderState:eS,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Zi.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Wx.length;a++){const l=Wx[a];t[l]!==e[l]&&(o=!0)}o&&Se.read(()=>{dL(n,r),Se.render(()=>{Og(r,i,Fg(n.tagName),t.transformTemplate),rS(n,r)})})}})},fL={useVisualState:YI({scrapeMotionValuesFromProps:Ug,createRenderState:Mg})};function oS(t,e,n){for(const r in e)!bt(e[r])&&!iS(r,n)&&(t[r]=e[r])}function pL({transformTemplate:t},e){return N.useMemo(()=>{const n=Mg();return Lg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mL(t,e){const n=t.style||{},r={};return oS(r,n,t),Object.assign(r,pL(t,e)),r}function gL(t,e){const n={},r=mL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function yL(t,e,n,r){const i=N.useMemo(()=>{const s=eS();return Og(s,e,Fg(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};oS(s,t.style,t),i.style={...s,...i.style}}return i}function vL(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Rg(n)?yL:gL)(r,s,o,n),c=jV(r,typeof n=="string",t),h=n!==N.Fragment?{...c,...l,ref:i}:{},{children:p}=r,m=N.useMemo(()=>bt(p)?p.get():p,[p]);return N.createElement(n,{...h,children:m})}}function xL(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Rg(r)?hL:fL,preloadedFeatures:t,useRender:vL(i),createVisualElement:e,Component:r};return zV(o)}}function aS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Cd(t,e,n){const r=t.getProps();return jg(r,e,n!==void 0?n:r.custom,t)}const _L=Ag(()=>window.ScrollTimeline!==void 0);class wL{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(_L()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class EL extends wL{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Bg(t,e){return t?t[e]||t.default||t:void 0}const fp=2e4;function lS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fp;)e+=n,r=t.next(e);return e>=fp?1/0:e}function zg(t){return typeof t=="function"}function Hx(t,e){t.timeline=e,t.onfinish=null}const $g=t=>Array.isArray(t)&&typeof t[0]=="number",TL={linearEasing:void 0};function bL(t,e){const n=Ag(t);return()=>{var r;return(r=TL[e])!==null&&r!==void 0?r:n()}}const kc=bL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),uS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(no(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function cS(t){return!!(typeof t=="function"&&kc()||!t||typeof t=="string"&&(t in pp||kc())||$g(t)||Array.isArray(t)&&t.every(cS))}const Zo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,pp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zo([0,.65,.55,1]),circOut:Zo([.55,0,1,.45]),backIn:Zo([.31,.01,.66,-.59]),backOut:Zo([.33,1.53,.69,.99])};function dS(t,e){if(t)return typeof t=="function"&&kc()?uS(t,e):$g(t)?Zo(t):Array.isArray(t)?t.map(n=>dS(n,e)||pp.easeOut):pp[t]}const yn={x:!1,y:!1};function hS(){return yn.x||yn.y}function IL(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function fS(t,e){const n=IL(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function qx(t){return e=>{e.pointerType==="touch"||hS()||t(e)}}function SL(t,e,n={}){const[r,i,s]=fS(t,n),o=qx(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const h=qx(p=>{c(p),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const pS=(t,e)=>e?t===e?!0:pS(t,e.parentElement):!1,Wg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,AL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PL(t){return AL.has(t.tagName)||t.tabIndex!==-1}const ea=new WeakSet;function Kx(t){return e=>{e.key==="Enter"&&t(e)}}function Rh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CL=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Kx(()=>{if(ea.has(n))return;Rh(n,"down");const i=Kx(()=>{Rh(n,"up")}),s=()=>Rh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Gx(t){return Wg(t)&&!hS()}function kL(t,e,n={}){const[r,i,s]=fS(t,n),o=a=>{const l=a.currentTarget;if(!Gx(a)||ea.has(l))return;ea.add(l);const c=e(a),h=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),!(!Gx(y)||!ea.has(l))&&(ea.delete(l),typeof c=="function"&&c(y,{success:E}))},p=y=>{h(y,n.useGlobalTarget||pS(l,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{!PL(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>CL(c,i),i)}),s}function NL(t){return t==="x"||t==="y"?yn[t]?null:(yn[t]=!0,()=>{yn[t]=!1}):yn.x||yn.y?null:(yn.x=yn.y=!0,()=>{yn.x=yn.y=!1})}const mS=new Set(["width","height","top","left","right","bottom",...go]);let Mu;function RL(){Mu=void 0}const Fn={now:()=>(Mu===void 0&&Fn.set(st.isProcessing||AV.useManualTiming?st.timestamp:performance.now()),Mu),set:t=>{Mu=t,queueMicrotask(RL)}};function Hg(t,e){t.indexOf(e)===-1&&t.push(e)}function qg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Kg{constructor(){this.subscriptions=[]}add(e){return Hg(this.subscriptions,e),()=>qg(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function gS(t,e){return e?t*(1e3/e):0}const Qx=30,jL=t=>!isNaN(parseFloat(t));class DL{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Fn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kg);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qx);return gS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Za(t,e){return new DL(t,e)}function VL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Za(n))}function LL(t,e){const n=Cd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=GV(s[o]);VL(t,o,a)}}function OL(t){return!!(bt(t)&&t.add)}function mp(t,e){const n=t.getValue("willChange");if(OL(n))return n.add(e)}function yS(t){return t.props[KI]}const vS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ML=1e-7,FL=12;function UL(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=vS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>ML&&++a<FL);return o}function El(t,e,n,r){if(t===e&&n===r)return Yt;const i=s=>UL(s,0,1,t,n);return s=>s===0||s===1?s:vS(i(s),e,r)}const xS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_S=t=>e=>1-t(1-e),wS=El(.33,1.53,.69,.99),Gg=_S(wS),ES=xS(Gg),TS=t=>(t*=2)<1?.5*Gg(t):.5*(2-Math.pow(2,-10*(t-1))),Qg=t=>1-Math.sin(Math.acos(t)),bS=_S(Qg),IS=xS(Qg),SS=t=>/^0[^.\s]+$/u.test(t);function BL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SS(t):!0}const ga=t=>Math.round(t*1e5)/1e5,Yg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zL(t){return t==null}const $L=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xg=(t,e)=>n=>!!(typeof n=="string"&&$L.test(n)&&n.startsWith(t)||e&&!zL(n)&&Object.prototype.hasOwnProperty.call(n,e)),AS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Yg);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},WL=t=>dr(0,255,t),jh={...yo,transform:t=>Math.round(WL(t))},Ci={test:Xg("rgb","red"),parse:AS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+jh.transform(t)+", "+jh.transform(e)+", "+jh.transform(n)+", "+ga(Ja.transform(r))+")"};function HL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gp={test:Xg("#"),parse:HL,transform:Ci.transform},bs={test:Xg("hsl","hue"),parse:AS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mn.transform(ga(e))+", "+Mn.transform(ga(n))+", "+ga(Ja.transform(r))+")"},_t={test:t=>Ci.test(t)||gp.test(t)||bs.test(t),parse:t=>Ci.test(t)?Ci.parse(t):bs.test(t)?bs.parse(t):gp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ci.transform(t):bs.transform(t)},qL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Yg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(qL))===null||n===void 0?void 0:n.length)||0)>0}const PS="number",CS="color",GL="var",QL="var(",Yx="${}",YL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function el(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(YL,l=>(_t.test(l)?(r.color.push(s),i.push(CS),n.push(_t.parse(l))):l.startsWith(QL)?(r.var.push(s),i.push(GL),n.push(l)):(r.number.push(s),i.push(PS),n.push(parseFloat(l))),++s,Yx)).split(Yx);return{values:n,split:a,indexes:r,types:i}}function kS(t){return el(t).values}function NS(t){const{split:e,types:n}=el(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===PS?s+=ga(i[o]):a===CS?s+=_t.transform(i[o]):s+=i[o]}return s}}const XL=t=>typeof t=="number"?0:t;function JL(t){const e=kS(t);return NS(t)(e.map(XL))}const ti={test:KL,parse:kS,createTransformer:NS,getAnimatableNone:JL},ZL=new Set(["brightness","contrast","saturate","opacity"]);function eO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Yg)||[];if(!r)return t;const i=n.replace(r,"");let s=ZL.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const tO=/\b([a-z-]*)\(.*?\)/gu,yp={...ti,getAnimatableNone:t=>{const e=t.match(tO);return e?e.map(eO).join(" "):t}},nO={...Vg,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:yp,WebkitFilter:yp},Jg=t=>nO[t];function RS(t,e){let n=Jg(t);return n!==yp&&(n=ti),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const rO=new Set(["auto","none","0"]);function iO(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!rO.has(s)&&el(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=RS(n,i)}const Xx=t=>t===yo||t===J,Jx=(t,e)=>parseFloat(t.split(", ")[e]),Zx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Jx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Jx(s[1],t):0}},sO=new Set(["x","y","z"]),oO=go.filter(t=>!sO.has(t));function aO(t){const e=[];return oO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const io={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Zx(4,13),y:Zx(5,14)};io.translateX=io.x;io.translateY=io.y;const Di=new Set;let vp=!1,xp=!1;function jS(){if(xp){const t=Array.from(Di).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=aO(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}xp=!1,vp=!1,Di.forEach(t=>t.complete()),Di.clear()}function DS(){Di.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xp=!0)})}function lO(){DS(),jS()}class Zg{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Di.add(this),vp||(vp=!0,Se.read(DS),Se.resolveKeyframes(jS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Di.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Di.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const VS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),uO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cO(t){const e=uO.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function LS(t,e,n=1){const[r,i]=cO(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return VS(o)?parseFloat(o):o}return Dg(i)?LS(i,e,n+1):i}const OS=t=>e=>e.test(t),dO={test:t=>t==="auto",parse:t=>t},MS=[yo,J,Mn,Tr,eL,ZV,dO],e_=t=>MS.find(OS(t));class FS extends Zg{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Dg(c))){const h=LS(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!mS.has(r)||e.length!==2)return;const[i,s]=e,o=e_(i),a=e_(s);if(o!==a)if(Xx(o)&&Xx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)BL(e[i])&&r.push(i);r.length&&iO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=io[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const t_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ti.test(t)||t==="0")&&!t.startsWith("url("));function hO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function fO(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=t_(i,e),a=t_(s,e);return!o||!a?!1:hO(t)||(n==="spring"||zg(n))&&r}const pO=t=>t!==null;function kd(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(pO),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const mO=40;class US{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&lO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Fn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!fO(e,r,i,s))if(o)this.options.duration=0;else{l&&l(kd(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Re=(t,e,n)=>t+(e-t)*n;function Dh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Dh(l,a,t+1/3),s=Dh(l,a,t),o=Dh(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Nc(t,e){return n=>n>0?e:t}const Vh=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},yO=[gp,Ci,bs],vO=t=>yO.find(e=>e.test(t));function n_(t){const e=vO(t);if(!e)return!1;let n=e.parse(t);return e===bs&&(n=gO(n)),n}const r_=(t,e)=>{const n=n_(t),r=n_(e);if(!n||!r)return Nc(t,e);const i={...n};return s=>(i.red=Vh(n.red,r.red,s),i.green=Vh(n.green,r.green,s),i.blue=Vh(n.blue,r.blue,s),i.alpha=Re(n.alpha,r.alpha,s),Ci.transform(i))},xO=(t,e)=>n=>e(t(n)),Tl=(...t)=>t.reduce(xO),_p=new Set(["none","hidden"]);function _O(t,e){return _p.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function wO(t,e){return n=>Re(t,e,n)}function ey(t){return typeof t=="number"?wO:typeof t=="string"?Dg(t)?Nc:_t.test(t)?r_:bO:Array.isArray(t)?BS:typeof t=="object"?_t.test(t)?r_:EO:Nc}function BS(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>ey(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function EO(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ey(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function TO(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const bO=(t,e)=>{const n=ti.createTransformer(e),r=el(t),i=el(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_p.has(t)&&!i.values.length||_p.has(e)&&!r.values.length?_O(t,e):Tl(BS(TO(r,i),i.values),n):Nc(t,e)};function zS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Re(t,e,n):ey(t)(t,e)}const IO=5;function $S(t,e,n){const r=Math.max(e-IO,0);return gS(n-t(r),e-r)}const Me={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lh=.001;function SO({duration:t=Me.duration,bounce:e=Me.bounce,velocity:n=Me.velocity,mass:r=Me.mass}){let i,s,o=1-e;o=dr(Me.minDamping,Me.maxDamping,o),t=dr(Me.minDuration,Me.maxDuration,tr(t)),o<1?(i=c=>{const h=c*o,p=h*t,m=h-n,y=wp(c,o),E=Math.exp(-p);return Lh-m/y*E},s=c=>{const p=c*o*t,m=p*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-p),I=wp(Math.pow(c,2),o);return(-i(c)+Lh>0?-1:1)*((m-y)*E)/I}):(i=c=>{const h=Math.exp(-c*t),p=(c-n)*t+1;return-Lh+h*p},s=c=>{const h=Math.exp(-c*t),p=(n-c)*(t*t);return h*p});const a=5/t,l=PO(i,s,a);if(t=er(t),isNaN(l))return{stiffness:Me.stiffness,damping:Me.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const AO=12;function PO(t,e,n){let r=n;for(let i=1;i<AO;i++)r=r-t(r)/e(r);return r}function wp(t,e){return t*Math.sqrt(1-e*e)}const CO=["duration","bounce"],kO=["stiffness","damping","mass"];function i_(t,e){return e.some(n=>t[n]!==void 0)}function NO(t){let e={velocity:Me.velocity,stiffness:Me.stiffness,damping:Me.damping,mass:Me.mass,isResolvedFromDuration:!1,...t};if(!i_(t,kO)&&i_(t,CO))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*dr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Me.mass,stiffness:i,damping:s}}else{const n=SO(t);e={...e,...n,mass:Me.mass},e.isResolvedFromDuration=!0}return e}function WS(t=Me.visualDuration,e=Me.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=NO({...n,velocity:-tr(n.velocity||0)}),E=m||0,I=c/(2*Math.sqrt(l*h)),P=o-s,_=tr(Math.sqrt(l/h)),x=Math.abs(P)<5;r||(r=x?Me.restSpeed.granular:Me.restSpeed.default),i||(i=x?Me.restDelta.granular:Me.restDelta.default);let b;if(I<1){const j=wp(_,I);b=D=>{const T=Math.exp(-I*_*D);return o-T*((E+I*_*P)/j*Math.sin(j*D)+P*Math.cos(j*D))}}else if(I===1)b=j=>o-Math.exp(-_*j)*(P+(E+_*P)*j);else{const j=_*Math.sqrt(I*I-1);b=D=>{const T=Math.exp(-I*_*D),v=Math.min(j*D,300);return o-T*((E+I*_*P)*Math.sinh(v)+j*P*Math.cosh(v))/j}}const S={calculatedDuration:y&&p||null,next:j=>{const D=b(j);if(y)a.done=j>=p;else{let T=0;I<1&&(T=j===0?er(E):$S(b,j,D));const v=Math.abs(T)<=r,A=Math.abs(o-D)<=i;a.done=v&&A}return a.value=a.done?o:D,a},toString:()=>{const j=Math.min(lS(S),fp),D=uS(T=>S.next(j*T).value,j,30);return j+"ms "+D}};return S}function s_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=v=>a!==void 0&&v<a||l!==void 0&&v>l,E=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let I=n*e;const P=p+I,_=o===void 0?P:o(P);_!==P&&(I=_-p);const x=v=>-I*Math.exp(-v/r),b=v=>_+x(v),S=v=>{const A=x(v),k=b(v);m.done=Math.abs(A)<=c,m.value=m.done?_:k};let j,D;const T=v=>{y(m.value)&&(j=v,D=WS({keyframes:[m.value,E(m.value)],velocity:$S(b,v,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return T(0),{calculatedDuration:null,next:v=>{let A=!1;return!D&&j===void 0&&(A=!0,S(v),T(v)),j!==void 0&&v>=j?D.next(v-j):(!A&&S(v),m)}}}const RO=El(.42,0,1,1),jO=El(0,0,.58,1),HS=El(.42,0,.58,1),DO=t=>Array.isArray(t)&&typeof t[0]!="number",VO={linear:Yt,easeIn:RO,easeInOut:HS,easeOut:jO,circIn:Qg,circInOut:IS,circOut:bS,backIn:Gg,backInOut:ES,backOut:wS,anticipate:TS},o_=t=>{if($g(t)){zI(t.length===4);const[e,n,r,i]=t;return El(e,n,r,i)}else if(typeof t=="string")return VO[t];return t};function LO(t,e,n){const r=[],i=n||zS,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Yt:e;a=Tl(l,a)}r.push(a)}return r}function OO(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(zI(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=LO(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=no(t[p],t[p+1],h);return a[p](m)};return n?h=>c(dr(t[0],t[s-1],h)):c}function MO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=no(0,e,r);t.push(Re(n,1,i))}}function FO(t){const e=[0];return MO(e,t.length-1),e}function UO(t,e){return t.map(n=>n*e)}function BO(t,e){return t.map(()=>e||HS).splice(0,t.length-1)}function Rc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=DO(r)?r.map(o_):o_(r),s={done:!1,value:e[0]},o=UO(n&&n.length===e.length?n:FO(e),t),a=OO(o,e,{ease:Array.isArray(i)?i:BO(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const zO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>ei(e),now:()=>st.isProcessing?st.timestamp:Fn.now()}},$O={decay:s_,inertia:s_,tween:Rc,keyframes:Rc,spring:WS},WO=t=>t/100;class ty extends US{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Zg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=zg(n)?n:$O[n]||Rc;let l,c;a!==Rc&&typeof e[0]!="number"&&(l=Tl(WO,zS(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=lS(h));const{calculatedDuration:p}=h,m=p+i,y=m*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:v}=this.options;return{done:!0,value:v[v.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:p}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:y,repeatType:E,repeatDelay:I,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-m*(this.speed>=0?1:-1),x=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,S=s;if(y){const v=Math.min(this.currentTime,h)/p;let A=Math.floor(v),k=v%1;!k&&v>=1&&(k=1),k===1&&A--,A=Math.min(A,y+1),!!(A%2)&&(E==="reverse"?(k=1-k,I&&(k-=I/p)):E==="mirror"&&(S=o)),b=dr(0,1,k)*p}const j=x?{done:!1,value:l[0]}:S.next(b);a&&(j.value=a(j.value));let{done:D}=j;!x&&c!==null&&(D=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return T&&i!==void 0&&(j.value=kd(l,this.options,i)),P&&P(j.value),T&&this.finish(),j}get duration(){const{resolved:e}=this;return e?tr(e.calculatedDuration):0}get time(){return tr(this.currentTime)}set time(e){e=er(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=tr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=zO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const HO=new Set(["opacity","clipPath","filter","transform"]);function qO(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=dS(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const KO=Ag(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jc=10,GO=2e4;function QO(t){return zg(t.type)||t.type==="spring"||!cS(t.ease)}function YO(t,e){const n=new ty({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<GO;)r=n.sample(s),i.push(r.value),s+=jc;return{times:void 0,keyframes:i,duration:s-jc,ease:"linear"}}const qS={anticipate:TS,backInOut:ES,circInOut:IS};function XO(t){return t in qS}class a_ extends US{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new FS(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&kc()&&XO(s)&&(s=qS[s]),QO(this.options)){const{onComplete:p,onUpdate:m,motionValue:y,element:E,...I}=this.options,P=YO(e,I);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,i=P.times,s=P.ease,o="keyframes"}const h=qO(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(Hx(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;a.set(kd(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return tr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return tr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=er(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yt;const{animation:r}=n;Hx(r,e)}return Yt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:p,element:m,...y}=this.options,E=new ty({...y,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),I=er(this.time);c.setWithVelocity(E.sample(I-jc).value,E.sample(I).value,jc)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return KO()&&r&&HO.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const JO={type:"spring",stiffness:500,damping:25,restSpeed:10},ZO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eM={type:"keyframes",duration:.8},tM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nM=(t,{keyframes:e})=>e.length>2?eM:Zi.has(t)?t.startsWith("scale")?ZO(e[1]):JO:tM;function rM({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const ny=(t,e,n,r={},i,s)=>o=>{const a=Bg(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-er(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};rM(a)||(h={...h,...nM(t,h)}),h.duration&&(h.duration=er(h.duration)),h.repeatDelay&&(h.repeatDelay=er(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const m=kd(h.keyframes,a);if(m!==void 0)return Se.update(()=>{h.onUpdate(m),h.onComplete()}),new EL([])}return!s&&a_.supports(h)?new a_(h):new ty(h)};function iM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function KS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const p in l){const m=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),y=l[p];if(y===void 0||h&&iM(h,p))continue;const E={delay:n,...Bg(o||{},p)};let I=!1;if(window.MotionHandoffAnimation){const _=yS(t);if(_){const x=window.MotionHandoffAnimation(_,p,Se);x!==null&&(E.startTime=x,I=!0)}}mp(t,p),m.start(ny(p,m,y,t.shouldReduceMotion&&mS.has(p)?{type:!1}:E,t,I));const P=m.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{Se.update(()=>{a&&LL(t,a)})}),c}function Ep(t,e,n={}){var r;const i=Cd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(KS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=s;return sM(t,e,h+c,p,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function sM(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(oM).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Ep(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function oM(t,e){return t.sortNodePosition(e)}function aM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Ep(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Ep(t,e,n);else{const i=typeof e=="function"?Cd(t,e,n.custom):e;r=Promise.all(KS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const lM=Cg.length;function GS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?GS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lM;n++){const r=Cg[n],i=t.props[r];(Xa(i)||i===!1)&&(e[r]=i)}return e}const uM=[...Pg].reverse(),cM=Pg.length;function dM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>aM(t,n,r)))}function hM(t){let e=dM(t),n=l_(),r=!0;const i=l=>(c,h)=>{var p;const m=Cd(t,h,l==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:y,transitionEnd:E,...I}=m;c={...c,...I,...E}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=GS(t.parent)||{},p=[],m=new Set;let y={},E=1/0;for(let P=0;P<cM;P++){const _=uM[P],x=n[_],b=c[_]!==void 0?c[_]:h[_],S=Xa(b),j=_===l?x.isActive:null;j===!1&&(E=P);let D=b===h[_]&&b!==c[_]&&S;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),x.protectedKeys={...y},!x.isActive&&j===null||!b&&!x.prevProp||Ad(b)||typeof b=="boolean")continue;const T=fM(x.prevProp,b);let v=T||_===l&&x.isActive&&!D&&S||P>E&&S,A=!1;const k=Array.isArray(b)?b:[b];let R=k.reduce(i(_),{});j===!1&&(R={});const{prevResolvedValues:V={}}=x,C={...V,...R},Ae=ue=>{v=!0,m.has(ue)&&(A=!0,m.delete(ue)),x.needsAnimating[ue]=!0;const $=t.getValue(ue);$&&($.liveStyle=!1)};for(const ue in C){const $=R[ue],X=V[ue];if(y.hasOwnProperty(ue))continue;let Z=!1;hp($)&&hp(X)?Z=!aS($,X):Z=$!==X,Z?$!=null?Ae(ue):m.add(ue):$!==void 0&&m.has(ue)?Ae(ue):x.protectedKeys[ue]=!0}x.prevProp=b,x.prevResolvedValues=R,x.isActive&&(y={...y,...R}),r&&t.blockInitialAnimation&&(v=!1),v&&(!(D&&T)||A)&&p.push(...k.map(ue=>({animation:ue,options:{type:_}})))}if(m.size){const P={};m.forEach(_=>{const x=t.getBaseTarget(_),b=t.getValue(_);b&&(b.liveStyle=!0),P[_]=x??null}),p.push({animation:P})}let I=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const p=o(l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=l_(),r=!0}}}function fM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aS(e,t):!1}function xi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function l_(){return{animate:xi(!0),whileInView:xi(),whileHover:xi(),whileTap:xi(),whileDrag:xi(),whileFocus:xi(),exit:xi()}}class ci{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pM extends ci{constructor(e){super(e),e.animationState||(e.animationState=hM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ad(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mM=0;class gM extends ci{constructor(){super(...arguments),this.id=mM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yM={animation:{Feature:pM},exit:{Feature:gM}};function tl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function bl(t){return{point:{x:t.pageX,y:t.pageY}}}const vM=t=>e=>Wg(e)&&t(e,bl(e));function ya(t,e,n,r){return tl(t,e,vM(n),r)}const u_=(t,e)=>Math.abs(t-e);function xM(t,e){const n=u_(t.x,e.x),r=u_(t.y,e.y);return Math.sqrt(n**2+r**2)}class QS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Mh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=xM(p.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:E}=p,{timestamp:I}=st;this.history.push({...E,timestamp:I});const{onStart:P,onMove:_}=this.handlers;m||(P&&P(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Oh(m,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:E,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Mh(p.type==="pointercancel"?this.lastMoveEventInfo:Oh(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,P),E&&E(p,P)},!Wg(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=bl(e),a=Oh(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=st;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Mh(a,this.history)),this.removeListeners=Tl(ya(this.contextWindow,"pointermove",this.handlePointerMove),ya(this.contextWindow,"pointerup",this.handlePointerUp),ya(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ei(this.updatePoint)}}function Oh(t,e){return e?{point:e(t.point)}:t}function c_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Mh({point:t},e){return{point:t,delta:c_(t,YS(e)),offset:c_(t,_M(e)),velocity:wM(e,.1)}}function _M(t){return t[0]}function YS(t){return t[t.length-1]}function wM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=YS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>er(e)));)n--;if(!r)return{x:0,y:0};const s=tr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const XS=1e-4,EM=1-XS,TM=1+XS,JS=.01,bM=0-JS,IM=0+JS;function Jt(t){return t.max-t.min}function SM(t,e,n){return Math.abs(t-e)<=n}function d_(t,e,n,r=.5){t.origin=r,t.originPoint=Re(e.min,e.max,t.origin),t.scale=Jt(n)/Jt(e),t.translate=Re(n.min,n.max,t.origin)-t.originPoint,(t.scale>=EM&&t.scale<=TM||isNaN(t.scale))&&(t.scale=1),(t.translate>=bM&&t.translate<=IM||isNaN(t.translate))&&(t.translate=0)}function va(t,e,n,r){d_(t.x,e.x,n.x,r?r.originX:void 0),d_(t.y,e.y,n.y,r?r.originY:void 0)}function h_(t,e,n){t.min=n.min+e.min,t.max=t.min+Jt(e)}function AM(t,e,n){h_(t.x,e.x,n.x),h_(t.y,e.y,n.y)}function f_(t,e,n){t.min=e.min-n.min,t.max=t.min+Jt(e)}function xa(t,e,n){f_(t.x,e.x,n.x),f_(t.y,e.y,n.y)}function PM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Re(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Re(n,t,r.max):Math.min(t,n)),t}function p_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CM(t,{top:e,left:n,bottom:r,right:i}){return{x:p_(t.x,n,i),y:p_(t.y,e,r)}}function m_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function kM(t,e){return{x:m_(t.x,e.x),y:m_(t.y,e.y)}}function NM(t,e){let n=.5;const r=Jt(t),i=Jt(e);return i>r?n=no(e.min,e.max-r,t.min):r>i&&(n=no(t.min,t.max-i,e.min)),dr(0,1,n)}function RM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Tp=.35;function jM(t=Tp){return t===!1?t=0:t===!0&&(t=Tp),{x:g_(t,"left","right"),y:g_(t,"top","bottom")}}function g_(t,e,n){return{min:y_(t,e),max:y_(t,n)}}function y_(t,e){return typeof t=="number"?t:t[e]||0}const v_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Is=()=>({x:v_(),y:v_()}),x_=()=>({min:0,max:0}),Ue=()=>({x:x_(),y:x_()});function on(t){return[t("x"),t("y")]}function ZS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fh(t){return t===void 0||t===1}function bp({scale:t,scaleX:e,scaleY:n}){return!Fh(t)||!Fh(e)||!Fh(n)}function Ti(t){return bp(t)||e1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function e1(t){return __(t.x)||__(t.y)}function __(t){return t&&t!=="0%"}function Dc(t,e,n){const r=t-n,i=e*r;return n+i}function w_(t,e,n,r,i){return i!==void 0&&(t=Dc(t,i,r)),Dc(t,n,r)+e}function Ip(t,e=0,n=1,r,i){t.min=w_(t.min,e,n,r,i),t.max=w_(t.max,e,n,r,i)}function t1(t,{x:e,y:n}){Ip(t.x,e.translate,e.scale,e.originPoint),Ip(t.y,n.translate,n.scale,n.originPoint)}const E_=.999999999999,T_=1.0000000000001;function LM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&As(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,t1(t,o)),r&&Ti(s.latestValues)&&As(t,s.latestValues))}e.x<T_&&e.x>E_&&(e.x=1),e.y<T_&&e.y>E_&&(e.y=1)}function Ss(t,e){t.min=t.min+e,t.max=t.max+e}function b_(t,e,n,r,i=.5){const s=Re(t.min,t.max,i);Ip(t,e,n,s,r)}function As(t,e){b_(t.x,e.x,e.scaleX,e.scale,e.originX),b_(t.y,e.y,e.scaleY,e.scale,e.originY)}function n1(t,e){return ZS(VM(t.getBoundingClientRect(),e))}function OM(t,e,n){const r=n1(t,n),{scroll:i}=e;return i&&(Ss(r.x,i.offset.x),Ss(r.y,i.offset.y)),r}const r1=({current:t})=>t?t.ownerDocument.defaultView:null,MM=new WeakMap;class FM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bl(h).point)},s=(h,p)=>{const{drag:m,dragPropagation:y,onDragStart:E}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NL(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),on(P=>{let _=this.getAxisMotionValue(P).get()||0;if(Mn.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[P];b&&(_=Jt(b)*(parseFloat(_)/100))}}this.originPoint[P]=_}),E&&Se.postRender(()=>E(h,p)),mp(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(h,p)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:E,onDrag:I}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:P}=p;if(y&&this.currentDirection===null){this.currentDirection=UM(P),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",p.point,P),this.updateAxis("y",p.point,P),this.visualElement.render(),I&&I(h,p)},a=(h,p)=>this.stop(h,p),l=()=>on(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new QS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:r1(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Se.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!pu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=PM(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ts(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CM(i.layoutBox,n):this.constraints=!1,this.elastic=jM(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&on(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=RM(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ts(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=OM(r,i.root,this.visualElement.getTransformPagePoint());let o=kM(i.layout.layoutBox,s);if(n){const a=n(DM(o));this.hasMutatedConstraints=!!a,a&&(o=ZS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=on(h=>{if(!pu(h,n,this.currentDirection))return;let p=l&&l[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return mp(this.visualElement,e),r.start(ny(e,r,0,n,this.visualElement,!1))}stopAnimation(){on(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){on(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){on(n=>{const{drag:r}=this.getProps();if(!pu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ts(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};on(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=NM({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),on(o=>{if(!pu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Re(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;MM.set(this.visualElement,this);const e=this.visualElement.current,n=ya(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ts(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Se.read(r);const o=tl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(on(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=l[h].translate,p.set(p.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Tp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function pu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class BM extends ci{constructor(e){super(e),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new FM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const I_=t=>(e,n)=>{t&&Se.postRender(()=>t(e,n))};class zM extends ci{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(e){this.session=new QS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:I_(e),onStart:I_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Se.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ya(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function S_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(J.test(t))t=parseFloat(t);else return t;const n=S_(t,e.target.x),r=S_(t,e.target.y);return`${n}% ${r}%`}},$M={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ti.parse(t);if(i.length>5)return r;const s=ti.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Re(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class WM extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;cL(HM),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Fu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ng.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function i1(t){const[e,n]=UI(),r=N.useContext(Tg);return d.jsx(WM,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(GI),isPresent:e,safeToRemove:n})}const HM={borderRadius:{...zo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zo,borderTopRightRadius:zo,borderBottomLeftRadius:zo,borderBottomRightRadius:zo,boxShadow:$M};function qM(t,e,n){const r=bt(t)?t:Za(t);return r.start(ny("",r,e,n)),r.animation}function KM(t){return t instanceof SVGElement&&t.tagName!=="svg"}const GM=(t,e)=>t.depth-e.depth;class QM{constructor(){this.children=[],this.isDirty=!1}add(e){Hg(this.children,e),this.isDirty=!0}remove(e){qg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GM),this.isDirty=!1,this.children.forEach(e)}}function YM(t,e){const n=Fn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ei(r),t(s-e))};return Se.read(r,!0),()=>ei(r)}const s1=["TopLeft","TopRight","BottomLeft","BottomRight"],XM=s1.length,A_=t=>typeof t=="string"?parseFloat(t):t,P_=t=>typeof t=="number"||J.test(t);function JM(t,e,n,r,i,s){i?(t.opacity=Re(0,n.opacity!==void 0?n.opacity:1,ZM(r)),t.opacityExit=Re(e.opacity!==void 0?e.opacity:1,0,e4(r))):s&&(t.opacity=Re(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<XM;o++){const a=`border${s1[o]}Radius`;let l=C_(e,a),c=C_(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||P_(l)===P_(c)?(t[a]=Math.max(Re(A_(l),A_(c),r),0),(Mn.test(c)||Mn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Re(e.rotate||0,n.rotate||0,r))}function C_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZM=o1(0,.5,bS),e4=o1(.5,.95,Yt);function o1(t,e,n){return r=>r<t?0:r>e?1:n(no(t,e,r))}function k_(t,e){t.min=e.min,t.max=e.max}function sn(t,e){k_(t.x,e.x),k_(t.y,e.y)}function N_(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function R_(t,e,n,r,i){return t-=e,t=Dc(t,1/n,r),i!==void 0&&(t=Dc(t,1/i,r)),t}function t4(t,e=0,n=1,r=.5,i,s=t,o=t){if(Mn.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Re(s.min,s.max,r);t===s&&(a-=e),t.min=R_(t.min,e,n,a,i),t.max=R_(t.max,e,n,a,i)}function j_(t,e,[n,r,i],s,o){t4(t,e[n],e[r],e[i],e.scale,s,o)}const n4=["x","scaleX","originX"],r4=["y","scaleY","originY"];function D_(t,e,n,r){j_(t.x,e,n4,n?n.x:void 0,r?r.x:void 0),j_(t.y,e,r4,n?n.y:void 0,r?r.y:void 0)}function V_(t){return t.translate===0&&t.scale===1}function a1(t){return V_(t.x)&&V_(t.y)}function L_(t,e){return t.min===e.min&&t.max===e.max}function i4(t,e){return L_(t.x,e.x)&&L_(t.y,e.y)}function O_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function l1(t,e){return O_(t.x,e.x)&&O_(t.y,e.y)}function M_(t){return Jt(t.x)/Jt(t.y)}function F_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class s4{constructor(){this.members=[]}add(e){Hg(this.members,e),e.scheduleRender()}remove(e){if(qg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o4(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:E}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const bi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ta=typeof window<"u"&&window.MotionDebug!==void 0,Uh=["","X","Y","Z"],a4={visibility:"hidden"},U_=1e3;let l4=0;function Bh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function u1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=yS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&u1(r)}function c1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=l4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ta&&(bi.totalNodes=bi.resolvedTargetDeltas=bi.recalculatedProjection=0),this.nodes.forEach(d4),this.nodes.forEach(g4),this.nodes.forEach(y4),this.nodes.forEach(h4),ta&&window.MotionDebug.record(bi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new QM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=KM(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=YM(m,250),Fu.hasAnimatedSinceResize&&(Fu.hasAnimatedSinceResize=!1,this.nodes.forEach(z_))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||h.getDefaultTransition()||E4,{onLayoutAnimationStart:P,onLayoutAnimationComplete:_}=h.getProps(),x=!this.targetLayout||!l1(this.targetLayout,E)||y,b=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,b);const S={...Bg(I,"layout"),onPlay:P,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else m||z_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ei(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(v4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&u1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(B_);return}this.isUpdating||this.nodes.forEach(p4),this.isUpdating=!1,this.nodes.forEach(m4),this.nodes.forEach(u4),this.nodes.forEach(c4),this.clearAllSnapshots();const a=Fn.now();st.delta=dr(0,1e3/60,a-st.timestamp),st.timestamp=a,st.isProcessing=!0,Nh.update.process(st),Nh.preRender.process(st),Nh.render.process(st),st.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ng.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f4),this.sharedNodes.forEach(x4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!a1(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Ti(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),T4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ue();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(b4))){const{scroll:h}=this.root;h&&(Ss(l.x,h.offset.x),Ss(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Ue();if(sn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&sn(l,o),Ss(l.x,p.offset.x),Ss(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=Ue();sn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&As(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ti(h.latestValues)&&As(l,h.latestValues)}return Ti(this.latestValues)&&As(l,this.latestValues),l}removeTransform(o){const a=Ue();sn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ti(c.latestValues))continue;bp(c.latestValues)&&c.updateSnapshot();const h=Ue(),p=c.measurePageBox();sn(h,p),D_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ti(this.latestValues)&&D_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==st.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=st.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),xa(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sn(this.target,this.layout.layoutBox),t1(this.target,this.targetDelta)):sn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),xa(this.relativeTargetOrigin,this.target,y.target),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ta&&bi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bp(this.parent.latestValues)||e1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===st.timestamp&&(c=!1),c)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;sn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;LM(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ue());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(N_(this.prevProjectionDelta.x,this.projectionDelta.x),N_(this.prevProjectionDelta.y,this.projectionDelta.y)),va(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!F_(this.projectionDelta.x,this.prevProjectionDelta.x)||!F_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),ta&&bi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Is(),this.projectionDelta=Is(),this.projectionDeltaWithTransform=Is()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},p=Is();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ue(),y=l?l.source:void 0,E=this.layout?this.layout.source:void 0,I=y!==E,P=this.getStack(),_=!P||P.members.length<=1,x=!!(I&&!_&&this.options.crossfade===!0&&!this.path.some(w4));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const j=S/1e3;$_(p.x,o.x,j),$_(p.y,o.y,j),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_4(this.relativeTarget,this.relativeTargetOrigin,m,j),b&&i4(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ue()),sn(b,this.relativeTarget)),I&&(this.animationValues=h,JM(h,c,this.latestValues,j,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ei(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Fu.hasAnimatedSinceResize=!0,this.currentAnimation=qM(0,U_,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(U_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&d1(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ue();const p=Jt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=Jt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}sn(a,l),As(a,h),va(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new s4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Bh("z",o,c,this.animationValues);for(let h=0;h<Uh.length;h++)Bh(`rotate${Uh[h]}`,o,c,this.animationValues),Bh(`skew${Uh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return a4;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ou(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Ou(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ti(this.latestValues)&&(I.transform=h?h({},""):"none",this.hasProjected=!1),I}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=o4(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:E}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${E.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const I in Cc){if(m[I]===void 0)continue;const{correct:P,applyTo:_}=Cc[I],x=c.transform==="none"?m[I]:P(m[I],p);if(_){const b=_.length;for(let S=0;S<b;S++)c[_[S]]=x}else c[I]=x}return this.options.layoutId&&(c.pointerEvents=p===this?Ou(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(B_),this.root.sharedNodes.clear()}}}function u4(t){t.updateLayout()}function c4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?on(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Jt(m);m.min=r[p].min,m.max=m.min+y}):d1(s,n.layoutBox,r)&&on(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],y=Jt(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const a=Is();va(a,r,n.layoutBox);const l=Is();o?va(l,t.applyTransform(i,!0),n.measuredBox):va(l,r,n.layoutBox);const c=!a1(a);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const E=Ue();xa(E,n.layoutBox,m.layoutBox);const I=Ue();xa(I,r,y.layoutBox),l1(E,I)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=E,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function d4(t){ta&&bi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function h4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function f4(t){t.clearSnapshot()}function B_(t){t.clearMeasurements()}function p4(t){t.isLayoutDirty=!1}function m4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function z_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function g4(t){t.resolveTargetDelta()}function y4(t){t.calcProjection()}function v4(t){t.resetSkewAndRotation()}function x4(t){t.removeLeadSnapshot()}function $_(t,e,n){t.translate=Re(e.translate,0,n),t.scale=Re(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function W_(t,e,n,r){t.min=Re(e.min,n.min,r),t.max=Re(e.max,n.max,r)}function _4(t,e,n,r){W_(t.x,e.x,n.x,r),W_(t.y,e.y,n.y,r)}function w4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const E4={duration:.45,ease:[.4,0,.1,1]},H_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),q_=H_("applewebkit/")&&!H_("chrome/")?Math.round:Yt;function K_(t){t.min=q_(t.min),t.max=q_(t.max)}function T4(t){K_(t.x),K_(t.y)}function d1(t,e,n){return t==="position"||t==="preserve-aspect"&&!SM(M_(e),M_(n),.2)}function b4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const I4=c1({attachResizeListener:(t,e)=>tl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zh={current:void 0},h1=c1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zh.current){const t=new I4({});t.mount(window),t.setOptions({layoutScroll:!0}),zh.current=t}return zh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),S4={pan:{Feature:zM},drag:{Feature:BM,ProjectionNode:h1,MeasureLayout:i1}};function G_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Se.postRender(()=>s(e,bl(e)))}class A4 extends ci{mount(){const{current:e}=this.node;e&&(this.unmount=SL(e,n=>(G_(this.node,n,"Start"),r=>G_(this.node,r,"End"))))}unmount(){}}class P4 extends ci{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tl(tl(this.node.current,"focus",()=>this.onFocus()),tl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Q_(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Se.postRender(()=>s(e,bl(e)))}class C4 extends ci{mount(){const{current:e}=this.node;e&&(this.unmount=kL(e,n=>(Q_(this.node,n,"Start"),(r,{success:i})=>Q_(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sp=new WeakMap,$h=new WeakMap,k4=t=>{const e=Sp.get(t.target);e&&e(t)},N4=t=>{t.forEach(k4)};function R4({root:t,...e}){const n=t||document;$h.has(n)||$h.set(n,{});const r=$h.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(N4,{root:t,...e})),r[i]}function j4(t,e,n){const r=R4(e);return Sp.set(t,n),r.observe(t),()=>{Sp.delete(t),r.unobserve(t)}}const D4={some:0,all:1};class V4 extends ci{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:D4[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=c?h:p;m&&m(l)};return j4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(L4(e,n))&&this.startObserver()}unmount(){}}function L4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const O4={inView:{Feature:V4},tap:{Feature:C4},focus:{Feature:P4},hover:{Feature:A4}},M4={layout:{ProjectionNode:h1,MeasureLayout:i1}},Ap={current:null},f1={current:!1};function F4(){if(f1.current=!0,!!Sg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ap.current=t.matches;t.addListener(e),e()}else Ap.current=!1}const U4=[...MS,_t,ti],B4=t=>U4.find(OS(t)),Y_=new WeakMap;function z4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(bt(i))t.addValue(r,i);else if(bt(s))t.addValue(r,Za(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Za(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const X_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $4{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Fn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Se.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Pd(n),this.isVariantNode=qI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const E=m[y];l[y]!==void 0&&bt(E)&&E.set(l[y],!1)}}mount(e){this.current=e,Y_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),f1.current||F4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ap.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Y_.delete(this.current),this.projection&&this.projection.unmount(),ei(this.notifyUpdate),ei(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zi.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ro){const n=ro[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<X_.length;r++){const i=X_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=z4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Za(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(VS(i)||SS(i))?i=parseFloat(i):!B4(i)&&ti.test(n)&&(i=RS(e,n)),this.setBaseTarget(e,bt(i)?i.get():i)),bt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=jg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!bt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class p1 extends $4{constructor(){super(...arguments),this.KeyframeResolver=FS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function W4(t){return window.getComputedStyle(t)}class H4 extends p1{constructor(){super(...arguments),this.type="html",this.renderInstance=tS}readValueFromInstance(e,n){if(Zi.has(n)){const r=Jg(n);return r&&r.default||0}else{const r=W4(e),i=(JI(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return n1(e,n)}build(e,n,r){Lg(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ug(e,n,r)}}class q4 extends p1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ue}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zi.has(n)){const r=Jg(n);return r&&r.default||0}return n=nS.has(n)?n:kg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return sS(e,n,r)}build(e,n,r){Og(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){rS(e,n,r,i)}mount(e){this.isSVGTag=Fg(e.tagName),super.mount(e)}}const K4=(t,e)=>Rg(t)?new q4(e):new H4(e,{allowProjection:t!==N.Fragment}),G4=xL({...yM,...O4,...S4,...M4},K4),ie=DV(G4),Q4=()=>{const[t,e]=N.useState("desktop");return N.useEffect(()=>{const n=()=>{const r=navigator.userAgent.toLowerCase(),i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r),s=/ipad|android(?!.*mobile)/i.test(r);e(i&&!s?"mobile":s?"tablet":"desktop")};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),t},Pp=(t,e=!1)=>{if(!e)return"⚪";switch(t){case"mobile":return"📱";case"tablet":return"📲";case"desktop":default:return"💻"}},Cp=(t,e=!1)=>{if(!e)return"Не в сети";switch(t){case"mobile":return"Онлайн с телефона";case"tablet":return"Онлайн с планшета";case"desktop":default:return"Онлайн с компьютера"}};function Y4({name:t,balance:e,income:n=0,expense:r=0,currency:i="PLN",online:s=!1,deviceType:o="desktop",onClick:a}){const l=h=>{const p=parseFloat(h)||0;return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2}).format(p)},c=h=>{const p=parseFloat(h)||0;return p>0?"text-emerald-400":p<0?"text-red-400":"text-zinc-300"};return d.jsxs(ie.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"balance-card group",onClick:a,children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:t.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-lg",children:t}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-base",children:Pp(o,s)}),d.jsx("span",{className:"text-sm text-zinc-400",children:Cp(o,s)})]})]})]})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Текущий баланс"}),d.jsxs("div",{className:`text-3xl font-bold transition-colors ${c(e)}`,children:[l(e)," ",i]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{className:"p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[d.jsx("div",{className:"text-xs text-emerald-400 font-medium",children:"ДОХОДЫ"}),d.jsxs("div",{className:"text-lg font-semibold text-emerald-400",children:["+",l(n)," ",i]})]}),d.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("div",{className:"text-xs text-red-400 font-medium",children:"РАСХОДЫ"}),d.jsxs("div",{className:"text-lg font-semibold text-red-400",children:["-",l(r)," ",i]})]})]}),d.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:d.jsx("div",{className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 text-center text-sm font-medium text-zinc-300",children:"Нажмите для добавления операции"})}),d.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-primary opacity-0 group-hover:opacity-20 transition-opacity duration-300 pointer-events-none"})]})}function ki({open:t,title:e,children:n,onClose:r,maxWidth:i="max-w-2xl"}){return N.useEffect(()=>{const s=o=>{o.key==="Escape"&&r()};return t&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[t,r]),d.jsx(Ya,{children:t&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/20 backdrop-blur-md"}),d.jsxs(ie.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:30},className:`relative w-full ${i} max-h-[90vh] overflow-hidden rounded-2xl shadow-2xl border border-white/20`,style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.12) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(40px) saturate(150%)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.7)"},onClick:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold bg-gradient-primary bg-clip-text text-transparent",children:e}),d.jsx("button",{onClick:r,className:"p-2 rounded-xl hover:bg-white/10 transition-all duration-200 text-zinc-400 hover:text-white",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:n})]})]})})}function X4(){const{profiles:t,categories:e,totals:n,totalsByProfile:r,currency:i,convert:s,addOperation:o,budgetId:a}=Sn(),{user:l}=Bn(),{playSound:c}=bd(),h=Q4(),[p,m]=N.useState(!1),[y,E]=N.useState({type:"income",profileId:"",amount:"",categoryId:"",note:""}),[I,P]=N.useState(null),_=[...t].sort((D,T)=>D.name==="Артур"?-1:T.name==="Артур"?1:0),x=()=>{m(!0),c("click")},b=async D=>{if(D.preventDefault(),!(!y.profileId||!y.amount||!y.categoryId))try{await o(y),E({type:"income",profileId:"",amount:"",categoryId:"",note:""}),m(!1),y.type==="income"?c("coin"):y.type==="expense"?c("add"):y.type==="transfer"?c("notification"):y.type==="goal"&&c("goal")}catch{c("error")}},S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},j={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:12}}};return d.jsxs(ie.div,{variants:S,initial:"hidden",animate:"visible",className:"space-y-8",children:[t.length===2&&d.jsx(ie.div,{variants:j,className:"space-y-6",children:d.jsx("div",{className:"glass-card rounded-3xl overflow-hidden",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:[d.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:I==="left"?-10:0},transition:{delay:.1,type:"spring",stiffness:300,damping:30},className:"p-6 lg:border-r lg:border-white/10 bg-white/5 cursor-pointer hover:bg-gradient-to-br hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300",onMouseEnter:()=>P("left"),onMouseLeave:()=>P(null),onClick:()=>{E(D=>({...D,profileId:_[0].id})),x()},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:_[0].name.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:_[0].name}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-lg",children:Pp(h,_[0].name==="Артур")}),d.jsx("span",{className:"text-zinc-400",children:Cp(h,_[0].name==="Артур")})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Текущий баланс"}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[s((r[_[0].id]||{balance:0}).balance).toFixed(2),d.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:i})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-green-400 font-medium text-sm",children:["+",s((r[_[0].id]||{income:0}).income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Доходы"})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-red-400 font-medium text-sm",children:["-",s((r[_[0].id]||{expense:0}).expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Расходы"})]})]})]})]}),d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,type:"spring",stiffness:300,damping:30},className:"p-6 bg-gradient-to-b from-white/10 to-white/5 text-center relative",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Общий баланс"}),d.jsxs("p",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[s(n.balance).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[d.jsxs("div",{className:"text-green-400",children:[d.jsxs("div",{className:"font-medium",children:["↗ ",s(n.income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500",children:"Общие доходы"})]}),d.jsxs("div",{className:"text-red-400",children:[d.jsxs("div",{className:"font-medium",children:["↘ ",s(n.expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500",children:"Общие расходы"})]})]})]})}),d.jsxs(ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:I==="right"?10:0},transition:{delay:.3,type:"spring",stiffness:300,damping:30},className:"p-6 bg-white/5 cursor-pointer hover:bg-gradient-to-br hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300",onMouseEnter:()=>P("right"),onMouseLeave:()=>P(null),onClick:()=>{E(D=>({...D,profileId:_[1].id})),x()},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-white font-bold text-lg",children:_[1].name.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:_[1].name}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-lg",children:Pp("desktop",_[1].name==="Артур")}),d.jsx("span",{className:"text-zinc-400",children:Cp("desktop",_[1].name==="Артур")})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Текущий баланс"}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[s((r[_[1].id]||{balance:0}).balance).toFixed(2),d.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:i})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-green-400 font-medium text-sm",children:["+",s((r[_[1].id]||{income:0}).income).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Доходы"})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 text-center",children:[d.jsxs("div",{className:"text-red-400 font-medium text-sm",children:["-",s((r[_[1].id]||{expense:0}).expense).toFixed(2)," ",i]}),d.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Расходы"})]})]})]})]})]})})}),t.length>2&&d.jsx(ie.div,{variants:j,children:d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:[d.jsx("div",{className:"lg:col-span-2 xl:col-span-2",children:d.jsxs("div",{className:"glass-card p-6 rounded-2xl h-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Профили семьи"}),d.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:_.map((D,T)=>{const v=r[D.id]||{balance:0,income:0,expense:0};return d.jsx(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:T*.1},children:d.jsx(Y4,{name:D.name,balance:s(v.balance).toFixed(2),income:s(v.income).toFixed(2),expense:s(v.expense).toFixed(2),currency:i,online:D.name==="Артур",deviceType:D.name==="Артур"?h:"desktop",onClick:()=>{E(A=>({...A,profileId:D.id})),x()}})},D.id)})})]})}),d.jsx("div",{children:d.jsxs(ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"glass-card p-6 rounded-2xl",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Общая статистика"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-wider mb-1",children:"Общий баланс"}),d.jsxs("p",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[s(n.balance).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-green-500/10 border border-green-500/20",children:[d.jsx("span",{className:"text-green-400 text-sm",children:"Доходы"}),d.jsxs("span",{className:"text-green-400 font-medium",children:["+",s(n.income).toFixed(2)," ",i]})]}),d.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("span",{className:"text-red-400 text-sm",children:"Расходы"}),d.jsxs("span",{className:"text-red-400 font-medium",children:["-",s(n.expense).toFixed(2)," ",i]})]})]})]})]})})]})}),d.jsx(ki,{open:p,onClose:()=>m(!1),title:"Добавить операцию",children:d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Тип операции"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"income",label:"Доход",color:"green"},{value:"expense",label:"Расход",color:"red"}].map(D=>d.jsx("button",{type:"button",onClick:()=>E(T=>({...T,type:D.value,categoryId:""})),className:`p-3 rounded-xl font-medium transition-all duration-300 ${y.type===D.value?`bg-${D.color}-500/20 text-${D.color}-400 border border-${D.color}-500/30`:"bg-white/5 text-zinc-400 border border-white/10 hover:bg-white/10"}`,children:D.label},D.value))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Сумма"}),d.jsx("input",{className:"input",type:"number",placeholder:"0.00",value:y.amount,onChange:D=>E(T=>({...T,amount:D.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Категория"}),d.jsxs("select",{className:"input",value:y.categoryId,onChange:D=>E(T=>({...T,categoryId:D.target.value})),required:!0,children:[d.jsx("option",{value:"",children:"Выберите категорию"}),e.filter(D=>!D.type||D.type===y.type||D.type==="both").map(D=>d.jsxs("option",{value:D.id,children:[D.emoji," ",D.name]},D.id))]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"label",children:"Заметка (необязательно)"}),d.jsx("input",{className:"input",placeholder:"Описание операции",value:y.note,onChange:D=>E(T=>({...T,note:D.target.value}))})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-3 rounded-xl font-medium text-zinc-300 hover:text-white transition-all duration-300 hover:scale-[1.02]",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Отмена"}),d.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.3)"},children:"Добавить"})]})]})})]})}function J4(){const{categories:t,addCategory:e,updateCategory:n,deleteCategory:r}=Sn(),[i,s]=N.useState(!1),[o,a]=N.useState(null),[l,c]=N.useState(""),[h,p]=N.useState("🍔"),[m,y]=N.useState("expense"),[E,I]=N.useState(""),P=async S=>{S.preventDefault();const j={name:l,emoji:h,type:m,limit:E?parseFloat(E):0};o?await n(o.id,j):await e(j),s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},_=S=>{a(S),c(S.name),p(S.emoji||"🍔"),y(S.type||"expense"),I(S.limit||""),s(!0)},x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(ie.div,{variants:x,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(ie.div,{variants:b,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Категории"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"Управление категориями расходов"})]}),d.jsxs("button",{className:"btn-primary px-6 py-3 flex items-center gap-2 hover:scale-105 transition-transform rounded-2xl",onClick:()=>s(!0),children:[d.jsx("span",{className:"text-lg",children:"+"}),"Добавить категорию"]})]}),d.jsx(ie.div,{variants:b,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Всего категорий"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.filter(S=>S.limit>0).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"С лимитами"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.reduce((S,j)=>S+(j.limit||0),0).toFixed(0)}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Общий лимит PLN"})]})]})}),t.length>0?d.jsxs(ie.div,{variants:b,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Ваши категории"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.jsx(Ya,{children:t.map((S,j)=>d.jsxs(ie.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:j*.1},className:"glass-card p-6 rounded-2xl hover:bg-gradient-to-br hover:from-blue-500/10 hover:to-purple-500/10 transition-all duration-300 group",children:[d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-xl",children:S.emoji||"📂"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-white text-lg",children:S.name}),S.limit>0&&d.jsxs("p",{className:"text-sm text-zinc-400",children:["Лимит: ",d.jsxs("span",{className:"text-amber-400 font-medium",children:[S.limit," PLN"]})]})]})]})}),d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>_(S),className:"btn-secondary flex-1 py-2 text-sm rounded-xl",children:"✏️ Изменить"}),d.jsx("button",{onClick:()=>r(S.id),className:"btn-danger py-2 px-4 text-sm rounded-xl",children:"🗑️"})]})]},S.id))})})]}):d.jsxs(ie.div,{variants:b,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📂"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:"Пока нет категорий"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:"Создайте первую категорию для организации расходов"}),d.jsx("button",{className:"btn-primary px-6 py-3 mx-auto rounded-2xl",onClick:()=>s(!0),children:"Создать категорию"})]}),d.jsx(ki,{open:i,onClose:()=>{s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},title:o?"Изменить категорию":"Новая категория",children:d.jsxs("form",{onSubmit:P,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl",placeholder:"🍕",value:h,onChange:S=>p(S.target.value),maxLength:2,required:!0}),d.jsx("p",{className:"text-xs text-zinc-500",children:"Выберите подходящий эмодзи"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название"}),d.jsx("input",{className:"input w-full",placeholder:"Продукты",value:l,onChange:S=>c(S.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Тип"}),d.jsxs("select",{className:"input w-full",value:m,onChange:S=>y(S.target.value),children:[d.jsx("option",{value:"income",children:"Доходы"}),d.jsx("option",{value:"expense",children:"Расходы"}),d.jsx("option",{value:"both",children:"Универсальная"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Лимит расходов (необязательно)"}),d.jsx("input",{className:"input w-full",type:"number",placeholder:"2000",value:E,onChange:S=>I(S.target.value),min:"0",step:"0.01"}),d.jsx("p",{className:"text-xs text-zinc-500",children:"Установите лимит трат по этой категории"})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{s(!1),a(null),c(""),p("🍔"),y("expense"),I("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!l.trim(),className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:o?"Сохранить":"Добавить"})]})]})})]})}function J_({value:t=0,max:e=100,showLabel:n=!0,size:r="md",color:i="primary",className:s=""}){const o=Math.min(100,Math.max(0,Math.round(t/(e||1)*100))),a={sm:"h-2",md:"h-3",lg:"h-4"},l={primary:"from-blue-500 to-purple-600",success:"from-green-500 to-emerald-600",warning:"from-yellow-500 to-orange-600",danger:"from-red-500 to-pink-600",info:"from-cyan-500 to-blue-600"};return d.jsxs("div",{className:`space-y-2 ${s}`,children:[n&&d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-400",children:"Прогресс"}),d.jsxs("span",{className:"font-medium text-zinc-300",children:[o,"% (",t.toLocaleString()," / ",e.toLocaleString(),")"]})]}),d.jsx("div",{className:`w-full bg-zinc-800/50 rounded-full overflow-hidden backdrop-blur-sm ${a[r]}`,children:d.jsx(ie.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${l[i]} relative overflow-hidden`,children:d.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}})})})]})}function Z4(){const{goals:t,addGoal:e,editGoal:n,deleteGoal:r,contributeToGoal:i,profiles:s,currency:o,convert:a,getGoalSaved:l}=Sn(),[c,h]=N.useState(!1),[p,m]=N.useState(!1),[y,E]=N.useState(!1),[I,P]=N.useState(""),[_,x]=N.useState("🎯"),[b,S]=N.useState(""),[j,D]=N.useState(""),[T,v]=N.useState(null),[A,k]=N.useState(""),[R,V]=N.useState(""),[C,Ae]=N.useState(null),[tn,zt]=N.useState(!1),[ue,$]=N.useState(null),X=async q=>{q.preventDefault(),await e({name:I,emoji:_,amount:parseFloat(b),deadline:j}),h(!1),P(""),x("🎯"),S(""),D("")},Z=async q=>{q.preventDefault(),!(!T||!A||!R)&&(await i(T.id,A,parseFloat(R)),E(!1),k(""),V(""))},ve=q=>{Ae(q),P(q.name),x(q.emoji||"🎯"),S(q.amount.toString()),D(q.deadline||""),m(!0)},pe=async q=>{q.preventDefault(),await n(C.id,{name:I,emoji:_,amount:parseFloat(b),deadline:j}),m(!1),Ae(null),P(""),x("🎯"),S(""),D("")},we=async q=>{$(q),zt(!0)},$t=async()=>{try{await r(ue.id),zt(!1),$(null)}catch(q){console.error("Error deleting goal:",q)}},Wt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Je={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},Dt=t.reduce((q,nn)=>q+l(nn.id),0),vo=t.reduce((q,nn)=>q+nn.amount,0),xo=t.filter(q=>l(q.id)>=q.amount).length;return d.jsxs(ie.div,{variants:Wt,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(ie.div,{variants:Je,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Цели"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"Планируйте и достигайте финансовых целей"})]}),d.jsxs("button",{className:"btn-primary px-6 py-3 flex items-center gap-2 hover:scale-105 transition-transform rounded-2xl",onClick:()=>h(!0),children:[d.jsx("span",{className:"text-lg",children:"+"}),"Добавить цель"]})]}),d.jsx(ie.div,{variants:Je,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Всего целей"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:xo}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Достигнуто"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:a(Dt).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Накоплено ",o]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-400",children:a(vo).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Общая цель ",o]})]})]})}),t.length>0?d.jsxs(ie.div,{variants:Je,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Ваши цели"}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.jsx(Ya,{children:t.map((q,nn)=>{const F=l(q.id),O=Math.min(F/q.amount*100,100),W=F>=q.amount,se=q.deadline?Math.ceil((new Date(q.deadline)-new Date)/(1e3*60*60*24)):null;return d.jsxs(ie.div,{variants:Je,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:nn*.1},className:`glass-card p-6 rounded-2xl hover:bg-gradient-to-br hover:from-blue-500/10 hover:to-purple-500/10 transition-all duration-300 ${W?"ring-2 ring-green-400/50":""}`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-primary flex items-center justify-center text-xl",children:q.emoji||"🎯"}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold text-white text-lg flex items-center gap-2",children:[q.name,W&&d.jsx("span",{className:"text-green-400",children:"✅"})]}),q.deadline&&d.jsx("p",{className:"text-sm text-zinc-400",children:se>0?d.jsxs("span",{className:se<=7?"text-orange-400":"text-zinc-400",children:["📅 ",se," дней осталось"]}):se===0?d.jsx("span",{className:"text-red-400",children:"📅 Сегодня дедлайн!"}):d.jsxs("span",{className:"text-red-400",children:["📅 Просрочено на ",Math.abs(se)," дней"]})})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ve(q),className:"btn-secondary py-2 px-3 text-sm rounded-xl hover:scale-105 transition-transform",title:"Редактировать",children:"✏️"}),d.jsx("button",{onClick:()=>we(q),className:"btn-secondary py-2 px-3 text-sm rounded-xl hover:scale-105 transition-transform hover:bg-red-500/20",title:"Удалить",children:"🗑️"}),d.jsx("button",{onClick:()=>{v(q),E(!0)},className:"btn-secondary py-2 px-4 text-sm rounded-xl hover:scale-105 transition-transform",disabled:W,children:"💰 Пополнить"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(J_,{value:F,max:q.amount,color:W?"success":O>=75?"warning":"primary",showLabel:!0}),d.jsxs("div",{className:"flex justify-between items-center text-sm",children:[d.jsxs("span",{className:"text-zinc-400",children:["Прогресс: ",O.toFixed(1),"%"]}),d.jsxs("span",{className:"text-white font-medium",children:[a(F).toFixed(2)," / ",a(q.amount).toFixed(2)," ",o]})]}),W&&d.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 text-center",children:d.jsx("span",{className:"text-green-400 font-medium",children:"🎉 Цель достигнута!"})})]})]},q.id)})})})]}):d.jsxs(ie.div,{variants:Je,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"🎯"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:"Пока нет целей"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:"Поставьте первую финансовую цель и начните копить"}),d.jsx("button",{className:"btn-primary px-6 py-3 mx-auto rounded-2xl",onClick:()=>h(!0),children:"Поставить цель"})]}),d.jsx(ki,{open:c,onClose:()=>{h(!1),P(""),x("🎯"),S(""),D("")},title:"Новая цель",children:d.jsxs("form",{onSubmit:X,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl rounded-xl",placeholder:"🎯",value:_,onChange:q=>x(q.target.value),maxLength:2})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название цели"}),d.jsx("input",{className:"input w-full rounded-xl",placeholder:"Подушка безопасности",value:I,onChange:q=>P(q.target.value),required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Целевая сумма"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"10000",value:b,onChange:q=>S(q.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дедлайн (необязательно)"}),d.jsx("input",{className:"input w-full rounded-xl",type:"date",value:j,onChange:q=>D(q.target.value),min:new Date().toISOString().split("T")[0]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{h(!1),P(""),x("🎯"),S(""),D("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!I.trim()||!b,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Создать цель"})]})]})}),d.jsx(ki,{open:p,onClose:()=>{m(!1),Ae(null),P(""),x("🎯"),S(""),D("")},title:"Редактировать цель",children:d.jsxs("form",{onSubmit:pe,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Эмодзи"}),d.jsx("input",{className:"input w-full text-center text-2xl rounded-xl",placeholder:"🎯",value:_,onChange:q=>x(q.target.value),maxLength:2})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Название цели"}),d.jsx("input",{className:"input w-full rounded-xl",placeholder:"Подушка безопасности",value:I,onChange:q=>P(q.target.value),required:!0})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Целевая сумма"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"10000",value:b,onChange:q=>S(q.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дедлайн (необязательно)"}),d.jsx("input",{className:"input w-full rounded-xl",type:"date",value:j,onChange:q=>D(q.target.value),min:new Date().toISOString().split("T")[0]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{m(!1),Ae(null),P(""),x("🎯"),S(""),D("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!I.trim()||!b,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Сохранить"})]})]})}),d.jsx(ki,{open:y,onClose:()=>{E(!1),k(""),V("")},title:`Пополнить цель "${T==null?void 0:T.name}"`,children:d.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Выберите профиль"}),d.jsxs("select",{className:"input w-full rounded-xl",value:A,onChange:q=>k(q.target.value),required:!0,children:[d.jsx("option",{value:"",children:"Выберите профиль для списания"}),s.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Сумма пополнения"}),d.jsx("input",{className:"input w-full rounded-xl",type:"number",placeholder:"1000",value:R,onChange:q=>V(q.target.value),min:"0",step:"0.01",required:!0}),d.jsxs("p",{className:"text-xs text-zinc-500",children:["Сумма в ",o]})]}),T&&d.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:d.jsxs("div",{className:"text-sm text-zinc-300",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("span",{children:"Текущий прогресс:"}),d.jsxs("span",{children:[a(l(T.id)).toFixed(2)," / ",a(T.amount).toFixed(2)," ",o]})]}),d.jsx(J_,{value:l(T.id),max:T.amount,size:"sm",showLabel:!1})]})}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{E(!1),k(""),V("")},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",disabled:!A||!R,className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Пополнить"})]})]})}),d.jsx(ki,{open:tn,onClose:()=>{zt(!1),$(null)},title:"Удаление цели",children:d.jsxs("div",{className:"space-y-6",children:[ue&&d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"text-4xl mb-4",children:ue.emoji||"🎯"}),d.jsxs("h3",{className:"text-xl font-medium text-zinc-200",children:['Удалить цель "',ue.name,'"?']}),d.jsx("p",{className:"text-zinc-400",children:"Это действие нельзя будет отменить. Все данные о цели и прогрессе будут удалены."}),d.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-4 mt-4 text-left",children:[d.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[d.jsx("span",{className:"text-zinc-400",children:"Целевая сумма:"}),d.jsxs("span",{className:"text-white",children:[a(ue.amount).toFixed(2)," ",o]})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-400",children:"Накоплено:"}),d.jsxs("span",{className:"text-white",children:[a(l(ue.id)).toFixed(2)," ",o]})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{onClick:()=>{zt(!1),$(null)},className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{onClick:$t,className:"flex-1 px-6 py-3 rounded-xl border border-red-500/30 text-white hover:bg-gradient-to-r hover:from-red-500/20 hover:to-red-600/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.2))",backdropFilter:"blur(10px)"},children:"Удалить"})]})]})})]})}function eF(){const{operations:t,profiles:e,categories:n,currency:r,convert:i,deleteOperation:s}=Sn(),{playSound:o}=bd(),[a,l]=N.useState({profile:"",category:"",type:"",date:"",search:""}),[c,h]=N.useState(!1),p=S=>{s(S),o("delete")},m=S=>{const j=S!=null&&S.toDate?S.toDate():new Date(S),D=String(j.getDate()).padStart(2,"0"),T=String(j.getMonth()+1).padStart(2,"0"),v=j.getFullYear(),A=String(j.getHours()).padStart(2,"0"),k=String(j.getMinutes()).padStart(2,"0");return`${D}.${T}.${v} ${A}:${k}`},y=S=>{const j=S!=null&&S.toDate?S.toDate():new Date(S),D=new Date,T=new Date(D);if(T.setDate(T.getDate()-1),j.toDateString()===D.toDateString())return"Сегодня";if(j.toDateString()===T.toDateString())return"Вчера";const v=String(j.getDate()).padStart(2,"0"),A=String(j.getMonth()+1).padStart(2,"0");return`${v}.${A}`},E={income:{label:"Доход",color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/20",icon:"💰"},expense:{label:"Расход",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/20",icon:"💸"},transfer:{label:"Перевод",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20",icon:"🔄"},goal:{label:"Цель",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20",icon:"🎯"}},I=N.useMemo(()=>t.filter(S=>{var j,D,T,v,A;if(a.profile&&S.profileId!==a.profile||a.category&&S.categoryId!==a.category||a.type&&S.type!==a.type)return!1;if(a.date){const k=(j=S.date)!=null&&j.toDate?S.date.toDate():new Date(S.date),R=new Date(a.date);if(k.toDateString()!==R.toDateString())return!1}if(a.search){const k=a.search.toLowerCase(),R=e.find(C=>C.id===S.profileId),V=n.find(C=>C.id===S.categoryId);if(!((D=S.note)!=null&&D.toLowerCase().includes(k))&&!((T=R==null?void 0:R.name)!=null&&T.toLowerCase().includes(k))&&!((v=V==null?void 0:V.name)!=null&&v.toLowerCase().includes(k))&&!((A=E[S.type])!=null&&A.label.toLowerCase().includes(k)))return!1}return!0}).sort((S,j)=>{var v,A;const D=(v=S.date)!=null&&v.toDate?S.date.toDate():new Date(S.date);return((A=j.date)!=null&&A.toDate?j.date.toDate():new Date(j.date))-D}),[t,a,e,n]),P=N.useMemo(()=>{const S=I.filter(v=>v.type==="income").reduce((v,A)=>v+A.amount,0),j=I.filter(v=>v.type==="expense").reduce((v,A)=>v+A.amount,0),D=I.filter(v=>v.type==="transfer").reduce((v,A)=>v+A.amount,0),T=I.filter(v=>v.type==="goal").reduce((v,A)=>v+A.amount,0);return{totalIncome:S,totalExpense:j,totalTransfer:D,totalGoal:T}},[I]),_=()=>{l({profile:"",category:"",type:"",date:"",search:""})},x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(ie.div,{variants:x,initial:"hidden",animate:"visible",className:"space-y-8",children:[d.jsxs(ie.div,{variants:b,className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Операции"}),d.jsx("p",{className:"text-zinc-400 mt-1",children:"История всех финансовых операций"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>h(!c),className:`btn-secondary px-4 py-2 rounded-xl flex items-center gap-2 transition-all ${c?"bg-blue-500/20 text-blue-400":""}`,children:["🔍 Фильтры",d.jsx("span",{className:`transition-transform ${c?"rotate-180":""}`,children:"▼"})]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Показано: ",d.jsx("span",{className:"text-white font-medium",children:I.length})," из ",t.length]})]})]}),d.jsx(ie.div,{variants:b,className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden",style:{background:`
            linear-gradient(to bottom, 
              rgba(255, 255, 255, 0.15) 0%, 
              rgba(255, 255, 255, 0.08) 25%,
              rgba(255, 255, 255, 0.04) 50%,
              rgba(255, 255, 255, 0.02) 70%,
              rgba(25, 25, 35, 0.3) 90%,
              rgba(25, 25, 35, 0.6) 97%,
              rgba(25, 25, 35, 0.8) 100%
            )
          `,boxShadow:`
            0 8px 32px 0 rgba(0, 0, 0, 0.6),
            inset 0 2px 0 rgba(255, 255, 255, 0.3)
          `,backdropFilter:"blur(25px) saturate(120%) brightness(0.9)"},children:d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["+",i(P.totalIncome).toFixed(0)]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Доходы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["-",i(P.totalExpense).toFixed(0)]}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Расходы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i(P.totalTransfer).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["Переводы ",r]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i(P.totalGoal).toFixed(0)}),d.jsxs("div",{className:"text-sm text-zinc-400",children:["В цели ",r]})]})]})}),d.jsx(Ya,{children:c&&d.jsxs(ie.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",className:"glass-card p-6 rounded-2xl space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Фильтры"}),d.jsx("button",{onClick:_,className:"text-sm text-zinc-400 hover:text-white transition-colors",children:"Очистить все"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Поиск"}),d.jsx("input",{type:"text",className:"input w-full rounded-xl",placeholder:"Поиск по заметке, профилю...",value:a.search,onChange:S=>l(j=>({...j,search:S.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Профиль"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.profile,onChange:S=>l(j=>({...j,profile:S.target.value})),children:[d.jsx("option",{value:"",children:"Все профили"}),e.map(S=>d.jsx("option",{value:S.id,children:S.name},S.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Тип операции"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.type,onChange:S=>l(j=>({...j,type:S.target.value})),children:[d.jsx("option",{value:"",children:"Все типы"}),Object.entries(E).map(([S,j])=>d.jsxs("option",{value:S,children:[j.icon," ",j.label]},S))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Категория"}),d.jsxs("select",{className:"input w-full rounded-xl",value:a.category,onChange:S=>l(j=>({...j,category:S.target.value})),children:[d.jsx("option",{value:"",children:"Все категории"}),n.map(S=>d.jsxs("option",{value:S.id,children:[S.emoji," ",S.name]},S.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300",children:"Дата"}),d.jsx("input",{type:"date",className:"input w-full rounded-xl",value:a.date,onChange:S=>l(j=>({...j,date:S.target.value}))})]})]})]})}),I.length>0?d.jsx(ie.div,{variants:b,className:"space-y-4",children:d.jsx("div",{className:"space-y-3",children:d.jsx(Ya,{children:I.map((S,j)=>{const D=e.find(A=>A.id===S.profileId),T=n.find(A=>A.id===S.categoryId),v=E[S.type];return d.jsx(ie.div,{variants:b,initial:"hidden",animate:"visible",exit:"hidden",transition:{delay:j*.02},className:"glass-card p-4 rounded-2xl hover:bg-white/5 transition-all duration-300 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-2xl ${v.bg} ${v.border} border flex items-center justify-center text-xl`,children:v.icon}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:`inline-block px-2 py-1 rounded-lg text-xs font-medium ${v.bg} ${v.color} ${v.border} border`,children:v.label}),T&&d.jsxs("span",{className:"text-xs text-zinc-400",children:[T.emoji," ",T.name]})]}),d.jsx("div",{className:"text-sm text-zinc-300",children:S.note||"Без описания"}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-500 mt-1",children:[d.jsxs("span",{children:["👤 ",(D==null?void 0:D.name)||"Неизвестно"]}),d.jsxs("span",{children:["📅 ",m(S.date)]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:`text-lg font-bold ${v.color}`,children:[S.type==="expense"?"-":"+",i(S.amount).toFixed(2)," ",r]}),d.jsx("div",{className:"text-xs text-zinc-400",children:y(S.date)})]}),d.jsx("button",{onClick:()=>p(S.id),className:"opacity-0 group-hover:opacity-100 p-2 rounded-xl hover:bg-red-500/20 text-red-400 hover:text-red-300 transition-all",title:"Удалить операцию",children:"🗑️"})]})]})},S.id)})})})}):d.jsxs(ie.div,{variants:b,className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📊"}),d.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:t.length===0?"Нет операций":"Операции не найдены"}),d.jsx("p",{className:"text-zinc-400 mb-6",children:t.length===0?"Добавьте первую операцию через главную страницу":"Попробуйте изменить параметры поиска"}),t.length>0&&d.jsx("button",{onClick:_,className:"btn-primary px-6 py-3 rounded-2xl",children:"Очистить фильтры"})]})]})}function tF(){var V;const{currency:t,setCurrency:e,theme:n,toggleTheme:r,rates:i,leaveFamily:s,budgetId:o}=Sn(),{user:a}=Bn(),{playSound:l}=bd(),[c,h]=N.useState(!0),[p,m]=N.useState(!0),[y,E]=N.useState(!0),[I,P]=N.useState("ru"),[_,x]=N.useState(localStorage.getItem("soundEnabled")!=="false");N.useEffect(()=>{localStorage.setItem("soundEnabled",_)},[_]);const b=C=>{x(C),C&&l("success")},S=()=>{r(),l("click")},j=()=>{l("success"),console.log("Экспорт данных...")},D=()=>{l("notification"),console.log("Импорт данных...")},T=()=>{l("add"),console.log("Синхронизация...")},v=()=>{l("error"),console.log("Очистка данных...")},A=async()=>{if(!o){alert("Вы не состоите в семье");return}if(window.confirm("Вы уверены, что хотите покинуть семью? Это действие нельзя отменить.")){l("warning");try{await s()?(l("success"),alert("Вы успешно покинули семью")):(l("error"),alert("Ошибка при выходе из семьи. Попробуйте позже."))}catch(C){console.error("Error leaving family:",C),l("error"),alert("Произошла ошибка. Проверьте подключение к интернету.")}}},k=[{value:"PLN",label:"PLN — Польский злотый",flag:"🇵🇱"},{value:"USD",label:"USD — Доллар США",flag:"🇺🇸"},{value:"UAH",label:"UAH — Украинская гривна",flag:"🇺🇦"},{value:"EUR",label:"EUR — Евро",flag:"🇪🇺"},{value:"RUB",label:"RUB — Российский рубль",flag:"🇷🇺"}],R=[{value:"ru",label:"Русский",flag:"🇷🇺"},{value:"en",label:"English",flag:"🇺🇸"},{value:"pl",label:"Polski",flag:"🇵🇱"},{value:"uk",label:"Українська",flag:"🇺🇦"}];return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"⚙️ Настройки"}),d.jsx("p",{className:"text-zinc-400",children:"Персонализируйте свой опыт работы с Budget Buddy"})]}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"👤 Профиль"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((V=a==null?void 0:a.email)==null?void 0:V.charAt(0).toUpperCase())||"U"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-white",children:(a==null?void 0:a.email)||"Не авторизован"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Основной аккаунт"})]})]}),d.jsx("div",{className:"p-3 rounded-xl",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)"},children:d.jsx("div",{className:"text-sm text-green-400",children:"✅ Аккаунт подтвержден"})})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🎨 Внешний вид"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Тема оформления"}),d.jsxs("button",{onClick:S,className:"w-full p-3 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] flex items-center justify-center gap-2",style:{background:n==="dark"?"linear-gradient(135deg, #1e293b, #334155)":"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("span",{className:"text-lg",children:n==="dark"?"🌙":"☀️"}),n==="dark"?"Тёмная тема":"Светлая тема"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Язык интерфейса"}),d.jsx("select",{className:"w-full px-4 py-3 rounded-xl text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},value:I,onChange:C=>P(C.target.value),children:R.map(C=>d.jsxs("option",{value:C.value,style:{background:"#1e293b"},children:[C.flag," ",C.label]},C.value))})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"💰 Валюта и финансы"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Основная валюта"}),d.jsx("select",{className:"w-full px-4 py-3 rounded-xl text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},value:t,onChange:C=>e(C.target.value),children:k.map(C=>d.jsxs("option",{value:C.value,style:{background:"#1e293b"},children:[C.flag," ",C.label]},C.value))})]}),d.jsx("div",{children:d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsx("span",{className:"text-white",children:"Показывать десятичные разряды"}),d.jsx("input",{type:"checkbox",checked:y,onChange:C=>E(C.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-green-500 checked:border-green-500 transition-all duration-300"})]})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Текущие курсы валют"}),d.jsxs("div",{className:"space-y-2",children:[Object.entries(i||{}).map(([C,Ae])=>d.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsxs("span",{className:"text-zinc-400",children:[C,":"]}),d.jsxs("span",{className:"text-white font-medium",children:[Ae.toFixed(2)," PLN"]})]},C)),d.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.03)"},children:[d.jsx("span",{className:"text-zinc-400",children:"PLN:"}),d.jsx("span",{className:"text-white font-medium",children:"1.00 PLN"})]})]})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🔔 Уведомления и поведение"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Уведомления"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Получать уведомления о транзакциях"})]}),d.jsx("input",{type:"checkbox",checked:c,onChange:C=>h(C.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-blue-500 checked:border-blue-500 transition-all duration-300"})]}),d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Автосохранение"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Автоматически сохранять изменения"})]}),d.jsx("input",{type:"checkbox",checked:p,onChange:C=>m(C.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-green-500 checked:border-green-500 transition-all duration-300"})]}),d.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl transition-all duration-300 hover:bg-white/5",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-white font-medium",children:"Звуковые эффекты"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Звуки при взаимодействии"})]}),d.jsx("input",{type:"checkbox",checked:_,onChange:C=>b(C.target.checked),className:"w-5 h-5 rounded bg-transparent border-2 border-white/30 checked:bg-purple-500 checked:border-purple-500 transition-all duration-300"})]})]})]})]}),d.jsxs("div",{className:"p-6 rounded-2xl",style:{background:`
            linear-gradient(145deg, 
              rgba(255, 255, 255, 0.1) 0%, 
              rgba(255, 255, 255, 0.05) 100%
            )
          `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"🛠️ Дополнительные действия"}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[d.jsxs("button",{onClick:j,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(99, 102, 241, 0.1))",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"📊"}),d.jsx("div",{className:"text-white font-medium",children:"Экспорт данных"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Скачать данные"})]}),d.jsxs("button",{onClick:D,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1))",border:"1px solid rgba(34, 197, 94, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"📥"}),d.jsx("div",{className:"text-white font-medium",children:"Импорт данных"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Загрузить данные"})]}),d.jsxs("button",{onClick:T,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🔄"}),d.jsx("div",{className:"text-white font-medium",children:"Синхронизация"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Синхронизировать"})]}),o&&d.jsxs("button",{onClick:A,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.1))",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🚪"}),d.jsx("div",{className:"text-white font-medium",children:"Покинуть семью"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Выйти из группы"})]}),d.jsxs("button",{onClick:v,className:"p-4 rounded-xl text-left transition-all duration-300 hover:scale-105 group",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[d.jsx("div",{className:"text-2xl mb-2 group-hover:scale-110 transition-transform duration-300",children:"🗑️"}),d.jsx("div",{className:"text-white font-medium",children:"Очистить данные"}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Удалить все"})]})]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Z_=t=>{const e=rF(t);return e.charAt(0).toUpperCase()+e.slice(1)},m1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),iF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...sF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:m1("lucide",i),...!s&&!iF(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>N.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=(t,e)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(oF,{ref:s,iconNode:e,className:m1(`lucide-${nF(Z_(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Z_(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lF=g1("square-pen",aF);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cF=g1("triangle-alert",uF);function dF(){const{categories:t,spentByCategory:e,currency:n,convert:r,setLimitForCategory:i}=Sn(),[s,o]=N.useState(null),[a,l]=N.useState(""),c=async(P,_)=>{try{await i(P,_),o(null),l("")}catch(x){console.error("Ошибка сохранения лимита:",x)}},h=P=>{var _;o(P.id),l(((_=P.limit)==null?void 0:_.toString())||"")},p=()=>{o(null),l("")},m=P=>{const _=e[P.id]||0,x=P.limit||0,b=x>0?Math.min(_/x*100,100):0,S=Math.max(x-_,0);return{spent:_,limit:x,percentage:b,remaining:S}},y=P=>P>=100?"red":P>=80?"yellow":"green",E={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,staggerChildren:.1}}},I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return d.jsxs(ie.div,{variants:E,initial:"hidden",animate:"visible",className:"min-h-screen p-4 space-y-6",children:[d.jsxs(ie.div,{variants:I,className:"text-center space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Лимиты категорий"}),d.jsx("p",{className:"text-zinc-400",children:"Управляйте бюджетами для каждой категории"})]}),d.jsxs(ie.div,{variants:I,className:"glass-card p-6 rounded-2xl",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Общая статистика"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"text-center p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.filter(P=>P.limit>0).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Категорий с лимитами"})]}),d.jsxs("div",{className:"text-center p-4 rounded-xl bg-green-500/10 border border-green-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.filter(P=>{const{percentage:_}=m(P);return P.limit>0&&_<80}).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"В безопасной зоне"})]}),d.jsxs("div",{className:"text-center p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[d.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.filter(P=>{const{percentage:_}=m(P);return P.limit>0&&_>=100}).length}),d.jsx("div",{className:"text-sm text-zinc-400",children:"Лимиты превышены"})]})]})]}),d.jsxs(ie.div,{variants:I,className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-white",children:"Категории"}),d.jsx("div",{className:"grid gap-4",children:t.map(P=>{const{spent:_,limit:x,percentage:b,remaining:S}=m(P),j=y(b),D=s===P.id;return d.jsx(ie.div,{variants:I,className:"glass-card p-6 rounded-2xl",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:P.emoji}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:P.name}),d.jsx("div",{className:"text-sm text-zinc-400",children:P.type==="income"?"Доходы":P.type==="expense"?"Расходы":"Универсальная"})]})]}),d.jsx("div",{className:"flex items-center gap-2",children:!D&&d.jsx("button",{onClick:()=>h(P),className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:d.jsx(lF,{className:"w-4 h-4 text-zinc-400"})})})]}),d.jsxs("div",{className:"space-y-3",children:[D?d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"number",className:"input flex-1",placeholder:"Введите лимит",value:a,onChange:T=>l(T.target.value),onKeyPress:T=>{T.key==="Enter"&&c(P.id,Number(a))}}),d.jsx("button",{onClick:()=>c(P.id,Number(a)),className:"px-4 py-2 rounded-xl bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors",children:"Сохранить"}),d.jsx("button",{onClick:p,className:"px-4 py-2 rounded-xl bg-white/5 text-zinc-400 hover:bg-white/10 transition-colors",children:"Отмена"})]}):d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-zinc-400",children:"Лимит"}),d.jsx("div",{className:"text-lg font-semibold text-white",children:x>0?`${r(x).toFixed(2)} ${n}`:"Не установлен"})]}),x>0&&d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`text-sm font-medium ${j==="red"?"text-red-400":j==="yellow"?"text-yellow-400":"text-green-400"}`,children:j==="red"?`Превышен на ${r(_-x).toFixed(2)} ${n}`:`${r(S).toFixed(2)} ${n} осталось`}),d.jsxs("div",{className:"text-xs text-zinc-400",children:[r(_).toFixed(2)," / ",r(x).toFixed(2)," ",n]})]})]}),x>0&&!D&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-500 ${j==="red"?"bg-red-500":j==="yellow"?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(b,100)}%`}})}),d.jsxs("div",{className:"flex justify-between text-xs text-zinc-400",children:[d.jsxs("span",{children:["0 ",n]}),d.jsxs("span",{children:[b.toFixed(1),"%"]}),d.jsxs("span",{children:[r(x).toFixed(0)," ",n]})]})]}),x>0&&b>=80&&!D&&d.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-xl ${j==="red"?"bg-red-500/10 border border-red-500/20 text-red-400":"bg-yellow-500/10 border border-yellow-500/20 text-yellow-400"}`,children:[d.jsx(cF,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:j==="red"?"Лимит превышен! Рекомендуется сократить расходы.":"Лимит почти исчерпан. Будьте осторожны с тратами."})]})]})]})},P.id)})})]})]})}function hF(){const{login:t}=Bn(),[e,n]=N.useState(""),[r,i]=N.useState(""),[s,o]=N.useState(null),[a,l]=N.useState(!1),c=al();async function h(p){p.preventDefault(),l(!0),o(null);try{await t(e,r),c("/")}catch(m){o(m.message==="Firebase: Error (auth/invalid-credential)."?"Неверный email или пароль":"Ошибка входа. Попробуйте еще раз")}finally{l(!1)}}return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:`
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
          linear-gradient(135deg, rgba(15, 15, 25, 0.95) 0%, rgba(25, 25, 40, 0.9) 100%)
        `},children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #6366f1, #8b5cf6)",filter:"blur(100px)"}}),d.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #8b5cf6, #06b6d4)",filter:"blur(80px)"}})]}),d.jsx("div",{className:"relative w-full max-w-md",children:d.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:`
              0 25px 50px rgba(0, 0, 0, 0.25),
              inset 0 1px 0 rgba(255, 255, 255, 0.2)
            `},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl shadow-lg",children:"🔐"}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"Вход"}),d.jsx("p",{className:"text-zinc-400 text-sm",children:"Добро пожаловать в Budget Buddy"})]}),s&&d.jsx("div",{className:"mb-6 p-4 rounded-xl text-red-300 text-sm",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(10px)"},children:s}),d.jsxs("form",{onSubmit:h,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш email",value:e,onChange:p=>n(p.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш пароль",value:r,onChange:p=>i(p.target.value),required:!0})]}),d.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 10px 25px rgba(99, 102, 241, 0.3)"},children:a?d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Вход..."]}):"Войти"})]}),d.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:d.jsxs("p",{className:"text-zinc-400 text-sm",children:["Нет аккаунта?"," ",d.jsx(Ds,{to:"/register",className:"text-blue-400 hover:text-blue-300 transition-colors font-medium",children:"Зарегистрироваться"})]})})]})})]})}function fF(){const{register:t}=Bn(),[e,n]=N.useState(""),[r,i]=N.useState(""),[s,o]=N.useState(""),[a,l]=N.useState(null),[c,h]=N.useState(!1),p=al();async function m(y){if(y.preventDefault(),r!==s){l("Пароли не совпадают");return}if(r.length<6){l("Пароль должен содержать минимум 6 символов");return}h(!0),l(null);try{await t(e,r),p("/")}catch(E){E.message.includes("email-already-in-use")?l("Этот email уже используется"):E.message.includes("weak-password")?l("Слишком простой пароль"):E.message.includes("invalid-email")?l("Неверный формат email"):l("Ошибка регистрации. Попробуйте еще раз")}finally{h(!1)}}return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:`
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
          linear-gradient(135deg, rgba(15, 15, 25, 0.95) 0%, rgba(25, 25, 40, 0.9) 100%)
        `},children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #6366f1, #8b5cf6)",filter:"blur(100px)"}}),d.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full opacity-10",style:{background:"linear-gradient(45deg, #8b5cf6, #06b6d4)",filter:"blur(80px)"}})]}),d.jsx("div",{className:"relative w-full max-w-md",children:d.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl",style:{background:`
              linear-gradient(145deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%
              )
            `,backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:`
              0 25px 50px rgba(0, 0, 0, 0.25),
              inset 0 1px 0 rgba(255, 255, 255, 0.2)
            `},children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-2xl shadow-lg",children:"✨"}),d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent mb-2",children:"Регистрация"}),d.jsx("p",{className:"text-zinc-400 text-sm",children:"Создайте аккаунт для управления бюджетом"})]}),a&&d.jsx("div",{className:"mb-6 p-4 rounded-xl text-red-300 text-sm",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(10px)"},children:a}),d.jsxs("form",{onSubmit:m,className:"space-y-5",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Введите ваш email",value:e,onChange:y=>n(y.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Минимум 6 символов",value:r,onChange:y=>i(y.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Подтвердите пароль"}),d.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl text-white placeholder-zinc-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},placeholder:"Повторите пароль",value:s,onChange:y=>o(y.target.value),required:!0})]}),d.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 rounded-xl font-medium text-white transition-all duration-300 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",boxShadow:"0 10px 25px rgba(139, 92, 246, 0.3)"},children:c?d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Создание аккаунта..."]}):"Создать аккаунт"})]}),d.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:d.jsxs("p",{className:"text-zinc-400 text-sm",children:["Уже есть аккаунт?"," ",d.jsx(Ds,{to:"/login",className:"text-purple-400 hover:text-purple-300 transition-colors font-medium",children:"Войти"})]})})]})})]})}function pF(){const{budgetId:t,budgetCode:e,createBudget:n,joinBudget:r,updateBudgetCode:i}=Sn(),[s,o]=N.useState(!1),[a,l]=N.useState(""),[c,h]=N.useState(e||""),p=async I=>{I.preventDefault(),await r(a),o(!1),l("")},m=async I=>{I.preventDefault(),c&&await i(c)},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return d.jsxs(ie.div,{className:"space-y-8",variants:y,initial:"hidden",animate:"visible",children:[d.jsx(ie.div,{variants:E,className:"text-center space-y-4",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-4xl lg:text-5xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"👨‍👩‍👧‍👦 Семья"}),d.jsx("p",{className:"text-zinc-400 text-lg",children:"Управление семейным бюджетом"})]})}),t?d.jsx(ie.div,{variants:E,className:"space-y-6",children:d.jsx(ie.div,{className:"backdrop-blur-2xl rounded-2xl p-6 shadow-2xl relative overflow-hidden border border-white/20",style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.15) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(25px) saturate(120%)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.6)"},children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"🏠 Ваш семейный бюджет"}),d.jsx("p",{className:"text-zinc-400",children:"Активен и готов к использованию"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"ID бюджета (Firestore)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{className:"input w-full bg-black/20 border-white/10 text-zinc-300",value:t,readOnly:!0}),d.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-zinc-500",children:"🔒"})]})]}),d.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Короткий код (редактируемый)"}),d.jsx("input",{className:"input w-full bg-black/20 border-white/10 text-white",value:c,onChange:I=>h(I.target.value),placeholder:"Введите удобный код для семьи"})]}),d.jsx("button",{type:"submit",className:"w-full px-6 py-3 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"💾 Сохранить код"})]})]})]})})}):d.jsx(ie.div,{variants:E,className:"space-y-6",children:d.jsx(ie.div,{className:"backdrop-blur-2xl rounded-2xl p-8 shadow-2xl relative overflow-hidden border border-white/20",style:{background:`
                linear-gradient(to bottom, 
                  rgba(255, 255, 255, 0.15) 0%, 
                  rgba(255, 255, 255, 0.08) 50%,
                  rgba(25, 25, 35, 0.8) 100%
                )
              `,backdropFilter:"blur(25px) saturate(120%)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.6)"},children:d.jsxs("div",{className:"text-center space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"🏠 Семейный бюджет"}),d.jsx("p",{className:"text-zinc-400",children:"Создайте новый или присоединитесь к существующему"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{className:"p-6 rounded-xl border border-green-500/30 text-white hover:bg-gradient-to-r hover:from-green-500/20 hover:to-emerald-500/20 transition-all duration-300 backdrop-blur-xl group",onClick:n,style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.2))",backdropFilter:"blur(10px)"},children:[d.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"✨"}),d.jsx("div",{className:"font-medium",children:"Создать семейный бюджет"}),d.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:"Новый бюджет для вашей семьи"})]}),d.jsxs("button",{className:"p-6 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl group",onClick:()=>o(!0),style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:[d.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"🤝"}),d.jsx("div",{className:"font-medium",children:"Присоединиться"}),d.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:"К существующему бюджету"})]})]})]})})}),d.jsx(ki,{open:s,onClose:()=>o(!1),title:"Присоединиться к семейному бюджету",children:d.jsxs("form",{onSubmit:p,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"ID или короткий код"}),d.jsx("input",{className:"input w-full",placeholder:"Введите ID или короткий код семьи",value:a,onChange:I=>l(I.target.value)})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-6 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},children:"Отмена"}),d.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl border border-blue-500/30 text-white hover:bg-gradient-to-r hover:from-blue-500/20 hover:to-purple-500/20 transition-all duration-300 backdrop-blur-xl",style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))",backdropFilter:"blur(10px)"},children:"Присоединиться"})]})]})})]})}function mF(){const{user:t,loading:e,error:n}=Bn(),{budgetId:r,budgetCode:i,profiles:s,categories:o}=Sn();return d.jsxs("div",{className:"card p-6 space-y-4 max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"🔧 Диагностика"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Аутентификация"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["Загрузка: ",e?"✅":"❌"]}),d.jsxs("div",{children:["Ошибка: ",n||"Нет"]}),d.jsxs("div",{children:["Пользователь: ",t?`✅ ${t.email}`:"❌"]}),d.jsxs("div",{children:["UID: ",(t==null?void 0:t.uid)||"Нет"]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Бюджет"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["ID бюджета: ",r||"Нет"]}),d.jsxs("div",{children:["Код бюджета: ",i||"Нет"]}),d.jsxs("div",{children:["Профилей: ",s.length]}),d.jsxs("div",{children:["Категорий: ",o.length]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Браузер"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["User Agent: ",navigator.userAgent]}),d.jsxs("div",{children:["Local Storage: ",typeof Storage<"u"?"✅":"❌"]}),d.jsxs("div",{children:["Online: ",navigator.onLine?"✅":"❌"]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Переменные окружения"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:["NODE_ENV: ","production"]}),d.jsxs("div",{children:["Режим: ","production"]}),d.jsxs("div",{children:["Dev: ","❌"]})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"font-semibold text-indigo-400",children:"Console Logs"}),d.jsx("div",{className:"text-xs text-zinc-400",children:"Откройте DevTools (F12) → Console для просмотра подробных логов"})]})]})}function Er({children:t}){const{user:e,loading:n}=Bn();return n?d.jsx(FI,{text:"Проверяем авторизацию..."}):e?d.jsx(EV,{children:t}):d.jsx(a2,{to:"/login",replace:!0})}function gF(){return console.log("📱 App component rendering..."),d.jsx(vV,{children:d.jsx(xV,{children:d.jsxs("div",{className:"min-h-screen bg-gradient-hero",children:[d.jsx(_V,{}),d.jsx("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:d.jsxs(u2,{children:[d.jsx(gn,{path:"/",element:d.jsx(Er,{children:d.jsx(X4,{})})}),d.jsx(gn,{path:"/categories",element:d.jsx(Er,{children:d.jsx(J4,{})})}),d.jsx(gn,{path:"/goals",element:d.jsx(Er,{children:d.jsx(Z4,{})})}),d.jsx(gn,{path:"/operations",element:d.jsx(Er,{children:d.jsx(eF,{})})}),d.jsx(gn,{path:"/limits",element:d.jsx(Er,{children:d.jsx(dF,{})})}),d.jsx(gn,{path:"/settings",element:d.jsx(Er,{children:d.jsx(tF,{})})}),d.jsx(gn,{path:"/budget",element:d.jsx(Er,{children:d.jsx(pF,{})})}),d.jsx(gn,{path:"/debug",element:d.jsx(Er,{children:d.jsx(mF,{})})}),d.jsx(gn,{path:"/login",element:d.jsx(hF,{})}),d.jsx(gn,{path:"/register",element:d.jsx(fF,{})})]})})]})})})}class yF extends Dp.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-100 flex items-center justify-center p-4",children:d.jsxs("div",{className:"card p-8 max-w-md text-center space-y-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"Что-то пошло не так"}),d.jsx("p",{className:"text-zinc-400",children:"Произошла ошибка при загрузке приложения. Попробуйте обновить страницу."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Обновить страницу"}),!1]})}):this.props.children}}function vF(){return d.jsx("div",{style:{minHeight:"100vh",background:"#09090b",color:"#fafafa",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui",padding:"20px"},children:d.jsxs("div",{style:{background:"#18181b",padding:"32px",borderRadius:"16px",border:"1px solid #27272a",textAlign:"center",maxWidth:"500px"},children:[d.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#6366f1",marginBottom:"16px"},children:"🔧 Режим отладки"}),d.jsx("p",{style:{color:"#a1a1aa",marginBottom:"24px",lineHeight:"1.5"},children:"Приложение запущено в автономном режиме для диагностики проблем."}),d.jsxs("div",{style:{background:"#0f0f23",padding:"16px",borderRadius:"8px",marginBottom:"20px",textAlign:"left",fontSize:"14px"},children:[d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"✅ React:"})," Загружен успешно"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"✅ CSS:"})," Базовые стили применены"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{children:"🔍 Firebase:"})," Проверяется..."]}),d.jsxs("div",{children:[d.jsx("strong",{children:"🌐 Сеть:"})," ",navigator.onLine?"Подключена":"Отключена"]})]}),d.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#6366f1",color:"white",padding:"12px 24px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"500"},children:"Попробовать снова"}),d.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"#71717a"},children:"Откройте DevTools (F12) для просмотра подробных логов"})]})})}console.log("🚀 Starting React app...");console.log("Environment:",{NODE_ENV:"production",MODE:"production",DEV:!1,BASE_URL:"./"});const ry=document.getElementById("root");console.log("Root element found:",!!ry);if(!ry)throw console.error("❌ Root element not found! Check your HTML."),new Error("Root element not found");async function xF(){let t=!0;try{await q1(()=>Promise.resolve().then(()=>yV),void 0,import.meta.url),console.log("✅ Firebase config loaded")}catch(e){console.error("❌ Firebase config failed to load:",e),t=!1}try{const e=fT(ry);console.log("✅ React root created successfully"),t?e.render(d.jsx(Dp.StrictMode,{children:d.jsx(yF,{children:d.jsx(y2,{children:d.jsx(gF,{})})})})):(console.log("🔧 Starting in offline mode"),e.render(d.jsx(vF,{}))),console.log("✅ App rendered successfully")}catch(e){console.error("❌ Failed to render app:",e),document.body.innerHTML=`
      <div style="
        min-height: 100vh; 
        background: #09090b; 
        color: #fafafa; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        font-family: system-ui;
        padding: 20px;
      ">
        <div style="text-align: center; max-width: 500px;">
          <h1 style="color: #ef4444; font-size: 24px; margin-bottom: 16px;">
            Ошибка загрузки приложения
          </h1>
          <p style="color: #a1a1aa; margin-bottom: 20px;">
            ${e.message}
          </p>
          <button onclick="window.location.reload()" style="
            background: #6366f1; 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer;
            font-size: 16px;
          ">
            Обновить страницу
          </button>
        </div>
      </div>
    `}}xF();
